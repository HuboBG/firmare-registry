(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();/**
* @vue/shared v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ir(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const Z={},jt=[],tt=()=>{},Mi=()=>!1,sn=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),or=e=>e.startsWith("onUpdate:"),me=Object.assign,ar=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},Ra=Object.prototype.hasOwnProperty,z=(e,t)=>Ra.call(e,t),N=Array.isArray,Ht=e=>bs(e)==="[object Map]",nn=e=>bs(e)==="[object Set]",Mr=e=>bs(e)==="[object Date]",j=e=>typeof e=="function",ce=e=>typeof e=="string",st=e=>typeof e=="symbol",ne=e=>e!==null&&typeof e=="object",$i=e=>(ne(e)||j(e))&&j(e.then)&&j(e.catch),Li=Object.prototype.toString,bs=e=>Li.call(e),ka=e=>bs(e).slice(8,-1),ji=e=>bs(e)==="[object Object]",lr=e=>ce(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,as=ir(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),rn=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},Oa=/-\w/g,bt=rn(e=>e.replace(Oa,t=>t.slice(1).toUpperCase())),Ia=/\B([A-Z])/g,Et=rn(e=>e.replace(Ia,"-$1").toLowerCase()),Hi=rn(e=>e.charAt(0).toUpperCase()+e.slice(1)),Sn=rn(e=>e?`on${Hi(e)}`:""),wt=(e,t)=>!Object.is(e,t),Us=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},qi=(e,t,s,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:s})},cr=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let $r;const on=()=>$r||($r=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ur(e){if(N(e)){const t={};for(let s=0;s<e.length;s++){const n=e[s],r=ce(n)?Da(n):ur(n);if(r)for(const i in r)t[i]=r[i]}return t}else if(ce(e)||ne(e))return e}const Aa=/;(?![^(]*\))/g,Pa=/:([^]+)/,Ua=/\/\*[^]*?\*\//g;function Da(e){const t={};return e.replace(Ua,"").split(Aa).forEach(s=>{if(s){const n=s.split(Pa);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function qt(e){let t="";if(ce(e))t=e;else if(N(e))for(let s=0;s<e.length;s++){const n=qt(e[s]);n&&(t+=n+" ")}else if(ne(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const Na="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Fa=ir(Na);function Bi(e){return!!e||e===""}function Ma(e,t){if(e.length!==t.length)return!1;let s=!0;for(let n=0;s&&n<e.length;n++)s=an(e[n],t[n]);return s}function an(e,t){if(e===t)return!0;let s=Mr(e),n=Mr(t);if(s||n)return s&&n?e.getTime()===t.getTime():!1;if(s=st(e),n=st(t),s||n)return e===t;if(s=N(e),n=N(t),s||n)return s&&n?Ma(e,t):!1;if(s=ne(e),n=ne(t),s||n){if(!s||!n)return!1;const r=Object.keys(e).length,i=Object.keys(t).length;if(r!==i)return!1;for(const o in e){const a=e.hasOwnProperty(o),l=t.hasOwnProperty(o);if(a&&!l||!a&&l||!an(e[o],t[o]))return!1}}return String(e)===String(t)}function Ki(e,t){return e.findIndex(s=>an(s,t))}const Vi=e=>!!(e&&e.__v_isRef===!0),ie=e=>ce(e)?e:e==null?"":N(e)||ne(e)&&(e.toString===Li||!j(e.toString))?Vi(e)?ie(e.value):JSON.stringify(e,Wi,2):String(e),Wi=(e,t)=>Vi(t)?Wi(e,t.value):Ht(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[n,r],i)=>(s[vn(n,i)+" =>"]=r,s),{})}:nn(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>vn(s))}:st(t)?vn(t):ne(t)&&!N(t)&&!ji(t)?String(t):t,vn=(e,t="")=>{var s;return st(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};/**
* @vue/reactivity v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let xe;class $a{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=xe,!t&&xe&&(this.index=(xe.scopes||(xe.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=xe;try{return xe=this,t()}finally{xe=s}}}on(){++this._on===1&&(this.prevScope=xe,xe=this)}off(){this._on>0&&--this._on===0&&(xe=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function La(){return xe}let te;const En=new WeakSet;class Ji{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,xe&&xe.active&&xe.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,En.has(this)&&(En.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Yi(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Lr(this),Gi(this);const t=te,s=He;te=this,He=!0;try{return this.fn()}finally{Xi(this),te=t,He=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)hr(t);this.deps=this.depsTail=void 0,Lr(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?En.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Mn(this)&&this.run()}get dirty(){return Mn(this)}}let zi=0,ls,cs;function Yi(e,t=!1){if(e.flags|=8,t){e.next=cs,cs=e;return}e.next=ls,ls=e}function fr(){zi++}function dr(){if(--zi>0)return;if(cs){let t=cs;for(cs=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;ls;){let t=ls;for(ls=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=s}}if(e)throw e}function Gi(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Xi(e){let t,s=e.depsTail,n=s;for(;n;){const r=n.prevDep;n.version===-1?(n===s&&(s=r),hr(n),ja(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=r}e.deps=t,e.depsTail=s}function Mn(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Qi(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Qi(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===ps)||(e.globalVersion=ps,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Mn(e))))return;e.flags|=2;const t=e.dep,s=te,n=He;te=e,He=!0;try{Gi(e);const r=e.fn(e._value);(t.version===0||wt(r,e._value))&&(e.flags|=128,e._value=r,t.version++)}catch(r){throw t.version++,r}finally{te=s,He=n,Xi(e),e.flags&=-3}}function hr(e,t=!1){const{dep:s,prevSub:n,nextSub:r}=e;if(n&&(n.nextSub=r,e.prevSub=void 0),r&&(r.prevSub=n,e.nextSub=void 0),s.subs===e&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let i=s.computed.deps;i;i=i.nextDep)hr(i,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function ja(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let He=!0;const Zi=[];function lt(){Zi.push(He),He=!1}function ct(){const e=Zi.pop();He=e===void 0?!0:e}function Lr(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=te;te=void 0;try{t()}finally{te=s}}}let ps=0;class Ha{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class pr{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!te||!He||te===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==te)s=this.activeLink=new Ha(te,this),te.deps?(s.prevDep=te.depsTail,te.depsTail.nextDep=s,te.depsTail=s):te.deps=te.depsTail=s,eo(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=te.depsTail,s.nextDep=void 0,te.depsTail.nextDep=s,te.depsTail=s,te.deps===s&&(te.deps=n)}return s}trigger(t){this.version++,ps++,this.notify(t)}notify(t){fr();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{dr()}}}function eo(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)eo(n)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const $n=new WeakMap,It=Symbol(""),Ln=Symbol(""),gs=Symbol("");function pe(e,t,s){if(He&&te){let n=$n.get(e);n||$n.set(e,n=new Map);let r=n.get(s);r||(n.set(s,r=new pr),r.map=n,r.key=s),r.track()}}function ot(e,t,s,n,r,i){const o=$n.get(e);if(!o){ps++;return}const a=l=>{l&&l.trigger()};if(fr(),t==="clear")o.forEach(a);else{const l=N(e),u=l&&lr(s);if(l&&s==="length"){const c=Number(n);o.forEach((f,p)=>{(p==="length"||p===gs||!st(p)&&p>=c)&&a(f)})}else switch((s!==void 0||o.has(void 0))&&a(o.get(s)),u&&a(o.get(gs)),t){case"add":l?u&&a(o.get("length")):(a(o.get(It)),Ht(e)&&a(o.get(Ln)));break;case"delete":l||(a(o.get(It)),Ht(e)&&a(o.get(Ln)));break;case"set":Ht(e)&&a(o.get(It));break}}dr()}function Ft(e){const t=J(e);return t===e?t:(pe(t,"iterate",gs),Me(e)?t:t.map(fe))}function ln(e){return pe(e=J(e),"iterate",gs),e}const qa={__proto__:null,[Symbol.iterator](){return Tn(this,Symbol.iterator,fe)},concat(...e){return Ft(this).concat(...e.map(t=>N(t)?Ft(t):t))},entries(){return Tn(this,"entries",e=>(e[1]=fe(e[1]),e))},every(e,t){return rt(this,"every",e,t,void 0,arguments)},filter(e,t){return rt(this,"filter",e,t,s=>s.map(fe),arguments)},find(e,t){return rt(this,"find",e,t,fe,arguments)},findIndex(e,t){return rt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return rt(this,"findLast",e,t,fe,arguments)},findLastIndex(e,t){return rt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return rt(this,"forEach",e,t,void 0,arguments)},includes(...e){return xn(this,"includes",e)},indexOf(...e){return xn(this,"indexOf",e)},join(e){return Ft(this).join(e)},lastIndexOf(...e){return xn(this,"lastIndexOf",e)},map(e,t){return rt(this,"map",e,t,void 0,arguments)},pop(){return ss(this,"pop")},push(...e){return ss(this,"push",e)},reduce(e,...t){return jr(this,"reduce",e,t)},reduceRight(e,...t){return jr(this,"reduceRight",e,t)},shift(){return ss(this,"shift")},some(e,t){return rt(this,"some",e,t,void 0,arguments)},splice(...e){return ss(this,"splice",e)},toReversed(){return Ft(this).toReversed()},toSorted(e){return Ft(this).toSorted(e)},toSpliced(...e){return Ft(this).toSpliced(...e)},unshift(...e){return ss(this,"unshift",e)},values(){return Tn(this,"values",fe)}};function Tn(e,t,s){const n=ln(e),r=n[t]();return n!==e&&!Me(e)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.done||(i.value=s(i.value)),i}),r}const Ba=Array.prototype;function rt(e,t,s,n,r,i){const o=ln(e),a=o!==e&&!Me(e),l=o[t];if(l!==Ba[t]){const f=l.apply(e,i);return a?fe(f):f}let u=s;o!==e&&(a?u=function(f,p){return s.call(this,fe(f),p,e)}:s.length>2&&(u=function(f,p){return s.call(this,f,p,e)}));const c=l.call(o,u,n);return a&&r?r(c):c}function jr(e,t,s,n){const r=ln(e);let i=s;return r!==e&&(Me(e)?s.length>3&&(i=function(o,a,l){return s.call(this,o,a,l,e)}):i=function(o,a,l){return s.call(this,o,fe(a),l,e)}),r[t](i,...n)}function xn(e,t,s){const n=J(e);pe(n,"iterate",gs);const r=n[t](...s);return(r===-1||r===!1)&&wr(s[0])?(s[0]=J(s[0]),n[t](...s)):r}function ss(e,t,s=[]){lt(),fr();const n=J(e)[t].apply(e,s);return dr(),ct(),n}const Ka=ir("__proto__,__v_isRef,__isVue"),to=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(st));function Va(e){st(e)||(e=String(e));const t=J(this);return pe(t,"has",e),t.hasOwnProperty(e)}class so{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,n){if(s==="__v_skip")return t.__v_skip;const r=this._isReadonly,i=this._isShallow;if(s==="__v_isReactive")return!r;if(s==="__v_isReadonly")return r;if(s==="__v_isShallow")return i;if(s==="__v_raw")return n===(r?i?tl:oo:i?io:ro).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const o=N(t);if(!r){let l;if(o&&(l=qa[s]))return l;if(s==="hasOwnProperty")return Va}const a=Reflect.get(t,s,_e(t)?t:n);if((st(s)?to.has(s):Ka(s))||(r||pe(t,"get",s),i))return a;if(_e(a)){const l=o&&lr(s)?a:a.value;return r&&ne(l)?Hn(l):l}return ne(a)?r?Hn(a):_r(a):a}}class no extends so{constructor(t=!1){super(!1,t)}set(t,s,n,r){let i=t[s];if(!this._isShallow){const l=St(i);if(!Me(n)&&!St(n)&&(i=J(i),n=J(n)),!N(t)&&_e(i)&&!_e(n))return l||(i.value=n),!0}const o=N(t)&&lr(s)?Number(s)<t.length:z(t,s),a=Reflect.set(t,s,n,_e(t)?t:r);return t===J(r)&&(o?wt(n,i)&&ot(t,"set",s,n):ot(t,"add",s,n)),a}deleteProperty(t,s){const n=z(t,s);t[s];const r=Reflect.deleteProperty(t,s);return r&&n&&ot(t,"delete",s,void 0),r}has(t,s){const n=Reflect.has(t,s);return(!st(s)||!to.has(s))&&pe(t,"has",s),n}ownKeys(t){return pe(t,"iterate",N(t)?"length":It),Reflect.ownKeys(t)}}class Wa extends so{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const Ja=new no,za=new Wa,Ya=new no(!0);const jn=e=>e,Os=e=>Reflect.getPrototypeOf(e);function Ga(e,t,s){return function(...n){const r=this.__v_raw,i=J(r),o=Ht(i),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,u=r[e](...n),c=s?jn:t?Vs:fe;return!t&&pe(i,"iterate",l?Ln:It),{next(){const{value:f,done:p}=u.next();return p?{value:f,done:p}:{value:a?[c(f[0]),c(f[1])]:c(f),done:p}},[Symbol.iterator](){return this}}}}function Is(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Xa(e,t){const s={get(r){const i=this.__v_raw,o=J(i),a=J(r);e||(wt(r,a)&&pe(o,"get",r),pe(o,"get",a));const{has:l}=Os(o),u=t?jn:e?Vs:fe;if(l.call(o,r))return u(i.get(r));if(l.call(o,a))return u(i.get(a));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!e&&pe(J(r),"iterate",It),r.size},has(r){const i=this.__v_raw,o=J(i),a=J(r);return e||(wt(r,a)&&pe(o,"has",r),pe(o,"has",a)),r===a?i.has(r):i.has(r)||i.has(a)},forEach(r,i){const o=this,a=o.__v_raw,l=J(a),u=t?jn:e?Vs:fe;return!e&&pe(l,"iterate",It),a.forEach((c,f)=>r.call(i,u(c),u(f),o))}};return me(s,e?{add:Is("add"),set:Is("set"),delete:Is("delete"),clear:Is("clear")}:{add(r){!t&&!Me(r)&&!St(r)&&(r=J(r));const i=J(this);return Os(i).has.call(i,r)||(i.add(r),ot(i,"add",r,r)),this},set(r,i){!t&&!Me(i)&&!St(i)&&(i=J(i));const o=J(this),{has:a,get:l}=Os(o);let u=a.call(o,r);u||(r=J(r),u=a.call(o,r));const c=l.call(o,r);return o.set(r,i),u?wt(i,c)&&ot(o,"set",r,i):ot(o,"add",r,i),this},delete(r){const i=J(this),{has:o,get:a}=Os(i);let l=o.call(i,r);l||(r=J(r),l=o.call(i,r)),a&&a.call(i,r);const u=i.delete(r);return l&&ot(i,"delete",r,void 0),u},clear(){const r=J(this),i=r.size!==0,o=r.clear();return i&&ot(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{s[r]=Ga(r,e,t)}),s}function gr(e,t){const s=Xa(e,t);return(n,r,i)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?n:Reflect.get(z(s,r)&&r in n?s:n,r,i)}const Qa={get:gr(!1,!1)},Za={get:gr(!1,!0)},el={get:gr(!0,!1)};const ro=new WeakMap,io=new WeakMap,oo=new WeakMap,tl=new WeakMap;function sl(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function nl(e){return e.__v_skip||!Object.isExtensible(e)?0:sl(ka(e))}function _r(e){return St(e)?e:mr(e,!1,Ja,Qa,ro)}function rl(e){return mr(e,!1,Ya,Za,io)}function Hn(e){return mr(e,!0,za,el,oo)}function mr(e,t,s,n,r){if(!ne(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=nl(e);if(i===0)return e;const o=r.get(e);if(o)return o;const a=new Proxy(e,i===2?n:s);return r.set(e,a),a}function Bt(e){return St(e)?Bt(e.__v_raw):!!(e&&e.__v_isReactive)}function St(e){return!!(e&&e.__v_isReadonly)}function Me(e){return!!(e&&e.__v_isShallow)}function wr(e){return e?!!e.__v_raw:!1}function J(e){const t=e&&e.__v_raw;return t?J(t):e}function il(e){return!z(e,"__v_skip")&&Object.isExtensible(e)&&qi(e,"__v_skip",!0),e}const fe=e=>ne(e)?_r(e):e,Vs=e=>ne(e)?Hn(e):e;function _e(e){return e?e.__v_isRef===!0:!1}function se(e){return ol(e,!1)}function ol(e,t){return _e(e)?e:new al(e,t)}class al{constructor(t,s){this.dep=new pr,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?t:J(t),this._value=s?t:fe(t),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(t){const s=this._rawValue,n=this.__v_isShallow||Me(t)||St(t);t=n?t:J(t),wt(t,s)&&(this._rawValue=t,this._value=n?t:fe(t),this.dep.trigger())}}function qn(e){return _e(e)?e.value:e}const ll={get:(e,t,s)=>t==="__v_raw"?e:qn(Reflect.get(e,t,s)),set:(e,t,s,n)=>{const r=e[t];return _e(r)&&!_e(s)?(r.value=s,!0):Reflect.set(e,t,s,n)}};function ao(e){return Bt(e)?e:new Proxy(e,ll)}class cl{constructor(t,s,n){this.fn=t,this.setter=s,this._value=void 0,this.dep=new pr(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ps-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&te!==this)return Yi(this,!0),!0}get value(){const t=this.dep.track();return Qi(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function ul(e,t,s=!1){let n,r;return j(e)?n=e:(n=e.get,r=e.set),new cl(n,r,s)}const As={},Ws=new WeakMap;let Rt;function fl(e,t=!1,s=Rt){if(s){let n=Ws.get(s);n||Ws.set(s,n=[]),n.push(e)}}function dl(e,t,s=Z){const{immediate:n,deep:r,once:i,scheduler:o,augmentJob:a,call:l}=s,u=O=>r?O:Me(O)||r===!1||r===0?at(O,1):at(O);let c,f,p,y,_=!1,E=!1;if(_e(e)?(f=()=>e.value,_=Me(e)):Bt(e)?(f=()=>u(e),_=!0):N(e)?(E=!0,_=e.some(O=>Bt(O)||Me(O)),f=()=>e.map(O=>{if(_e(O))return O.value;if(Bt(O))return u(O);if(j(O))return l?l(O,2):O()})):j(e)?t?f=l?()=>l(e,2):e:f=()=>{if(p){lt();try{p()}finally{ct()}}const O=Rt;Rt=c;try{return l?l(e,3,[y]):e(y)}finally{Rt=O}}:f=tt,t&&r){const O=f,$=r===!0?1/0:r;f=()=>at(O(),$)}const T=La(),A=()=>{c.stop(),T&&T.active&&ar(T.effects,c)};if(i&&t){const O=t;t=(...$)=>{O(...$),A()}}let F=E?new Array(e.length).fill(As):As;const D=O=>{if(!(!(c.flags&1)||!c.dirty&&!O))if(t){const $=c.run();if(r||_||(E?$.some((q,W)=>wt(q,F[W])):wt($,F))){p&&p();const q=Rt;Rt=c;try{const W=[$,F===As?void 0:E&&F[0]===As?[]:F,y];F=$,l?l(t,3,W):t(...W)}finally{Rt=q}}}else c.run()};return a&&a(D),c=new Ji(f),c.scheduler=o?()=>o(D,!1):D,y=O=>fl(O,!1,c),p=c.onStop=()=>{const O=Ws.get(c);if(O){if(l)l(O,4);else for(const $ of O)$();Ws.delete(c)}},t?n?D(!0):F=c.run():o?o(D.bind(null,!0),!0):c.run(),A.pause=c.pause.bind(c),A.resume=c.resume.bind(c),A.stop=A,A}function at(e,t=1/0,s){if(t<=0||!ne(e)||e.__v_skip||(s=s||new Map,(s.get(e)||0)>=t))return e;if(s.set(e,t),t--,_e(e))at(e.value,t,s);else if(N(e))for(let n=0;n<e.length;n++)at(e[n],t,s);else if(nn(e)||Ht(e))e.forEach(n=>{at(n,t,s)});else if(ji(e)){for(const n in e)at(e[n],t,s);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&at(e[n],t,s)}return e}/**
* @vue/runtime-core v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ss(e,t,s,n){try{return n?e(...n):e()}catch(r){cn(r,t,s)}}function nt(e,t,s,n){if(j(e)){const r=Ss(e,t,s,n);return r&&$i(r)&&r.catch(i=>{cn(i,t,s)}),r}if(N(e)){const r=[];for(let i=0;i<e.length;i++)r.push(nt(e[i],t,s,n));return r}}function cn(e,t,s,n=!0){const r=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||Z;if(t){let a=t.parent;const l=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${s}`;for(;a;){const c=a.ec;if(c){for(let f=0;f<c.length;f++)if(c[f](e,l,u)===!1)return}a=a.parent}if(i){lt(),Ss(i,null,10,[e,l,u]),ct();return}}hl(e,s,r,n,o)}function hl(e,t,s,n=!0,r=!1){if(r)throw e;console.error(e)}const be=[];let Ge=-1;const Kt=[];let pt=null,Mt=0;const lo=Promise.resolve();let Js=null;function pl(e){const t=Js||lo;return e?t.then(this?e.bind(this):e):t}function gl(e){let t=Ge+1,s=be.length;for(;t<s;){const n=t+s>>>1,r=be[n],i=_s(r);i<e||i===e&&r.flags&2?t=n+1:s=n}return t}function yr(e){if(!(e.flags&1)){const t=_s(e),s=be[be.length-1];!s||!(e.flags&2)&&t>=_s(s)?be.push(e):be.splice(gl(t),0,e),e.flags|=1,co()}}function co(){Js||(Js=lo.then(fo))}function _l(e){N(e)?Kt.push(...e):pt&&e.id===-1?pt.splice(Mt+1,0,e):e.flags&1||(Kt.push(e),e.flags|=1),co()}function Hr(e,t,s=Ge+1){for(;s<be.length;s++){const n=be[s];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;be.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function uo(e){if(Kt.length){const t=[...new Set(Kt)].sort((s,n)=>_s(s)-_s(n));if(Kt.length=0,pt){pt.push(...t);return}for(pt=t,Mt=0;Mt<pt.length;Mt++){const s=pt[Mt];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}pt=null,Mt=0}}const _s=e=>e.id==null?e.flags&2?-1:1/0:e.id;function fo(e){try{for(Ge=0;Ge<be.length;Ge++){const t=be[Ge];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Ss(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Ge<be.length;Ge++){const t=be[Ge];t&&(t.flags&=-2)}Ge=-1,be.length=0,uo(),Js=null,(be.length||Kt.length)&&fo()}}let Fe=null,ho=null;function zs(e){const t=Fe;return Fe=e,ho=e&&e.type.__scopeId||null,t}function ml(e,t=Fe,s){if(!t||e._n)return e;const n=(...r)=>{n._d&&Xr(-1);const i=zs(t);let o;try{o=e(...r)}finally{zs(i),n._d&&Xr(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function $t(e,t){if(Fe===null)return e;const s=pn(Fe),n=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[i,o,a,l=Z]=t[r];i&&(j(i)&&(i={mounted:i,updated:i}),i.deep&&at(o),n.push({dir:i,instance:s,value:o,oldValue:void 0,arg:a,modifiers:l}))}return e}function xt(e,t,s,n){const r=e.dirs,i=t&&t.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let l=a.dir[n];l&&(lt(),nt(l,s,8,[e.el,a,e,t]),ct())}}const wl=Symbol("_vte"),yl=e=>e.__isTeleport,bl=Symbol("_leaveCb");function br(e,t){e.shapeFlag&6&&e.component?(e.transition=t,br(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Gt(e,t){return j(e)?me({name:e.name},t,{setup:e}):e}function po(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const Ys=new WeakMap;function us(e,t,s,n,r=!1){if(N(e)){e.forEach((_,E)=>us(_,t&&(N(t)?t[E]:t),s,n,r));return}if(fs(n)&&!r){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&us(e,t,s,n.component.subTree);return}const i=n.shapeFlag&4?pn(n.component):n.el,o=r?null:i,{i:a,r:l}=e,u=t&&t.r,c=a.refs===Z?a.refs={}:a.refs,f=a.setupState,p=J(f),y=f===Z?Mi:_=>z(p,_);if(u!=null&&u!==l){if(qr(t),ce(u))c[u]=null,y(u)&&(f[u]=null);else if(_e(u)){u.value=null;const _=t;_.k&&(c[_.k]=null)}}if(j(l))Ss(l,a,12,[o,c]);else{const _=ce(l),E=_e(l);if(_||E){const T=()=>{if(e.f){const A=_?y(l)?f[l]:c[l]:l.value;if(r)N(A)&&ar(A,i);else if(N(A))A.includes(i)||A.push(i);else if(_)c[l]=[i],y(l)&&(f[l]=c[l]);else{const F=[i];l.value=F,e.k&&(c[e.k]=F)}}else _?(c[l]=o,y(l)&&(f[l]=o)):E&&(l.value=o,e.k&&(c[e.k]=o))};if(o){const A=()=>{T(),Ys.delete(e)};A.id=-1,Ys.set(e,A),Ae(A,s)}else qr(e),T()}}}function qr(e){const t=Ys.get(e);t&&(t.flags|=8,Ys.delete(e))}on().requestIdleCallback;on().cancelIdleCallback;const fs=e=>!!e.type.__asyncLoader,go=e=>e.type.__isKeepAlive;function Sl(e,t){_o(e,"a",t)}function vl(e,t){_o(e,"da",t)}function _o(e,t,s=Se){const n=e.__wdc||(e.__wdc=()=>{let r=s;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(un(t,n,s),s){let r=s.parent;for(;r&&r.parent;)go(r.parent.vnode)&&El(n,t,s,r),r=r.parent}}function El(e,t,s,n){const r=un(t,e,n,!0);mo(()=>{ar(n[t],r)},s)}function un(e,t,s=Se,n=!1){if(s){const r=s[e]||(s[e]=[]),i=t.__weh||(t.__weh=(...o)=>{lt();const a=vs(s),l=nt(t,s,e,o);return a(),ct(),l});return n?r.unshift(i):r.push(i),i}}const ft=e=>(t,s=Se)=>{(!ws||e==="sp")&&un(e,(...n)=>t(...n),s)},Tl=ft("bm"),fn=ft("m"),xl=ft("bu"),Cl=ft("u"),Rl=ft("bum"),mo=ft("um"),kl=ft("sp"),Ol=ft("rtg"),Il=ft("rtc");function Al(e,t=Se){un("ec",e,t)}const Pl=Symbol.for("v-ndc");function Sr(e,t,s,n){let r;const i=s,o=N(e);if(o||ce(e)){const a=o&&Bt(e);let l=!1,u=!1;a&&(l=!Me(e),u=St(e),e=ln(e)),r=new Array(e.length);for(let c=0,f=e.length;c<f;c++)r[c]=t(l?u?Vs(fe(e[c])):fe(e[c]):e[c],c,void 0,i)}else if(typeof e=="number"){r=new Array(e);for(let a=0;a<e;a++)r[a]=t(a+1,a,void 0,i)}else if(ne(e))if(e[Symbol.iterator])r=Array.from(e,(a,l)=>t(a,l,void 0,i));else{const a=Object.keys(e);r=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const c=a[l];r[l]=t(e[c],c,l,i)}}else r=[];return r}const Bn=e=>e?$o(e)?pn(e):Bn(e.parent):null,ds=me(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Bn(e.parent),$root:e=>Bn(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>yo(e),$forceUpdate:e=>e.f||(e.f=()=>{yr(e.update)}),$nextTick:e=>e.n||(e.n=pl.bind(e.proxy)),$watch:e=>ec.bind(e)}),Cn=(e,t)=>e!==Z&&!e.__isScriptSetup&&z(e,t),Ul={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:n,data:r,props:i,accessCache:o,type:a,appContext:l}=e;let u;if(t[0]!=="$"){const y=o[t];if(y!==void 0)switch(y){case 1:return n[t];case 2:return r[t];case 4:return s[t];case 3:return i[t]}else{if(Cn(n,t))return o[t]=1,n[t];if(r!==Z&&z(r,t))return o[t]=2,r[t];if((u=e.propsOptions[0])&&z(u,t))return o[t]=3,i[t];if(s!==Z&&z(s,t))return o[t]=4,s[t];Kn&&(o[t]=0)}}const c=ds[t];let f,p;if(c)return t==="$attrs"&&pe(e.attrs,"get",""),c(e);if((f=a.__cssModules)&&(f=f[t]))return f;if(s!==Z&&z(s,t))return o[t]=4,s[t];if(p=l.config.globalProperties,z(p,t))return p[t]},set({_:e},t,s){const{data:n,setupState:r,ctx:i}=e;return Cn(r,t)?(r[t]=s,!0):n!==Z&&z(n,t)?(n[t]=s,!0):z(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:n,appContext:r,propsOptions:i,type:o}},a){let l,u;return!!(s[a]||e!==Z&&a[0]!=="$"&&z(e,a)||Cn(t,a)||(l=i[0])&&z(l,a)||z(n,a)||z(ds,a)||z(r.config.globalProperties,a)||(u=o.__cssModules)&&u[a])},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:z(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function Br(e){return N(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let Kn=!0;function Dl(e){const t=yo(e),s=e.proxy,n=e.ctx;Kn=!1,t.beforeCreate&&Kr(t.beforeCreate,e,"bc");const{data:r,computed:i,methods:o,watch:a,provide:l,inject:u,created:c,beforeMount:f,mounted:p,beforeUpdate:y,updated:_,activated:E,deactivated:T,beforeDestroy:A,beforeUnmount:F,destroyed:D,unmounted:O,render:$,renderTracked:q,renderTriggered:W,errorCaptured:re,serverPrefetch:oe,expose:de,inheritAttrs:Be,components:Ue,directives:De,filters:ke}=t;if(u&&Nl(u,n,null),o)for(const Q in o){const H=o[Q];j(H)&&(n[Q]=H.bind(s))}if(r){const Q=r.call(s,s);ne(Q)&&(e.data=_r(Q))}if(Kn=!0,i)for(const Q in i){const H=i[Q],Oe=j(H)?H.bind(s,s):j(H.get)?H.get.bind(s,s):tt,dt=!j(H)&&j(H.set)?H.set.bind(s):tt,he=jo({get:Oe,set:dt});Object.defineProperty(n,Q,{enumerable:!0,configurable:!0,get:()=>he.value,set:ue=>he.value=ue})}if(a)for(const Q in a)wo(a[Q],n,s,Q);if(l){const Q=j(l)?l.call(s):l;Reflect.ownKeys(Q).forEach(H=>{Hl(H,Q[H])})}c&&Kr(c,e,"c");function X(Q,H){N(H)?H.forEach(Oe=>Q(Oe.bind(s))):H&&Q(H.bind(s))}if(X(Tl,f),X(fn,p),X(xl,y),X(Cl,_),X(Sl,E),X(vl,T),X(Al,re),X(Il,q),X(Ol,W),X(Rl,F),X(mo,O),X(kl,oe),N(de))if(de.length){const Q=e.exposed||(e.exposed={});de.forEach(H=>{Object.defineProperty(Q,H,{get:()=>s[H],set:Oe=>s[H]=Oe,enumerable:!0})})}else e.exposed||(e.exposed={});$&&e.render===tt&&(e.render=$),Be!=null&&(e.inheritAttrs=Be),Ue&&(e.components=Ue),De&&(e.directives=De),oe&&po(e)}function Nl(e,t,s=tt){N(e)&&(e=Vn(e));for(const n in e){const r=e[n];let i;ne(r)?"default"in r?i=Ds(r.from||n,r.default,!0):i=Ds(r.from||n):i=Ds(r),_e(i)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):t[n]=i}}function Kr(e,t,s){nt(N(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,s)}function wo(e,t,s,n){let r=n.includes(".")?Po(s,n):()=>s[n];if(ce(e)){const i=t[e];j(i)&&Ns(r,i)}else if(j(e))Ns(r,e.bind(s));else if(ne(e))if(N(e))e.forEach(i=>wo(i,t,s,n));else{const i=j(e.handler)?e.handler.bind(s):t[e.handler];j(i)&&Ns(r,i,e)}}function yo(e){const t=e.type,{mixins:s,extends:n}=t,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=e.appContext,a=i.get(t);let l;return a?l=a:!r.length&&!s&&!n?l=t:(l={},r.length&&r.forEach(u=>Gs(l,u,o,!0)),Gs(l,t,o)),ne(t)&&i.set(t,l),l}function Gs(e,t,s,n=!1){const{mixins:r,extends:i}=t;i&&Gs(e,i,s,!0),r&&r.forEach(o=>Gs(e,o,s,!0));for(const o in t)if(!(n&&o==="expose")){const a=Fl[o]||s&&s[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const Fl={data:Vr,props:Wr,emits:Wr,methods:is,computed:is,beforeCreate:we,created:we,beforeMount:we,mounted:we,beforeUpdate:we,updated:we,beforeDestroy:we,beforeUnmount:we,destroyed:we,unmounted:we,activated:we,deactivated:we,errorCaptured:we,serverPrefetch:we,components:is,directives:is,watch:$l,provide:Vr,inject:Ml};function Vr(e,t){return t?e?function(){return me(j(e)?e.call(this,this):e,j(t)?t.call(this,this):t)}:t:e}function Ml(e,t){return is(Vn(e),Vn(t))}function Vn(e){if(N(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function we(e,t){return e?[...new Set([].concat(e,t))]:t}function is(e,t){return e?me(Object.create(null),e,t):t}function Wr(e,t){return e?N(e)&&N(t)?[...new Set([...e,...t])]:me(Object.create(null),Br(e),Br(t??{})):t}function $l(e,t){if(!e)return t;if(!t)return e;const s=me(Object.create(null),e);for(const n in t)s[n]=we(e[n],t[n]);return s}function bo(){return{app:null,config:{isNativeTag:Mi,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ll=0;function jl(e,t){return function(n,r=null){j(n)||(n=me({},n)),r!=null&&!ne(r)&&(r=null);const i=bo(),o=new WeakSet,a=[];let l=!1;const u=i.app={_uid:Ll++,_component:n,_props:r,_container:null,_context:i,_instance:null,version:Ec,get config(){return i.config},set config(c){},use(c,...f){return o.has(c)||(c&&j(c.install)?(o.add(c),c.install(u,...f)):j(c)&&(o.add(c),c(u,...f))),u},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),u},component(c,f){return f?(i.components[c]=f,u):i.components[c]},directive(c,f){return f?(i.directives[c]=f,u):i.directives[c]},mount(c,f,p){if(!l){const y=u._ceVNode||$e(n,r);return y.appContext=i,p===!0?p="svg":p===!1&&(p=void 0),e(y,c,p),l=!0,u._container=c,c.__vue_app__=u,pn(y.component)}},onUnmount(c){a.push(c)},unmount(){l&&(nt(a,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(c,f){return i.provides[c]=f,u},runWithContext(c){const f=Vt;Vt=u;try{return c()}finally{Vt=f}}};return u}}let Vt=null;function Hl(e,t){if(Se){let s=Se.provides;const n=Se.parent&&Se.parent.provides;n===s&&(s=Se.provides=Object.create(n)),s[e]=t}}function Ds(e,t,s=!1){const n=mc();if(n||Vt){let r=Vt?Vt._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(r&&e in r)return r[e];if(arguments.length>1)return s&&j(t)?t.call(n&&n.proxy):t}}const So={},vo=()=>Object.create(So),Eo=e=>Object.getPrototypeOf(e)===So;function ql(e,t,s,n=!1){const r={},i=vo();e.propsDefaults=Object.create(null),To(e,t,r,i);for(const o in e.propsOptions[0])o in r||(r[o]=void 0);s?e.props=n?r:rl(r):e.type.props?e.props=r:e.props=i,e.attrs=i}function Bl(e,t,s,n){const{props:r,attrs:i,vnode:{patchFlag:o}}=e,a=J(r),[l]=e.propsOptions;let u=!1;if((n||o>0)&&!(o&16)){if(o&8){const c=e.vnode.dynamicProps;for(let f=0;f<c.length;f++){let p=c[f];if(dn(e.emitsOptions,p))continue;const y=t[p];if(l)if(z(i,p))y!==i[p]&&(i[p]=y,u=!0);else{const _=bt(p);r[_]=Wn(l,a,_,y,e,!1)}else y!==i[p]&&(i[p]=y,u=!0)}}}else{To(e,t,r,i)&&(u=!0);let c;for(const f in a)(!t||!z(t,f)&&((c=Et(f))===f||!z(t,c)))&&(l?s&&(s[f]!==void 0||s[c]!==void 0)&&(r[f]=Wn(l,a,f,void 0,e,!0)):delete r[f]);if(i!==a)for(const f in i)(!t||!z(t,f))&&(delete i[f],u=!0)}u&&ot(e.attrs,"set","")}function To(e,t,s,n){const[r,i]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(as(l))continue;const u=t[l];let c;r&&z(r,c=bt(l))?!i||!i.includes(c)?s[c]=u:(a||(a={}))[c]=u:dn(e.emitsOptions,l)||(!(l in n)||u!==n[l])&&(n[l]=u,o=!0)}if(i){const l=J(s),u=a||Z;for(let c=0;c<i.length;c++){const f=i[c];s[f]=Wn(r,l,f,u[f],e,!z(u,f))}}return o}function Wn(e,t,s,n,r,i){const o=e[s];if(o!=null){const a=z(o,"default");if(a&&n===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&j(l)){const{propsDefaults:u}=r;if(s in u)n=u[s];else{const c=vs(r);n=u[s]=l.call(null,t),c()}}else n=l;r.ce&&r.ce._setProp(s,n)}o[0]&&(i&&!a?n=!1:o[1]&&(n===""||n===Et(s))&&(n=!0))}return n}const Kl=new WeakMap;function xo(e,t,s=!1){const n=s?Kl:t.propsCache,r=n.get(e);if(r)return r;const i=e.props,o={},a=[];let l=!1;if(!j(e)){const c=f=>{l=!0;const[p,y]=xo(f,t,!0);me(o,p),y&&a.push(...y)};!s&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!i&&!l)return ne(e)&&n.set(e,jt),jt;if(N(i))for(let c=0;c<i.length;c++){const f=bt(i[c]);Jr(f)&&(o[f]=Z)}else if(i)for(const c in i){const f=bt(c);if(Jr(f)){const p=i[c],y=o[f]=N(p)||j(p)?{type:p}:me({},p),_=y.type;let E=!1,T=!0;if(N(_))for(let A=0;A<_.length;++A){const F=_[A],D=j(F)&&F.name;if(D==="Boolean"){E=!0;break}else D==="String"&&(T=!1)}else E=j(_)&&_.name==="Boolean";y[0]=E,y[1]=T,(E||z(y,"default"))&&a.push(f)}}const u=[o,a];return ne(e)&&n.set(e,u),u}function Jr(e){return e[0]!=="$"&&!as(e)}const vr=e=>e==="_"||e==="_ctx"||e==="$stable",Er=e=>N(e)?e.map(et):[et(e)],Vl=(e,t,s)=>{if(t._n)return t;const n=ml((...r)=>Er(t(...r)),s);return n._c=!1,n},Co=(e,t,s)=>{const n=e._ctx;for(const r in e){if(vr(r))continue;const i=e[r];if(j(i))t[r]=Vl(r,i,n);else if(i!=null){const o=Er(i);t[r]=()=>o}}},Ro=(e,t)=>{const s=Er(t);e.slots.default=()=>s},ko=(e,t,s)=>{for(const n in t)(s||!vr(n))&&(e[n]=t[n])},Wl=(e,t,s)=>{const n=e.slots=vo();if(e.vnode.shapeFlag&32){const r=t._;r?(ko(n,t,s),s&&qi(n,"_",r,!0)):Co(t,n)}else t&&Ro(e,t)},Jl=(e,t,s)=>{const{vnode:n,slots:r}=e;let i=!0,o=Z;if(n.shapeFlag&32){const a=t._;a?s&&a===1?i=!1:ko(r,t,s):(i=!t.$stable,Co(t,r)),o=t}else t&&(Ro(e,t),o={default:1});if(i)for(const a in r)!vr(a)&&o[a]==null&&delete r[a]},Ae=lc;function zl(e){return Yl(e)}function Yl(e,t){const s=on();s.__VUE__=!0;const{insert:n,remove:r,patchProp:i,createElement:o,createText:a,createComment:l,setText:u,setElementText:c,parentNode:f,nextSibling:p,setScopeId:y=tt,insertStaticContent:_}=e,E=(d,h,m,v=null,w=null,b=null,R=void 0,C=null,x=!!h.dynamicChildren)=>{if(d===h)return;d&&!ns(d,h)&&(v=ks(d),ue(d,w,b,!0),d=null),h.patchFlag===-2&&(x=!1,h.dynamicChildren=null);const{type:S,ref:U,shapeFlag:I}=h;switch(S){case hn:T(d,h,m,v);break;case vt:A(d,h,m,v);break;case Fs:d==null&&F(h,m,v,R);break;case Ne:Ue(d,h,m,v,w,b,R,C,x);break;default:I&1?$(d,h,m,v,w,b,R,C,x):I&6?De(d,h,m,v,w,b,R,C,x):(I&64||I&128)&&S.process(d,h,m,v,w,b,R,C,x,es)}U!=null&&w?us(U,d&&d.ref,b,h||d,!h):U==null&&d&&d.ref!=null&&us(d.ref,null,b,d,!0)},T=(d,h,m,v)=>{if(d==null)n(h.el=a(h.children),m,v);else{const w=h.el=d.el;h.children!==d.children&&u(w,h.children)}},A=(d,h,m,v)=>{d==null?n(h.el=l(h.children||""),m,v):h.el=d.el},F=(d,h,m,v)=>{[d.el,d.anchor]=_(d.children,h,m,v,d.el,d.anchor)},D=({el:d,anchor:h},m,v)=>{let w;for(;d&&d!==h;)w=p(d),n(d,m,v),d=w;n(h,m,v)},O=({el:d,anchor:h})=>{let m;for(;d&&d!==h;)m=p(d),r(d),d=m;r(h)},$=(d,h,m,v,w,b,R,C,x)=>{if(h.type==="svg"?R="svg":h.type==="math"&&(R="mathml"),d==null)q(h,m,v,w,b,R,C,x);else{const S=d.el&&d.el._isVueCE?d.el:null;try{S&&S._beginPatch(),oe(d,h,w,b,R,C,x)}finally{S&&S._endPatch()}}},q=(d,h,m,v,w,b,R,C)=>{let x,S;const{props:U,shapeFlag:I,transition:P,dirs:M}=d;if(x=d.el=o(d.type,b,U&&U.is,U),I&8?c(x,d.children):I&16&&re(d.children,x,null,v,w,Rn(d,b),R,C),M&&xt(d,null,v,"created"),W(x,d,d.scopeId,R,v),U){for(const ee in U)ee!=="value"&&!as(ee)&&i(x,ee,null,U[ee],b,v);"value"in U&&i(x,"value",null,U.value,b),(S=U.onVnodeBeforeMount)&&Je(S,v,d)}M&&xt(d,null,v,"beforeMount");const K=Gl(w,P);K&&P.beforeEnter(x),n(x,h,m),((S=U&&U.onVnodeMounted)||K||M)&&Ae(()=>{S&&Je(S,v,d),K&&P.enter(x),M&&xt(d,null,v,"mounted")},w)},W=(d,h,m,v,w)=>{if(m&&y(d,m),v)for(let b=0;b<v.length;b++)y(d,v[b]);if(w){let b=w.subTree;if(h===b||Do(b.type)&&(b.ssContent===h||b.ssFallback===h)){const R=w.vnode;W(d,R,R.scopeId,R.slotScopeIds,w.parent)}}},re=(d,h,m,v,w,b,R,C,x=0)=>{for(let S=x;S<d.length;S++){const U=d[S]=C?gt(d[S]):et(d[S]);E(null,U,h,m,v,w,b,R,C)}},oe=(d,h,m,v,w,b,R)=>{const C=h.el=d.el;let{patchFlag:x,dynamicChildren:S,dirs:U}=h;x|=d.patchFlag&16;const I=d.props||Z,P=h.props||Z;let M;if(m&&Ct(m,!1),(M=P.onVnodeBeforeUpdate)&&Je(M,m,h,d),U&&xt(h,d,m,"beforeUpdate"),m&&Ct(m,!0),(I.innerHTML&&P.innerHTML==null||I.textContent&&P.textContent==null)&&c(C,""),S?de(d.dynamicChildren,S,C,m,v,Rn(h,w),b):R||H(d,h,C,null,m,v,Rn(h,w),b,!1),x>0){if(x&16)Be(C,I,P,m,w);else if(x&2&&I.class!==P.class&&i(C,"class",null,P.class,w),x&4&&i(C,"style",I.style,P.style,w),x&8){const K=h.dynamicProps;for(let ee=0;ee<K.length;ee++){const G=K[ee],Ee=I[G],Te=P[G];(Te!==Ee||G==="value")&&i(C,G,Ee,Te,w,m)}}x&1&&d.children!==h.children&&c(C,h.children)}else!R&&S==null&&Be(C,I,P,m,w);((M=P.onVnodeUpdated)||U)&&Ae(()=>{M&&Je(M,m,h,d),U&&xt(h,d,m,"updated")},v)},de=(d,h,m,v,w,b,R)=>{for(let C=0;C<h.length;C++){const x=d[C],S=h[C],U=x.el&&(x.type===Ne||!ns(x,S)||x.shapeFlag&198)?f(x.el):m;E(x,S,U,null,v,w,b,R,!0)}},Be=(d,h,m,v,w)=>{if(h!==m){if(h!==Z)for(const b in h)!as(b)&&!(b in m)&&i(d,b,h[b],null,w,v);for(const b in m){if(as(b))continue;const R=m[b],C=h[b];R!==C&&b!=="value"&&i(d,b,C,R,w,v)}"value"in m&&i(d,"value",h.value,m.value,w)}},Ue=(d,h,m,v,w,b,R,C,x)=>{const S=h.el=d?d.el:a(""),U=h.anchor=d?d.anchor:a("");let{patchFlag:I,dynamicChildren:P,slotScopeIds:M}=h;M&&(C=C?C.concat(M):M),d==null?(n(S,m,v),n(U,m,v),re(h.children||[],m,U,w,b,R,C,x)):I>0&&I&64&&P&&d.dynamicChildren?(de(d.dynamicChildren,P,m,w,b,R,C),(h.key!=null||w&&h===w.subTree)&&Oo(d,h,!0)):H(d,h,m,U,w,b,R,C,x)},De=(d,h,m,v,w,b,R,C,x)=>{h.slotScopeIds=C,d==null?h.shapeFlag&512?w.ctx.activate(h,m,v,R,x):ke(h,m,v,w,b,R,x):Tt(d,h,x)},ke=(d,h,m,v,w,b,R)=>{const C=d.component=_c(d,v,w);if(go(d)&&(C.ctx.renderer=es),wc(C,!1,R),C.asyncDep){if(w&&w.registerDep(C,X,R),!d.el){const x=C.subTree=$e(vt);A(null,x,h,m),d.placeholder=x.el}}else X(C,d,h,m,w,b,R)},Tt=(d,h,m)=>{const v=h.component=d.component;if(oc(d,h,m))if(v.asyncDep&&!v.asyncResolved){Q(v,h,m);return}else v.next=h,v.update();else h.el=d.el,v.vnode=h},X=(d,h,m,v,w,b,R)=>{const C=()=>{if(d.isMounted){let{next:I,bu:P,u:M,parent:K,vnode:ee}=d;{const Ve=Io(d);if(Ve){I&&(I.el=ee.el,Q(d,I,R)),Ve.asyncDep.then(()=>{d.isUnmounted||C()});return}}let G=I,Ee;Ct(d,!1),I?(I.el=ee.el,Q(d,I,R)):I=ee,P&&Us(P),(Ee=I.props&&I.props.onVnodeBeforeUpdate)&&Je(Ee,K,I,ee),Ct(d,!0);const Te=Yr(d),Ke=d.subTree;d.subTree=Te,E(Ke,Te,f(Ke.el),ks(Ke),d,w,b),I.el=Te.el,G===null&&ac(d,Te.el),M&&Ae(M,w),(Ee=I.props&&I.props.onVnodeUpdated)&&Ae(()=>Je(Ee,K,I,ee),w)}else{let I;const{el:P,props:M}=h,{bm:K,m:ee,parent:G,root:Ee,type:Te}=d,Ke=fs(h);Ct(d,!1),K&&Us(K),!Ke&&(I=M&&M.onVnodeBeforeMount)&&Je(I,G,h),Ct(d,!0);{Ee.ce&&Ee.ce._def.shadowRoot!==!1&&Ee.ce._injectChildStyle(Te);const Ve=d.subTree=Yr(d);E(null,Ve,m,v,d,w,b),h.el=Ve.el}if(ee&&Ae(ee,w),!Ke&&(I=M&&M.onVnodeMounted)){const Ve=h;Ae(()=>Je(I,G,Ve),w)}(h.shapeFlag&256||G&&fs(G.vnode)&&G.vnode.shapeFlag&256)&&d.a&&Ae(d.a,w),d.isMounted=!0,h=m=v=null}};d.scope.on();const x=d.effect=new Ji(C);d.scope.off();const S=d.update=x.run.bind(x),U=d.job=x.runIfDirty.bind(x);U.i=d,U.id=d.uid,x.scheduler=()=>yr(U),Ct(d,!0),S()},Q=(d,h,m)=>{h.component=d;const v=d.vnode.props;d.vnode=h,d.next=null,Bl(d,h.props,v,m),Jl(d,h.children,m),lt(),Hr(d),ct()},H=(d,h,m,v,w,b,R,C,x=!1)=>{const S=d&&d.children,U=d?d.shapeFlag:0,I=h.children,{patchFlag:P,shapeFlag:M}=h;if(P>0){if(P&128){dt(S,I,m,v,w,b,R,C,x);return}else if(P&256){Oe(S,I,m,v,w,b,R,C,x);return}}M&8?(U&16&&Zt(S,w,b),I!==S&&c(m,I)):U&16?M&16?dt(S,I,m,v,w,b,R,C,x):Zt(S,w,b,!0):(U&8&&c(m,""),M&16&&re(I,m,v,w,b,R,C,x))},Oe=(d,h,m,v,w,b,R,C,x)=>{d=d||jt,h=h||jt;const S=d.length,U=h.length,I=Math.min(S,U);let P;for(P=0;P<I;P++){const M=h[P]=x?gt(h[P]):et(h[P]);E(d[P],M,m,null,w,b,R,C,x)}S>U?Zt(d,w,b,!0,!1,I):re(h,m,v,w,b,R,C,x,I)},dt=(d,h,m,v,w,b,R,C,x)=>{let S=0;const U=h.length;let I=d.length-1,P=U-1;for(;S<=I&&S<=P;){const M=d[S],K=h[S]=x?gt(h[S]):et(h[S]);if(ns(M,K))E(M,K,m,null,w,b,R,C,x);else break;S++}for(;S<=I&&S<=P;){const M=d[I],K=h[P]=x?gt(h[P]):et(h[P]);if(ns(M,K))E(M,K,m,null,w,b,R,C,x);else break;I--,P--}if(S>I){if(S<=P){const M=P+1,K=M<U?h[M].el:v;for(;S<=P;)E(null,h[S]=x?gt(h[S]):et(h[S]),m,K,w,b,R,C,x),S++}}else if(S>P)for(;S<=I;)ue(d[S],w,b,!0),S++;else{const M=S,K=S,ee=new Map;for(S=K;S<=P;S++){const Ie=h[S]=x?gt(h[S]):et(h[S]);Ie.key!=null&&ee.set(Ie.key,S)}let G,Ee=0;const Te=P-K+1;let Ke=!1,Ve=0;const ts=new Array(Te);for(S=0;S<Te;S++)ts[S]=0;for(S=M;S<=I;S++){const Ie=d[S];if(Ee>=Te){ue(Ie,w,b,!0);continue}let We;if(Ie.key!=null)We=ee.get(Ie.key);else for(G=K;G<=P;G++)if(ts[G-K]===0&&ns(Ie,h[G])){We=G;break}We===void 0?ue(Ie,w,b,!0):(ts[We-K]=S+1,We>=Ve?Ve=We:Ke=!0,E(Ie,h[We],m,null,w,b,R,C,x),Ee++)}const Dr=Ke?Xl(ts):jt;for(G=Dr.length-1,S=Te-1;S>=0;S--){const Ie=K+S,We=h[Ie],Nr=h[Ie+1],Fr=Ie+1<U?Nr.el||Nr.placeholder:v;ts[S]===0?E(null,We,m,Fr,w,b,R,C,x):Ke&&(G<0||S!==Dr[G]?he(We,m,Fr,2):G--)}}},he=(d,h,m,v,w=null)=>{const{el:b,type:R,transition:C,children:x,shapeFlag:S}=d;if(S&6){he(d.component.subTree,h,m,v);return}if(S&128){d.suspense.move(h,m,v);return}if(S&64){R.move(d,h,m,es);return}if(R===Ne){n(b,h,m);for(let I=0;I<x.length;I++)he(x[I],h,m,v);n(d.anchor,h,m);return}if(R===Fs){D(d,h,m);return}if(v!==2&&S&1&&C)if(v===0)C.beforeEnter(b),n(b,h,m),Ae(()=>C.enter(b),w);else{const{leave:I,delayLeave:P,afterLeave:M}=C,K=()=>{d.ctx.isUnmounted?r(b):n(b,h,m)},ee=()=>{b._isLeaving&&b[bl](!0),I(b,()=>{K(),M&&M()})};P?P(b,K,ee):ee()}else n(b,h,m)},ue=(d,h,m,v=!1,w=!1)=>{const{type:b,props:R,ref:C,children:x,dynamicChildren:S,shapeFlag:U,patchFlag:I,dirs:P,cacheIndex:M}=d;if(I===-2&&(w=!1),C!=null&&(lt(),us(C,null,m,d,!0),ct()),M!=null&&(h.renderCache[M]=void 0),U&256){h.ctx.deactivate(d);return}const K=U&1&&P,ee=!fs(d);let G;if(ee&&(G=R&&R.onVnodeBeforeUnmount)&&Je(G,h,d),U&6)Rs(d.component,m,v);else{if(U&128){d.suspense.unmount(m,v);return}K&&xt(d,null,h,"beforeUnmount"),U&64?d.type.remove(d,h,m,es,v):S&&!S.hasOnce&&(b!==Ne||I>0&&I&64)?Zt(S,h,m,!1,!0):(b===Ne&&I&384||!w&&U&16)&&Zt(x,h,m),v&&Dt(d)}(ee&&(G=R&&R.onVnodeUnmounted)||K)&&Ae(()=>{G&&Je(G,h,d),K&&xt(d,null,h,"unmounted")},m)},Dt=d=>{const{type:h,el:m,anchor:v,transition:w}=d;if(h===Ne){Nt(m,v);return}if(h===Fs){O(d);return}const b=()=>{r(m),w&&!w.persisted&&w.afterLeave&&w.afterLeave()};if(d.shapeFlag&1&&w&&!w.persisted){const{leave:R,delayLeave:C}=w,x=()=>R(m,b);C?C(d.el,b,x):x()}else b()},Nt=(d,h)=>{let m;for(;d!==h;)m=p(d),r(d),d=m;r(h)},Rs=(d,h,m)=>{const{bum:v,scope:w,job:b,subTree:R,um:C,m:x,a:S}=d;zr(x),zr(S),v&&Us(v),w.stop(),b&&(b.flags|=8,ue(R,d,h,m)),C&&Ae(C,h),Ae(()=>{d.isUnmounted=!0},h)},Zt=(d,h,m,v=!1,w=!1,b=0)=>{for(let R=b;R<d.length;R++)ue(d[R],h,m,v,w)},ks=d=>{if(d.shapeFlag&6)return ks(d.component.subTree);if(d.shapeFlag&128)return d.suspense.next();const h=p(d.anchor||d.el),m=h&&h[wl];return m?p(m):h};let bn=!1;const Ur=(d,h,m)=>{d==null?h._vnode&&ue(h._vnode,null,null,!0):E(h._vnode||null,d,h,null,null,null,m),h._vnode=d,bn||(bn=!0,Hr(),uo(),bn=!1)},es={p:E,um:ue,m:he,r:Dt,mt:ke,mc:re,pc:H,pbc:de,n:ks,o:e};return{render:Ur,hydrate:void 0,createApp:jl(Ur)}}function Rn({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function Ct({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Gl(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Oo(e,t,s=!1){const n=e.children,r=t.children;if(N(n)&&N(r))for(let i=0;i<n.length;i++){const o=n[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=gt(r[i]),a.el=o.el),!s&&a.patchFlag!==-2&&Oo(o,a)),a.type===hn&&a.patchFlag!==-1&&(a.el=o.el),a.type===vt&&!a.el&&(a.el=o.el)}}function Xl(e){const t=e.slice(),s=[0];let n,r,i,o,a;const l=e.length;for(n=0;n<l;n++){const u=e[n];if(u!==0){if(r=s[s.length-1],e[r]<u){t[n]=r,s.push(n);continue}for(i=0,o=s.length-1;i<o;)a=i+o>>1,e[s[a]]<u?i=a+1:o=a;u<e[s[i]]&&(i>0&&(t[n]=s[i-1]),s[i]=n)}}for(i=s.length,o=s[i-1];i-- >0;)s[i]=o,o=t[o];return s}function Io(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Io(t)}function zr(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Ql=Symbol.for("v-scx"),Zl=()=>Ds(Ql);function Ns(e,t,s){return Ao(e,t,s)}function Ao(e,t,s=Z){const{immediate:n,deep:r,flush:i,once:o}=s,a=me({},s),l=t&&n||!t&&i!=="post";let u;if(ws){if(i==="sync"){const y=Zl();u=y.__watcherHandles||(y.__watcherHandles=[])}else if(!l){const y=()=>{};return y.stop=tt,y.resume=tt,y.pause=tt,y}}const c=Se;a.call=(y,_,E)=>nt(y,c,_,E);let f=!1;i==="post"?a.scheduler=y=>{Ae(y,c&&c.suspense)}:i!=="sync"&&(f=!0,a.scheduler=(y,_)=>{_?y():yr(y)}),a.augmentJob=y=>{t&&(y.flags|=4),f&&(y.flags|=2,c&&(y.id=c.uid,y.i=c))};const p=dl(e,t,a);return ws&&(u?u.push(p):l&&p()),p}function ec(e,t,s){const n=this.proxy,r=ce(e)?e.includes(".")?Po(n,e):()=>n[e]:e.bind(n,n);let i;j(t)?i=t:(i=t.handler,s=t);const o=vs(this),a=Ao(r,i.bind(n),s);return o(),a}function Po(e,t){const s=t.split(".");return()=>{let n=e;for(let r=0;r<s.length&&n;r++)n=n[s[r]];return n}}const tc=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${bt(t)}Modifiers`]||e[`${Et(t)}Modifiers`];function sc(e,t,...s){if(e.isUnmounted)return;const n=e.vnode.props||Z;let r=s;const i=t.startsWith("update:"),o=i&&tc(n,t.slice(7));o&&(o.trim&&(r=s.map(c=>ce(c)?c.trim():c)),o.number&&(r=s.map(cr)));let a,l=n[a=Sn(t)]||n[a=Sn(bt(t))];!l&&i&&(l=n[a=Sn(Et(t))]),l&&nt(l,e,6,r);const u=n[a+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,nt(u,e,6,r)}}const nc=new WeakMap;function Uo(e,t,s=!1){const n=s?nc:t.emitsCache,r=n.get(e);if(r!==void 0)return r;const i=e.emits;let o={},a=!1;if(!j(e)){const l=u=>{const c=Uo(u,t,!0);c&&(a=!0,me(o,c))};!s&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!i&&!a?(ne(e)&&n.set(e,null),null):(N(i)?i.forEach(l=>o[l]=null):me(o,i),ne(e)&&n.set(e,o),o)}function dn(e,t){return!e||!sn(t)?!1:(t=t.slice(2).replace(/Once$/,""),z(e,t[0].toLowerCase()+t.slice(1))||z(e,Et(t))||z(e,t))}function Yr(e){const{type:t,vnode:s,proxy:n,withProxy:r,propsOptions:[i],slots:o,attrs:a,emit:l,render:u,renderCache:c,props:f,data:p,setupState:y,ctx:_,inheritAttrs:E}=e,T=zs(e);let A,F;try{if(s.shapeFlag&4){const O=r||n,$=O;A=et(u.call($,O,c,f,y,p,_)),F=a}else{const O=t;A=et(O.length>1?O(f,{attrs:a,slots:o,emit:l}):O(f,null)),F=t.props?a:rc(a)}}catch(O){hs.length=0,cn(O,e,1),A=$e(vt)}let D=A;if(F&&E!==!1){const O=Object.keys(F),{shapeFlag:$}=D;O.length&&$&7&&(i&&O.some(or)&&(F=ic(F,i)),D=Jt(D,F,!1,!0))}return s.dirs&&(D=Jt(D,null,!1,!0),D.dirs=D.dirs?D.dirs.concat(s.dirs):s.dirs),s.transition&&br(D,s.transition),A=D,zs(T),A}const rc=e=>{let t;for(const s in e)(s==="class"||s==="style"||sn(s))&&((t||(t={}))[s]=e[s]);return t},ic=(e,t)=>{const s={};for(const n in e)(!or(n)||!(n.slice(9)in t))&&(s[n]=e[n]);return s};function oc(e,t,s){const{props:n,children:r,component:i}=e,{props:o,children:a,patchFlag:l}=t,u=i.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&l>=0){if(l&1024)return!0;if(l&16)return n?Gr(n,o,u):!!o;if(l&8){const c=t.dynamicProps;for(let f=0;f<c.length;f++){const p=c[f];if(o[p]!==n[p]&&!dn(u,p))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:n===o?!1:n?o?Gr(n,o,u):!0:!!o;return!1}function Gr(e,t,s){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let r=0;r<n.length;r++){const i=n[r];if(t[i]!==e[i]&&!dn(s,i))return!0}return!1}function ac({vnode:e,parent:t},s){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=s,t=t.parent;else break}}const Do=e=>e.__isSuspense;function lc(e,t){t&&t.pendingBranch?N(e)?t.effects.push(...e):t.effects.push(e):_l(e)}const Ne=Symbol.for("v-fgt"),hn=Symbol.for("v-txt"),vt=Symbol.for("v-cmt"),Fs=Symbol.for("v-stc"),hs=[];let Pe=null;function V(e=!1){hs.push(Pe=e?null:[])}function cc(){hs.pop(),Pe=hs[hs.length-1]||null}let ms=1;function Xr(e,t=!1){ms+=e,e<0&&Pe&&t&&(Pe.hasOnce=!0)}function No(e){return e.dynamicChildren=ms>0?Pe||jt:null,cc(),ms>0&&Pe&&Pe.push(e),e}function Y(e,t,s,n,r,i){return No(k(e,t,s,n,r,i,!0))}function Ms(e,t,s,n,r){return No($e(e,t,s,n,r,!0))}function Fo(e){return e?e.__v_isVNode===!0:!1}function ns(e,t){return e.type===t.type&&e.key===t.key}const Mo=({key:e})=>e??null,$s=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?ce(e)||_e(e)||j(e)?{i:Fe,r:e,k:t,f:!!s}:e:null);function k(e,t=null,s=null,n=0,r=null,i=e===Ne?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Mo(t),ref:t&&$s(t),scopeId:ho,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:n,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Fe};return a?(Tr(l,s),i&128&&e.normalize(l)):s&&(l.shapeFlag|=ce(s)?8:16),ms>0&&!o&&Pe&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Pe.push(l),l}const $e=uc;function uc(e,t=null,s=null,n=0,r=null,i=!1){if((!e||e===Pl)&&(e=vt),Fo(e)){const a=Jt(e,t,!0);return s&&Tr(a,s),ms>0&&!i&&Pe&&(a.shapeFlag&6?Pe[Pe.indexOf(e)]=a:Pe.push(a)),a.patchFlag=-2,a}if(vc(e)&&(e=e.__vccOpts),t){t=fc(t);let{class:a,style:l}=t;a&&!ce(a)&&(t.class=qt(a)),ne(l)&&(wr(l)&&!N(l)&&(l=me({},l)),t.style=ur(l))}const o=ce(e)?1:Do(e)?128:yl(e)?64:ne(e)?4:j(e)?2:0;return k(e,t,s,n,r,o,i,!0)}function fc(e){return e?wr(e)||Eo(e)?me({},e):e:null}function Jt(e,t,s=!1,n=!1){const{props:r,ref:i,patchFlag:o,children:a,transition:l}=e,u=t?hc(r||{},t):r,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&Mo(u),ref:t&&t.ref?s&&i?N(i)?i.concat($s(t)):[i,$s(t)]:$s(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ne?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Jt(e.ssContent),ssFallback:e.ssFallback&&Jt(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&n&&br(c,l.clone(c)),c}function ye(e=" ",t=0){return $e(hn,null,e,t)}function dc(e,t){const s=$e(Fs,null,e);return s.staticCount=t,s}function Ze(e="",t=!1){return t?(V(),Ms(vt,null,e)):$e(vt,null,e)}function et(e){return e==null||typeof e=="boolean"?$e(vt):N(e)?$e(Ne,null,e.slice()):Fo(e)?gt(e):$e(hn,null,String(e))}function gt(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Jt(e)}function Tr(e,t){let s=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(N(t))s=16;else if(typeof t=="object")if(n&65){const r=t.default;r&&(r._c&&(r._d=!1),Tr(e,r()),r._c&&(r._d=!0));return}else{s=32;const r=t._;!r&&!Eo(t)?t._ctx=Fe:r===3&&Fe&&(Fe.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else j(t)?(t={default:t,_ctx:Fe},s=32):(t=String(t),n&64?(s=16,t=[ye(t)]):s=8);e.children=t,e.shapeFlag|=s}function hc(...e){const t={};for(let s=0;s<e.length;s++){const n=e[s];for(const r in n)if(r==="class")t.class!==n.class&&(t.class=qt([t.class,n.class]));else if(r==="style")t.style=ur([t.style,n.style]);else if(sn(r)){const i=t[r],o=n[r];o&&i!==o&&!(N(i)&&i.includes(o))&&(t[r]=i?[].concat(i,o):o)}else r!==""&&(t[r]=n[r])}return t}function Je(e,t,s,n=null){nt(e,t,7,[s,n])}const pc=bo();let gc=0;function _c(e,t,s){const n=e.type,r=(t?t.appContext:e.appContext)||pc,i={uid:gc++,vnode:e,type:n,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new $a(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:xo(n,r),emitsOptions:Uo(n,r),emit:null,emitted:null,propsDefaults:Z,inheritAttrs:n.inheritAttrs,ctx:Z,data:Z,props:Z,attrs:Z,slots:Z,refs:Z,setupState:Z,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=sc.bind(null,i),e.ce&&e.ce(i),i}let Se=null;const mc=()=>Se||Fe;let Xs,Jn;{const e=on(),t=(s,n)=>{let r;return(r=e[s])||(r=e[s]=[]),r.push(n),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};Xs=t("__VUE_INSTANCE_SETTERS__",s=>Se=s),Jn=t("__VUE_SSR_SETTERS__",s=>ws=s)}const vs=e=>{const t=Se;return Xs(e),e.scope.on(),()=>{e.scope.off(),Xs(t)}},Qr=()=>{Se&&Se.scope.off(),Xs(null)};function $o(e){return e.vnode.shapeFlag&4}let ws=!1;function wc(e,t=!1,s=!1){t&&Jn(t);const{props:n,children:r}=e.vnode,i=$o(e);ql(e,n,i,t),Wl(e,r,s||t);const o=i?yc(e,t):void 0;return t&&Jn(!1),o}function yc(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Ul);const{setup:n}=s;if(n){lt();const r=e.setupContext=n.length>1?Sc(e):null,i=vs(e),o=Ss(n,e,0,[e.props,r]),a=$i(o);if(ct(),i(),(a||e.sp)&&!fs(e)&&po(e),a){if(o.then(Qr,Qr),t)return o.then(l=>{Zr(e,l)}).catch(l=>{cn(l,e,0)});e.asyncDep=o}else Zr(e,o)}else Lo(e)}function Zr(e,t,s){j(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:ne(t)&&(e.setupState=ao(t)),Lo(e)}function Lo(e,t,s){const n=e.type;e.render||(e.render=n.render||tt);{const r=vs(e);lt();try{Dl(e)}finally{ct(),r()}}}const bc={get(e,t){return pe(e,"get",""),e[t]}};function Sc(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,bc),slots:e.slots,emit:e.emit,expose:t}}function pn(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(ao(il(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in ds)return ds[s](e)},has(t,s){return s in t||s in ds}})):e.proxy}function vc(e){return j(e)&&"__vccOpts"in e}const jo=(e,t)=>ul(e,t,ws),Ec="3.5.24";/**
* @vue/runtime-dom v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let zn;const ei=typeof window<"u"&&window.trustedTypes;if(ei)try{zn=ei.createPolicy("vue",{createHTML:e=>e})}catch{}const Ho=zn?e=>zn.createHTML(e):e=>e,Tc="http://www.w3.org/2000/svg",xc="http://www.w3.org/1998/Math/MathML",it=typeof document<"u"?document:null,ti=it&&it.createElement("template"),Cc={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,n)=>{const r=t==="svg"?it.createElementNS(Tc,e):t==="mathml"?it.createElementNS(xc,e):s?it.createElement(e,{is:s}):it.createElement(e);return e==="select"&&n&&n.multiple!=null&&r.setAttribute("multiple",n.multiple),r},createText:e=>it.createTextNode(e),createComment:e=>it.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>it.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,n,r,i){const o=s?s.previousSibling:t.lastChild;if(r&&(r===i||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),s),!(r===i||!(r=r.nextSibling)););else{ti.innerHTML=Ho(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const a=ti.content;if(n==="svg"||n==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,s)}return[o?o.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},Rc=Symbol("_vtc");function kc(e,t,s){const n=e[Rc];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const si=Symbol("_vod"),Oc=Symbol("_vsh"),Ic=Symbol(""),Ac=/(?:^|;)\s*display\s*:/;function Pc(e,t,s){const n=e.style,r=ce(s);let i=!1;if(s&&!r){if(t)if(ce(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();s[a]==null&&Ls(n,a,"")}else for(const o in t)s[o]==null&&Ls(n,o,"");for(const o in s)o==="display"&&(i=!0),Ls(n,o,s[o])}else if(r){if(t!==s){const o=n[Ic];o&&(s+=";"+o),n.cssText=s,i=Ac.test(s)}}else t&&e.removeAttribute("style");si in e&&(e[si]=i?n.display:"",e[Oc]&&(n.display="none"))}const ni=/\s*!important$/;function Ls(e,t,s){if(N(s))s.forEach(n=>Ls(e,t,n));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const n=Uc(e,t);ni.test(s)?e.setProperty(Et(n),s.replace(ni,""),"important"):e[n]=s}}const ri=["Webkit","Moz","ms"],kn={};function Uc(e,t){const s=kn[t];if(s)return s;let n=bt(t);if(n!=="filter"&&n in e)return kn[t]=n;n=Hi(n);for(let r=0;r<ri.length;r++){const i=ri[r]+n;if(i in e)return kn[t]=i}return t}const ii="http://www.w3.org/1999/xlink";function oi(e,t,s,n,r,i=Fa(t)){n&&t.startsWith("xlink:")?s==null?e.removeAttributeNS(ii,t.slice(6,t.length)):e.setAttributeNS(ii,t,s):s==null||i&&!Bi(s)?e.removeAttribute(t):e.setAttribute(t,i?"":st(s)?String(s):s)}function ai(e,t,s,n,r){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?Ho(s):s);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?e.getAttribute("value")||"":e.value,l=s==null?e.type==="checkbox"?"on":"":String(s);(a!==l||!("_value"in e))&&(e.value=l),s==null&&e.removeAttribute(t),e._value=s;return}let o=!1;if(s===""||s==null){const a=typeof e[t];a==="boolean"?s=Bi(s):s==null&&a==="string"?(s="",o=!0):a==="number"&&(s=0,o=!0)}try{e[t]=s}catch{}o&&e.removeAttribute(r||t)}function kt(e,t,s,n){e.addEventListener(t,s,n)}function Dc(e,t,s,n){e.removeEventListener(t,s,n)}const li=Symbol("_vei");function Nc(e,t,s,n,r=null){const i=e[li]||(e[li]={}),o=i[t];if(n&&o)o.value=n;else{const[a,l]=Fc(t);if(n){const u=i[t]=Lc(n,r);kt(e,a,u,l)}else o&&(Dc(e,a,o,l),i[t]=void 0)}}const ci=/(?:Once|Passive|Capture)$/;function Fc(e){let t;if(ci.test(e)){t={};let n;for(;n=e.match(ci);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Et(e.slice(2)),t]}let On=0;const Mc=Promise.resolve(),$c=()=>On||(Mc.then(()=>On=0),On=Date.now());function Lc(e,t){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;nt(jc(n,s.value),t,5,[n])};return s.value=e,s.attached=$c(),s}function jc(e,t){if(N(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(n=>r=>!r._stopped&&n&&n(r))}else return t}const ui=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Hc=(e,t,s,n,r,i)=>{const o=r==="svg";t==="class"?kc(e,n,o):t==="style"?Pc(e,s,n):sn(t)?or(t)||Nc(e,t,s,n,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):qc(e,t,n,o))?(ai(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&oi(e,t,n,o,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!ce(n))?ai(e,bt(t),n,i,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),oi(e,t,n,o))};function qc(e,t,s,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&ui(t)&&j(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=e.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return ui(t)&&ce(s)?!1:t in e}const Qs=e=>{const t=e.props["onUpdate:modelValue"]||!1;return N(t)?s=>Us(t,s):t};function Bc(e){e.target.composing=!0}function fi(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Wt=Symbol("_assign");function di(e,t,s){return t&&(e=e.trim()),s&&(e=cr(e)),e}const xr={created(e,{modifiers:{lazy:t,trim:s,number:n}},r){e[Wt]=Qs(r);const i=n||r.props&&r.props.type==="number";kt(e,t?"change":"input",o=>{o.target.composing||e[Wt](di(e.value,s,i))}),(s||i)&&kt(e,"change",()=>{e.value=di(e.value,s,i)}),t||(kt(e,"compositionstart",Bc),kt(e,"compositionend",fi),kt(e,"change",fi))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:s,modifiers:{lazy:n,trim:r,number:i}},o){if(e[Wt]=Qs(o),e.composing)return;const a=(i||e.type==="number")&&!/^0\d/.test(e.value)?cr(e.value):e.value,l=t??"";a!==l&&(document.activeElement===e&&e.type!=="range"&&(n&&t===s||r&&e.value.trim()===l)||(e.value=l))}},In={deep:!0,created(e,t,s){e[Wt]=Qs(s),kt(e,"change",()=>{const n=e._modelValue,r=Kc(e),i=e.checked,o=e[Wt];if(N(n)){const a=Ki(n,r),l=a!==-1;if(i&&!l)o(n.concat(r));else if(!i&&l){const u=[...n];u.splice(a,1),o(u)}}else if(nn(n)){const a=new Set(n);i?a.add(r):a.delete(r),o(a)}else o(qo(e,i))})},mounted:hi,beforeUpdate(e,t,s){e[Wt]=Qs(s),hi(e,t,s)}};function hi(e,{value:t,oldValue:s},n){e._modelValue=t;let r;if(N(t))r=Ki(t,n.props.value)>-1;else if(nn(t))r=t.has(n.props.value);else{if(t===s)return;r=an(t,qo(e,!0))}e.checked!==r&&(e.checked=r)}function Kc(e){return"_value"in e?e._value:e.value}function qo(e,t){const s=t?"_trueValue":"_falseValue";return s in e?e[s]:t}const Vc={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Wc=(e,t)=>{const s=e._withKeys||(e._withKeys={}),n=t.join(".");return s[n]||(s[n]=r=>{if(!("key"in r))return;const i=Et(r.key);if(t.some(o=>o===i||Vc[o]===i))return e(r)})},Jc=me({patchProp:Hc},Cc);let pi;function zc(){return pi||(pi=zl(Jc))}const Yc=(...e)=>{const t=zc().createApp(...e),{mount:s}=t;return t.mount=n=>{const r=Xc(n);if(!r)return;const i=t._component;!j(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=s(r,!1,Gc(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},t};function Gc(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Xc(e){return ce(e)?document.querySelector(e):e}const Qc={class:"card"},Zc={class:"row"},eu={key:0},tu=["onClick"],su={key:1,class:"small"},nu=Gt({__name:"FirmwareTypes",setup(e){const t=se(JSON.parse(localStorage.getItem("fw_types")||"[]")),s=se("");function n(){localStorage.setItem("fw_types",JSON.stringify(t.value))}function r(){const o=s.value.trim();o&&(t.value.includes(o)||(t.value.push(o),n()),s.value="")}function i(){t.value=JSON.parse(localStorage.getItem("fw_types")||"[]")}return(o,a)=>(V(),Y("div",Qc,[a[1]||(a[1]=k("h2",null,"Firmware Types",-1)),k("div",Zc,[$t(k("input",{"onUpdate:modelValue":a[0]||(a[0]=l=>s.value=l),placeholder:"e.g. firmware1",onKeyup:Wc(r,["enter"])},null,544),[[xr,s.value]]),k("button",{onClick:r},"Add"),k("button",{onClick:i},"Reload")]),t.value.length?(V(),Y("ul",eu,[(V(!0),Y(Ne,null,Sr(t.value,l=>(V(),Y("li",{key:l},[k("button",{class:"typeBtn",onClick:u=>o.$emit("selectType",l)},ie(l),9,tu)]))),128))])):(V(),Y("p",su,"No types found yet. Upload a firmware or add manually.")),a[2]||(a[2]=k("p",{class:"small"}," Types are stored locally (localStorage). API doesn't yet expose a types endpoint. ",-1))]))}}),ru=(e,t)=>{const s=e.__vccOpts||e;for(const[n,r]of t)s[n]=r;return s},iu=ru(nu,[["__scopeId","data-v-06b75d9f"]]);function Bo(e,t){return function(){return e.apply(t,arguments)}}const{toString:ou}=Object.prototype,{getPrototypeOf:Cr}=Object,{iterator:gn,toStringTag:Ko}=Symbol,_n=(e=>t=>{const s=ou.call(t);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),qe=e=>(e=e.toLowerCase(),t=>_n(t)===e),mn=e=>t=>typeof t===e,{isArray:Xt}=Array,zt=mn("undefined");function Es(e){return e!==null&&!zt(e)&&e.constructor!==null&&!zt(e.constructor)&&Ce(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Vo=qe("ArrayBuffer");function au(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Vo(e.buffer),t}const lu=mn("string"),Ce=mn("function"),Wo=mn("number"),Ts=e=>e!==null&&typeof e=="object",cu=e=>e===!0||e===!1,js=e=>{if(_n(e)!=="object")return!1;const t=Cr(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Ko in e)&&!(gn in e)},uu=e=>{if(!Ts(e)||Es(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},fu=qe("Date"),du=qe("File"),hu=qe("Blob"),pu=qe("FileList"),gu=e=>Ts(e)&&Ce(e.pipe),_u=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Ce(e.append)&&((t=_n(e))==="formdata"||t==="object"&&Ce(e.toString)&&e.toString()==="[object FormData]"))},mu=qe("URLSearchParams"),[wu,yu,bu,Su]=["ReadableStream","Request","Response","Headers"].map(qe),vu=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function xs(e,t,{allOwnKeys:s=!1}={}){if(e===null||typeof e>"u")return;let n,r;if(typeof e!="object"&&(e=[e]),Xt(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{if(Es(e))return;const i=s?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let a;for(n=0;n<o;n++)a=i[n],t.call(null,e[a],a,e)}}function Jo(e,t){if(Es(e))return null;t=t.toLowerCase();const s=Object.keys(e);let n=s.length,r;for(;n-- >0;)if(r=s[n],t===r.toLowerCase())return r;return null}const Ot=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,zo=e=>!zt(e)&&e!==Ot;function Yn(){const{caseless:e,skipUndefined:t}=zo(this)&&this||{},s={},n=(r,i)=>{const o=e&&Jo(s,i)||i;js(s[o])&&js(r)?s[o]=Yn(s[o],r):js(r)?s[o]=Yn({},r):Xt(r)?s[o]=r.slice():(!t||!zt(r))&&(s[o]=r)};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&xs(arguments[r],n);return s}const Eu=(e,t,s,{allOwnKeys:n}={})=>(xs(t,(r,i)=>{s&&Ce(r)?e[i]=Bo(r,s):e[i]=r},{allOwnKeys:n}),e),Tu=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),xu=(e,t,s,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),s&&Object.assign(e.prototype,s)},Cu=(e,t,s,n)=>{let r,i,o;const a={};if(t=t||{},e==null)return t;do{for(r=Object.getOwnPropertyNames(e),i=r.length;i-- >0;)o=r[i],(!n||n(o,e,t))&&!a[o]&&(t[o]=e[o],a[o]=!0);e=s!==!1&&Cr(e)}while(e&&(!s||s(e,t))&&e!==Object.prototype);return t},Ru=(e,t,s)=>{e=String(e),(s===void 0||s>e.length)&&(s=e.length),s-=t.length;const n=e.indexOf(t,s);return n!==-1&&n===s},ku=e=>{if(!e)return null;if(Xt(e))return e;let t=e.length;if(!Wo(t))return null;const s=new Array(t);for(;t-- >0;)s[t]=e[t];return s},Ou=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Cr(Uint8Array)),Iu=(e,t)=>{const n=(e&&e[gn]).call(e);let r;for(;(r=n.next())&&!r.done;){const i=r.value;t.call(e,i[0],i[1])}},Au=(e,t)=>{let s;const n=[];for(;(s=e.exec(t))!==null;)n.push(s);return n},Pu=qe("HTMLFormElement"),Uu=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,n,r){return n.toUpperCase()+r}),gi=(({hasOwnProperty:e})=>(t,s)=>e.call(t,s))(Object.prototype),Du=qe("RegExp"),Yo=(e,t)=>{const s=Object.getOwnPropertyDescriptors(e),n={};xs(s,(r,i)=>{let o;(o=t(r,i,e))!==!1&&(n[i]=o||r)}),Object.defineProperties(e,n)},Nu=e=>{Yo(e,(t,s)=>{if(Ce(e)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const n=e[s];if(Ce(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},Fu=(e,t)=>{const s={},n=r=>{r.forEach(i=>{s[i]=!0})};return Xt(e)?n(e):n(String(e).split(t)),s},Mu=()=>{},$u=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Lu(e){return!!(e&&Ce(e.append)&&e[Ko]==="FormData"&&e[gn])}const ju=e=>{const t=new Array(10),s=(n,r)=>{if(Ts(n)){if(t.indexOf(n)>=0)return;if(Es(n))return n;if(!("toJSON"in n)){t[r]=n;const i=Xt(n)?[]:{};return xs(n,(o,a)=>{const l=s(o,r+1);!zt(l)&&(i[a]=l)}),t[r]=void 0,i}}return n};return s(e,0)},Hu=qe("AsyncFunction"),qu=e=>e&&(Ts(e)||Ce(e))&&Ce(e.then)&&Ce(e.catch),Go=((e,t)=>e?setImmediate:t?((s,n)=>(Ot.addEventListener("message",({source:r,data:i})=>{r===Ot&&i===s&&n.length&&n.shift()()},!1),r=>{n.push(r),Ot.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",Ce(Ot.postMessage)),Bu=typeof queueMicrotask<"u"?queueMicrotask.bind(Ot):typeof process<"u"&&process.nextTick||Go,Ku=e=>e!=null&&Ce(e[gn]),g={isArray:Xt,isArrayBuffer:Vo,isBuffer:Es,isFormData:_u,isArrayBufferView:au,isString:lu,isNumber:Wo,isBoolean:cu,isObject:Ts,isPlainObject:js,isEmptyObject:uu,isReadableStream:wu,isRequest:yu,isResponse:bu,isHeaders:Su,isUndefined:zt,isDate:fu,isFile:du,isBlob:hu,isRegExp:Du,isFunction:Ce,isStream:gu,isURLSearchParams:mu,isTypedArray:Ou,isFileList:pu,forEach:xs,merge:Yn,extend:Eu,trim:vu,stripBOM:Tu,inherits:xu,toFlatObject:Cu,kindOf:_n,kindOfTest:qe,endsWith:Ru,toArray:ku,forEachEntry:Iu,matchAll:Au,isHTMLForm:Pu,hasOwnProperty:gi,hasOwnProp:gi,reduceDescriptors:Yo,freezeMethods:Nu,toObjectSet:Fu,toCamelCase:Uu,noop:Mu,toFiniteNumber:$u,findKey:Jo,global:Ot,isContextDefined:zo,isSpecCompliantForm:Lu,toJSONObject:ju,isAsyncFn:Hu,isThenable:qu,setImmediate:Go,asap:Bu,isIterable:Ku};function L(e,t,s,n,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),s&&(this.config=s),n&&(this.request=n),r&&(this.response=r,this.status=r.status?r.status:null)}g.inherits(L,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:g.toJSONObject(this.config),code:this.code,status:this.status}}});const Xo=L.prototype,Qo={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Qo[e]={value:e}});Object.defineProperties(L,Qo);Object.defineProperty(Xo,"isAxiosError",{value:!0});L.from=(e,t,s,n,r,i)=>{const o=Object.create(Xo);g.toFlatObject(e,o,function(c){return c!==Error.prototype},u=>u!=="isAxiosError");const a=e&&e.message?e.message:"Error",l=t==null&&e?e.code:t;return L.call(o,a,l,s,n,r),e&&o.cause==null&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",i&&Object.assign(o,i),o};const Vu=null;function Gn(e){return g.isPlainObject(e)||g.isArray(e)}function Zo(e){return g.endsWith(e,"[]")?e.slice(0,-2):e}function _i(e,t,s){return e?e.concat(t).map(function(r,i){return r=Zo(r),!s&&i?"["+r+"]":r}).join(s?".":""):t}function Wu(e){return g.isArray(e)&&!e.some(Gn)}const Ju=g.toFlatObject(g,{},null,function(t){return/^is[A-Z]/.test(t)});function wn(e,t,s){if(!g.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,s=g.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,T){return!g.isUndefined(T[E])});const n=s.metaTokens,r=s.visitor||c,i=s.dots,o=s.indexes,l=(s.Blob||typeof Blob<"u"&&Blob)&&g.isSpecCompliantForm(t);if(!g.isFunction(r))throw new TypeError("visitor must be a function");function u(_){if(_===null)return"";if(g.isDate(_))return _.toISOString();if(g.isBoolean(_))return _.toString();if(!l&&g.isBlob(_))throw new L("Blob is not supported. Use a Buffer instead.");return g.isArrayBuffer(_)||g.isTypedArray(_)?l&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function c(_,E,T){let A=_;if(_&&!T&&typeof _=="object"){if(g.endsWith(E,"{}"))E=n?E:E.slice(0,-2),_=JSON.stringify(_);else if(g.isArray(_)&&Wu(_)||(g.isFileList(_)||g.endsWith(E,"[]"))&&(A=g.toArray(_)))return E=Zo(E),A.forEach(function(D,O){!(g.isUndefined(D)||D===null)&&t.append(o===!0?_i([E],O,i):o===null?E:E+"[]",u(D))}),!1}return Gn(_)?!0:(t.append(_i(T,E,i),u(_)),!1)}const f=[],p=Object.assign(Ju,{defaultVisitor:c,convertValue:u,isVisitable:Gn});function y(_,E){if(!g.isUndefined(_)){if(f.indexOf(_)!==-1)throw Error("Circular reference detected in "+E.join("."));f.push(_),g.forEach(_,function(A,F){(!(g.isUndefined(A)||A===null)&&r.call(t,A,g.isString(F)?F.trim():F,E,p))===!0&&y(A,E?E.concat(F):[F])}),f.pop()}}if(!g.isObject(e))throw new TypeError("data must be an object");return y(e),t}function mi(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function Rr(e,t){this._pairs=[],e&&wn(e,this,t)}const ea=Rr.prototype;ea.append=function(t,s){this._pairs.push([t,s])};ea.toString=function(t){const s=t?function(n){return t.call(this,n,mi)}:mi;return this._pairs.map(function(r){return s(r[0])+"="+s(r[1])},"").join("&")};function zu(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function ta(e,t,s){if(!t)return e;const n=s&&s.encode||zu;g.isFunction(s)&&(s={serialize:s});const r=s&&s.serialize;let i;if(r?i=r(t,s):i=g.isURLSearchParams(t)?t.toString():new Rr(t,s).toString(n),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class wi{constructor(){this.handlers=[]}use(t,s,n){return this.handlers.push({fulfilled:t,rejected:s,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){g.forEach(this.handlers,function(n){n!==null&&t(n)})}}const sa={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Yu=typeof URLSearchParams<"u"?URLSearchParams:Rr,Gu=typeof FormData<"u"?FormData:null,Xu=typeof Blob<"u"?Blob:null,Qu={isBrowser:!0,classes:{URLSearchParams:Yu,FormData:Gu,Blob:Xu},protocols:["http","https","file","blob","url","data"]},kr=typeof window<"u"&&typeof document<"u",Xn=typeof navigator=="object"&&navigator||void 0,Zu=kr&&(!Xn||["ReactNative","NativeScript","NS"].indexOf(Xn.product)<0),ef=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",tf=kr&&window.location.href||"http://localhost",sf=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:kr,hasStandardBrowserEnv:Zu,hasStandardBrowserWebWorkerEnv:ef,navigator:Xn,origin:tf},Symbol.toStringTag,{value:"Module"})),ge={...sf,...Qu};function nf(e,t){return wn(e,new ge.classes.URLSearchParams,{visitor:function(s,n,r,i){return ge.isNode&&g.isBuffer(s)?(this.append(n,s.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function rf(e){return g.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function of(e){const t={},s=Object.keys(e);let n;const r=s.length;let i;for(n=0;n<r;n++)i=s[n],t[i]=e[i];return t}function na(e){function t(s,n,r,i){let o=s[i++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=i>=s.length;return o=!o&&g.isArray(r)?r.length:o,l?(g.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!a):((!r[o]||!g.isObject(r[o]))&&(r[o]=[]),t(s,n,r[o],i)&&g.isArray(r[o])&&(r[o]=of(r[o])),!a)}if(g.isFormData(e)&&g.isFunction(e.entries)){const s={};return g.forEachEntry(e,(n,r)=>{t(rf(n),r,s,0)}),s}return null}function af(e,t,s){if(g.isString(e))try{return(t||JSON.parse)(e),g.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(s||JSON.stringify)(e)}const Cs={transitional:sa,adapter:["xhr","http","fetch"],transformRequest:[function(t,s){const n=s.getContentType()||"",r=n.indexOf("application/json")>-1,i=g.isObject(t);if(i&&g.isHTMLForm(t)&&(t=new FormData(t)),g.isFormData(t))return r?JSON.stringify(na(t)):t;if(g.isArrayBuffer(t)||g.isBuffer(t)||g.isStream(t)||g.isFile(t)||g.isBlob(t)||g.isReadableStream(t))return t;if(g.isArrayBufferView(t))return t.buffer;if(g.isURLSearchParams(t))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return nf(t,this.formSerializer).toString();if((a=g.isFileList(t))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return wn(a?{"files[]":t}:t,l&&new l,this.formSerializer)}}return i||r?(s.setContentType("application/json",!1),af(t)):t}],transformResponse:[function(t){const s=this.transitional||Cs.transitional,n=s&&s.forcedJSONParsing,r=this.responseType==="json";if(g.isResponse(t)||g.isReadableStream(t))return t;if(t&&g.isString(t)&&(n&&!this.responseType||r)){const o=!(s&&s.silentJSONParsing)&&r;try{return JSON.parse(t,this.parseReviver)}catch(a){if(o)throw a.name==="SyntaxError"?L.from(a,L.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ge.classes.FormData,Blob:ge.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};g.forEach(["delete","get","head","post","put","patch"],e=>{Cs.headers[e]={}});const lf=g.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),cf=e=>{const t={};let s,n,r;return e&&e.split(`
`).forEach(function(o){r=o.indexOf(":"),s=o.substring(0,r).trim().toLowerCase(),n=o.substring(r+1).trim(),!(!s||t[s]&&lf[s])&&(s==="set-cookie"?t[s]?t[s].push(n):t[s]=[n]:t[s]=t[s]?t[s]+", "+n:n)}),t},yi=Symbol("internals");function rs(e){return e&&String(e).trim().toLowerCase()}function Hs(e){return e===!1||e==null?e:g.isArray(e)?e.map(Hs):String(e)}function uf(e){const t=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=s.exec(e);)t[n[1]]=n[2];return t}const ff=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function An(e,t,s,n,r){if(g.isFunction(n))return n.call(this,t,s);if(r&&(t=s),!!g.isString(t)){if(g.isString(n))return t.indexOf(n)!==-1;if(g.isRegExp(n))return n.test(t)}}function df(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,s,n)=>s.toUpperCase()+n)}function hf(e,t){const s=g.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+s,{value:function(r,i,o){return this[n].call(this,t,r,i,o)},configurable:!0})})}let Re=class{constructor(t){t&&this.set(t)}set(t,s,n){const r=this;function i(a,l,u){const c=rs(l);if(!c)throw new Error("header name must be a non-empty string");const f=g.findKey(r,c);(!f||r[f]===void 0||u===!0||u===void 0&&r[f]!==!1)&&(r[f||l]=Hs(a))}const o=(a,l)=>g.forEach(a,(u,c)=>i(u,c,l));if(g.isPlainObject(t)||t instanceof this.constructor)o(t,s);else if(g.isString(t)&&(t=t.trim())&&!ff(t))o(cf(t),s);else if(g.isObject(t)&&g.isIterable(t)){let a={},l,u;for(const c of t){if(!g.isArray(c))throw TypeError("Object iterator must return a key-value pair");a[u=c[0]]=(l=a[u])?g.isArray(l)?[...l,c[1]]:[l,c[1]]:c[1]}o(a,s)}else t!=null&&i(s,t,n);return this}get(t,s){if(t=rs(t),t){const n=g.findKey(this,t);if(n){const r=this[n];if(!s)return r;if(s===!0)return uf(r);if(g.isFunction(s))return s.call(this,r,n);if(g.isRegExp(s))return s.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,s){if(t=rs(t),t){const n=g.findKey(this,t);return!!(n&&this[n]!==void 0&&(!s||An(this,this[n],n,s)))}return!1}delete(t,s){const n=this;let r=!1;function i(o){if(o=rs(o),o){const a=g.findKey(n,o);a&&(!s||An(n,n[a],a,s))&&(delete n[a],r=!0)}}return g.isArray(t)?t.forEach(i):i(t),r}clear(t){const s=Object.keys(this);let n=s.length,r=!1;for(;n--;){const i=s[n];(!t||An(this,this[i],i,t,!0))&&(delete this[i],r=!0)}return r}normalize(t){const s=this,n={};return g.forEach(this,(r,i)=>{const o=g.findKey(n,i);if(o){s[o]=Hs(r),delete s[i];return}const a=t?df(i):String(i).trim();a!==i&&delete s[i],s[a]=Hs(r),n[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const s=Object.create(null);return g.forEach(this,(n,r)=>{n!=null&&n!==!1&&(s[r]=t&&g.isArray(n)?n.join(", "):n)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,s])=>t+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...s){const n=new this(t);return s.forEach(r=>n.set(r)),n}static accessor(t){const n=(this[yi]=this[yi]={accessors:{}}).accessors,r=this.prototype;function i(o){const a=rs(o);n[a]||(hf(r,o),n[a]=!0)}return g.isArray(t)?t.forEach(i):i(t),this}};Re.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);g.reduceDescriptors(Re.prototype,({value:e},t)=>{let s=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[s]=n}}});g.freezeMethods(Re);function Pn(e,t){const s=this||Cs,n=t||s,r=Re.from(n.headers);let i=n.data;return g.forEach(e,function(a){i=a.call(s,i,r.normalize(),t?t.status:void 0)}),r.normalize(),i}function ra(e){return!!(e&&e.__CANCEL__)}function Qt(e,t,s){L.call(this,e??"canceled",L.ERR_CANCELED,t,s),this.name="CanceledError"}g.inherits(Qt,L,{__CANCEL__:!0});function ia(e,t,s){const n=s.config.validateStatus;!s.status||!n||n(s.status)?e(s):t(new L("Request failed with status code "+s.status,[L.ERR_BAD_REQUEST,L.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function pf(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function gf(e,t){e=e||10;const s=new Array(e),n=new Array(e);let r=0,i=0,o;return t=t!==void 0?t:1e3,function(l){const u=Date.now(),c=n[i];o||(o=u),s[r]=l,n[r]=u;let f=i,p=0;for(;f!==r;)p+=s[f++],f=f%e;if(r=(r+1)%e,r===i&&(i=(i+1)%e),u-o<t)return;const y=c&&u-c;return y?Math.round(p*1e3/y):void 0}}function _f(e,t){let s=0,n=1e3/t,r,i;const o=(u,c=Date.now())=>{s=c,r=null,i&&(clearTimeout(i),i=null),e(...u)};return[(...u)=>{const c=Date.now(),f=c-s;f>=n?o(u,c):(r=u,i||(i=setTimeout(()=>{i=null,o(r)},n-f)))},()=>r&&o(r)]}const Zs=(e,t,s=3)=>{let n=0;const r=gf(50,250);return _f(i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,l=o-n,u=r(l),c=o<=a;n=o;const f={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:u||void 0,estimated:u&&a&&c?(a-o)/u:void 0,event:i,lengthComputable:a!=null,[t?"download":"upload"]:!0};e(f)},s)},bi=(e,t)=>{const s=e!=null;return[n=>t[0]({lengthComputable:s,total:e,loaded:n}),t[1]]},Si=e=>(...t)=>g.asap(()=>e(...t)),mf=ge.hasStandardBrowserEnv?((e,t)=>s=>(s=new URL(s,ge.origin),e.protocol===s.protocol&&e.host===s.host&&(t||e.port===s.port)))(new URL(ge.origin),ge.navigator&&/(msie|trident)/i.test(ge.navigator.userAgent)):()=>!0,wf=ge.hasStandardBrowserEnv?{write(e,t,s,n,r,i,o){if(typeof document>"u")return;const a=[`${e}=${encodeURIComponent(t)}`];g.isNumber(s)&&a.push(`expires=${new Date(s).toUTCString()}`),g.isString(n)&&a.push(`path=${n}`),g.isString(r)&&a.push(`domain=${r}`),i===!0&&a.push("secure"),g.isString(o)&&a.push(`SameSite=${o}`),document.cookie=a.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function yf(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function bf(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function oa(e,t,s){let n=!yf(t);return e&&(n||s==!1)?bf(e,t):t}const vi=e=>e instanceof Re?{...e}:e;function Pt(e,t){t=t||{};const s={};function n(u,c,f,p){return g.isPlainObject(u)&&g.isPlainObject(c)?g.merge.call({caseless:p},u,c):g.isPlainObject(c)?g.merge({},c):g.isArray(c)?c.slice():c}function r(u,c,f,p){if(g.isUndefined(c)){if(!g.isUndefined(u))return n(void 0,u,f,p)}else return n(u,c,f,p)}function i(u,c){if(!g.isUndefined(c))return n(void 0,c)}function o(u,c){if(g.isUndefined(c)){if(!g.isUndefined(u))return n(void 0,u)}else return n(void 0,c)}function a(u,c,f){if(f in t)return n(u,c);if(f in e)return n(void 0,u)}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,c,f)=>r(vi(u),vi(c),f,!0)};return g.forEach(Object.keys({...e,...t}),function(c){const f=l[c]||r,p=f(e[c],t[c],c);g.isUndefined(p)&&f!==a||(s[c]=p)}),s}const aa=e=>{const t=Pt({},e);let{data:s,withXSRFToken:n,xsrfHeaderName:r,xsrfCookieName:i,headers:o,auth:a}=t;if(t.headers=o=Re.from(o),t.url=ta(oa(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),g.isFormData(s)){if(ge.hasStandardBrowserEnv||ge.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(g.isFunction(s.getHeaders)){const l=s.getHeaders(),u=["content-type","content-length"];Object.entries(l).forEach(([c,f])=>{u.includes(c.toLowerCase())&&o.set(c,f)})}}if(ge.hasStandardBrowserEnv&&(n&&g.isFunction(n)&&(n=n(t)),n||n!==!1&&mf(t.url))){const l=r&&i&&wf.read(i);l&&o.set(r,l)}return t},Sf=typeof XMLHttpRequest<"u",vf=Sf&&function(e){return new Promise(function(s,n){const r=aa(e);let i=r.data;const o=Re.from(r.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:u}=r,c,f,p,y,_;function E(){y&&y(),_&&_(),r.cancelToken&&r.cancelToken.unsubscribe(c),r.signal&&r.signal.removeEventListener("abort",c)}let T=new XMLHttpRequest;T.open(r.method.toUpperCase(),r.url,!0),T.timeout=r.timeout;function A(){if(!T)return;const D=Re.from("getAllResponseHeaders"in T&&T.getAllResponseHeaders()),$={data:!a||a==="text"||a==="json"?T.responseText:T.response,status:T.status,statusText:T.statusText,headers:D,config:e,request:T};ia(function(W){s(W),E()},function(W){n(W),E()},$),T=null}"onloadend"in T?T.onloadend=A:T.onreadystatechange=function(){!T||T.readyState!==4||T.status===0&&!(T.responseURL&&T.responseURL.indexOf("file:")===0)||setTimeout(A)},T.onabort=function(){T&&(n(new L("Request aborted",L.ECONNABORTED,e,T)),T=null)},T.onerror=function(O){const $=O&&O.message?O.message:"Network Error",q=new L($,L.ERR_NETWORK,e,T);q.event=O||null,n(q),T=null},T.ontimeout=function(){let O=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const $=r.transitional||sa;r.timeoutErrorMessage&&(O=r.timeoutErrorMessage),n(new L(O,$.clarifyTimeoutError?L.ETIMEDOUT:L.ECONNABORTED,e,T)),T=null},i===void 0&&o.setContentType(null),"setRequestHeader"in T&&g.forEach(o.toJSON(),function(O,$){T.setRequestHeader($,O)}),g.isUndefined(r.withCredentials)||(T.withCredentials=!!r.withCredentials),a&&a!=="json"&&(T.responseType=r.responseType),u&&([p,_]=Zs(u,!0),T.addEventListener("progress",p)),l&&T.upload&&([f,y]=Zs(l),T.upload.addEventListener("progress",f),T.upload.addEventListener("loadend",y)),(r.cancelToken||r.signal)&&(c=D=>{T&&(n(!D||D.type?new Qt(null,e,T):D),T.abort(),T=null)},r.cancelToken&&r.cancelToken.subscribe(c),r.signal&&(r.signal.aborted?c():r.signal.addEventListener("abort",c)));const F=pf(r.url);if(F&&ge.protocols.indexOf(F)===-1){n(new L("Unsupported protocol "+F+":",L.ERR_BAD_REQUEST,e));return}T.send(i||null)})},Ef=(e,t)=>{const{length:s}=e=e?e.filter(Boolean):[];if(t||s){let n=new AbortController,r;const i=function(u){if(!r){r=!0,a();const c=u instanceof Error?u:this.reason;n.abort(c instanceof L?c:new Qt(c instanceof Error?c.message:c))}};let o=t&&setTimeout(()=>{o=null,i(new L(`timeout ${t} of ms exceeded`,L.ETIMEDOUT))},t);const a=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),e=null)};e.forEach(u=>u.addEventListener("abort",i));const{signal:l}=n;return l.unsubscribe=()=>g.asap(a),l}},Tf=function*(e,t){let s=e.byteLength;if(s<t){yield e;return}let n=0,r;for(;n<s;)r=n+t,yield e.slice(n,r),n=r},xf=async function*(e,t){for await(const s of Cf(e))yield*Tf(s,t)},Cf=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:s,value:n}=await t.read();if(s)break;yield n}}finally{await t.cancel()}},Ei=(e,t,s,n)=>{const r=xf(e,t);let i=0,o,a=l=>{o||(o=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:u,value:c}=await r.next();if(u){a(),l.close();return}let f=c.byteLength;if(s){let p=i+=f;s(p)}l.enqueue(new Uint8Array(c))}catch(u){throw a(u),u}},cancel(l){return a(l),r.return()}},{highWaterMark:2})},Ti=64*1024,{isFunction:Ps}=g,Rf=(({Request:e,Response:t})=>({Request:e,Response:t}))(g.global),{ReadableStream:xi,TextEncoder:Ci}=g.global,Ri=(e,...t)=>{try{return!!e(...t)}catch{return!1}},kf=e=>{e=g.merge.call({skipUndefined:!0},Rf,e);const{fetch:t,Request:s,Response:n}=e,r=t?Ps(t):typeof fetch=="function",i=Ps(s),o=Ps(n);if(!r)return!1;const a=r&&Ps(xi),l=r&&(typeof Ci=="function"?(_=>E=>_.encode(E))(new Ci):async _=>new Uint8Array(await new s(_).arrayBuffer())),u=i&&a&&Ri(()=>{let _=!1;const E=new s(ge.origin,{body:new xi,method:"POST",get duplex(){return _=!0,"half"}}).headers.has("Content-Type");return _&&!E}),c=o&&a&&Ri(()=>g.isReadableStream(new n("").body)),f={stream:c&&(_=>_.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(_=>{!f[_]&&(f[_]=(E,T)=>{let A=E&&E[_];if(A)return A.call(E);throw new L(`Response type '${_}' is not supported`,L.ERR_NOT_SUPPORT,T)})});const p=async _=>{if(_==null)return 0;if(g.isBlob(_))return _.size;if(g.isSpecCompliantForm(_))return(await new s(ge.origin,{method:"POST",body:_}).arrayBuffer()).byteLength;if(g.isArrayBufferView(_)||g.isArrayBuffer(_))return _.byteLength;if(g.isURLSearchParams(_)&&(_=_+""),g.isString(_))return(await l(_)).byteLength},y=async(_,E)=>{const T=g.toFiniteNumber(_.getContentLength());return T??p(E)};return async _=>{let{url:E,method:T,data:A,signal:F,cancelToken:D,timeout:O,onDownloadProgress:$,onUploadProgress:q,responseType:W,headers:re,withCredentials:oe="same-origin",fetchOptions:de}=aa(_),Be=t||fetch;W=W?(W+"").toLowerCase():"text";let Ue=Ef([F,D&&D.toAbortSignal()],O),De=null;const ke=Ue&&Ue.unsubscribe&&(()=>{Ue.unsubscribe()});let Tt;try{if(q&&u&&T!=="get"&&T!=="head"&&(Tt=await y(re,A))!==0){let he=new s(E,{method:"POST",body:A,duplex:"half"}),ue;if(g.isFormData(A)&&(ue=he.headers.get("content-type"))&&re.setContentType(ue),he.body){const[Dt,Nt]=bi(Tt,Zs(Si(q)));A=Ei(he.body,Ti,Dt,Nt)}}g.isString(oe)||(oe=oe?"include":"omit");const X=i&&"credentials"in s.prototype,Q={...de,signal:Ue,method:T.toUpperCase(),headers:re.normalize().toJSON(),body:A,duplex:"half",credentials:X?oe:void 0};De=i&&new s(E,Q);let H=await(i?Be(De,de):Be(E,Q));const Oe=c&&(W==="stream"||W==="response");if(c&&($||Oe&&ke)){const he={};["status","statusText","headers"].forEach(Rs=>{he[Rs]=H[Rs]});const ue=g.toFiniteNumber(H.headers.get("content-length")),[Dt,Nt]=$&&bi(ue,Zs(Si($),!0))||[];H=new n(Ei(H.body,Ti,Dt,()=>{Nt&&Nt(),ke&&ke()}),he)}W=W||"text";let dt=await f[g.findKey(f,W)||"text"](H,_);return!Oe&&ke&&ke(),await new Promise((he,ue)=>{ia(he,ue,{data:dt,headers:Re.from(H.headers),status:H.status,statusText:H.statusText,config:_,request:De})})}catch(X){throw ke&&ke(),X&&X.name==="TypeError"&&/Load failed|fetch/i.test(X.message)?Object.assign(new L("Network Error",L.ERR_NETWORK,_,De),{cause:X.cause||X}):L.from(X,X&&X.code,_,De)}}},Of=new Map,la=e=>{let t=e&&e.env||{};const{fetch:s,Request:n,Response:r}=t,i=[n,r,s];let o=i.length,a=o,l,u,c=Of;for(;a--;)l=i[a],u=c.get(l),u===void 0&&c.set(l,u=a?new Map:kf(t)),c=u;return u};la();const Or={http:Vu,xhr:vf,fetch:{get:la}};g.forEach(Or,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const ki=e=>`- ${e}`,If=e=>g.isFunction(e)||e===null||e===!1;function Af(e,t){e=g.isArray(e)?e:[e];const{length:s}=e;let n,r;const i={};for(let o=0;o<s;o++){n=e[o];let a;if(r=n,!If(n)&&(r=Or[(a=String(n)).toLowerCase()],r===void 0))throw new L(`Unknown adapter '${a}'`);if(r&&(g.isFunction(r)||(r=r.get(t))))break;i[a||"#"+o]=r}if(!r){const o=Object.entries(i).map(([l,u])=>`adapter ${l} `+(u===!1?"is not supported by the environment":"is not available in the build"));let a=s?o.length>1?`since :
`+o.map(ki).join(`
`):" "+ki(o[0]):"as no adapter specified";throw new L("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return r}const ca={getAdapter:Af,adapters:Or};function Un(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Qt(null,e)}function Oi(e){return Un(e),e.headers=Re.from(e.headers),e.data=Pn.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),ca.getAdapter(e.adapter||Cs.adapter,e)(e).then(function(n){return Un(e),n.data=Pn.call(e,e.transformResponse,n),n.headers=Re.from(n.headers),n},function(n){return ra(n)||(Un(e),n&&n.response&&(n.response.data=Pn.call(e,e.transformResponse,n.response),n.response.headers=Re.from(n.response.headers))),Promise.reject(n)})}const ua="1.13.2",yn={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{yn[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const Ii={};yn.transitional=function(t,s,n){function r(i,o){return"[Axios v"+ua+"] Transitional option '"+i+"'"+o+(n?". "+n:"")}return(i,o,a)=>{if(t===!1)throw new L(r(o," has been removed"+(s?" in "+s:"")),L.ERR_DEPRECATED);return s&&!Ii[o]&&(Ii[o]=!0,console.warn(r(o," has been deprecated since v"+s+" and will be removed in the near future"))),t?t(i,o,a):!0}};yn.spelling=function(t){return(s,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function Pf(e,t,s){if(typeof e!="object")throw new L("options must be an object",L.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let r=n.length;for(;r-- >0;){const i=n[r],o=t[i];if(o){const a=e[i],l=a===void 0||o(a,i,e);if(l!==!0)throw new L("option "+i+" must be "+l,L.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new L("Unknown option "+i,L.ERR_BAD_OPTION)}}const qs={assertOptions:Pf,validators:yn},ze=qs.validators;let At=class{constructor(t){this.defaults=t||{},this.interceptors={request:new wi,response:new wi}}async request(t,s){try{return await this._request(t,s)}catch(n){if(n instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const i=r.stack?r.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(t,s){typeof t=="string"?(s=s||{},s.url=t):s=t||{},s=Pt(this.defaults,s);const{transitional:n,paramsSerializer:r,headers:i}=s;n!==void 0&&qs.assertOptions(n,{silentJSONParsing:ze.transitional(ze.boolean),forcedJSONParsing:ze.transitional(ze.boolean),clarifyTimeoutError:ze.transitional(ze.boolean)},!1),r!=null&&(g.isFunction(r)?s.paramsSerializer={serialize:r}:qs.assertOptions(r,{encode:ze.function,serialize:ze.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),qs.assertOptions(s,{baseUrl:ze.spelling("baseURL"),withXsrfToken:ze.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let o=i&&g.merge(i.common,i[s.method]);i&&g.forEach(["delete","get","head","post","put","patch","common"],_=>{delete i[_]}),s.headers=Re.concat(o,i);const a=[];let l=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(s)===!1||(l=l&&E.synchronous,a.unshift(E.fulfilled,E.rejected))});const u=[];this.interceptors.response.forEach(function(E){u.push(E.fulfilled,E.rejected)});let c,f=0,p;if(!l){const _=[Oi.bind(this),void 0];for(_.unshift(...a),_.push(...u),p=_.length,c=Promise.resolve(s);f<p;)c=c.then(_[f++],_[f++]);return c}p=a.length;let y=s;for(;f<p;){const _=a[f++],E=a[f++];try{y=_(y)}catch(T){E.call(this,T);break}}try{c=Oi.call(this,y)}catch(_){return Promise.reject(_)}for(f=0,p=u.length;f<p;)c=c.then(u[f++],u[f++]);return c}getUri(t){t=Pt(this.defaults,t);const s=oa(t.baseURL,t.url,t.allowAbsoluteUrls);return ta(s,t.params,t.paramsSerializer)}};g.forEach(["delete","get","head","options"],function(t){At.prototype[t]=function(s,n){return this.request(Pt(n||{},{method:t,url:s,data:(n||{}).data}))}});g.forEach(["post","put","patch"],function(t){function s(n){return function(i,o,a){return this.request(Pt(a||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}At.prototype[t]=s(),At.prototype[t+"Form"]=s(!0)});let Uf=class fa{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(i){s=i});const n=this;this.promise.then(r=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](r);n._listeners=null}),this.promise.then=r=>{let i;const o=new Promise(a=>{n.subscribe(a),i=a}).then(r);return o.cancel=function(){n.unsubscribe(i)},o},t(function(i,o,a){n.reason||(n.reason=new Qt(i,o,a),s(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const s=this._listeners.indexOf(t);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const t=new AbortController,s=n=>{t.abort(n)};return this.subscribe(s),t.signal.unsubscribe=()=>this.unsubscribe(s),t.signal}static source(){let t;return{token:new fa(function(r){t=r}),cancel:t}}};function Df(e){return function(s){return e.apply(null,s)}}function Nf(e){return g.isObject(e)&&e.isAxiosError===!0}const Qn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Qn).forEach(([e,t])=>{Qn[t]=e});function da(e){const t=new At(e),s=Bo(At.prototype.request,t);return g.extend(s,At.prototype,t,{allOwnKeys:!0}),g.extend(s,t,null,{allOwnKeys:!0}),s.create=function(r){return da(Pt(e,r))},s}const ae=da(Cs);ae.Axios=At;ae.CanceledError=Qt;ae.CancelToken=Uf;ae.isCancel=ra;ae.VERSION=ua;ae.toFormData=wn;ae.AxiosError=L;ae.Cancel=ae.CanceledError;ae.all=function(t){return Promise.all(t)};ae.spread=Df;ae.isAxiosError=Nf;ae.mergeConfig=Pt;ae.AxiosHeaders=Re;ae.formToJSON=e=>na(g.isHTMLForm(e)?new FormData(e):e);ae.getAdapter=ca.getAdapter;ae.HttpStatusCode=Qn;ae.default=ae;const{Axios:lh,AxiosError:ch,CanceledError:uh,isCancel:fh,CancelToken:dh,VERSION:hh,all:ph,Cancel:gh,isAxiosError:_h,spread:mh,toFormData:wh,AxiosHeaders:yh,HttpStatusCode:bh,formToJSON:Sh,getAdapter:vh,mergeConfig:Eh}=ae,Ff={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ADMIN_KEY:"wx93u3Anq9KU",VITE_API_BASE_URL:"http://localhost:8080",VITE_DEVICE_KEY:"F4r2kT2k7rr6"};function ht(e){return window.ENV&&window.ENV[e]?window.ENV[e]:Ff[e]||""}const ve={get API_BASE_URL(){return ht("VITE_API_BASE_URL")},get ADMIN_KEY(){return ht("VITE_ADMIN_KEY")},get DEVICE_KEY(){return ht("VITE_DEVICE_KEY")},get OIDC_ENABLED(){return ht("VITE_OIDC_ENABLED")==="true"},get OIDC_AUTHORITY(){return ht("VITE_OIDC_AUTHORITY")},get OIDC_CLIENT_ID(){return ht("VITE_OIDC_CLIENT_ID")},get OIDC_REDIRECT_URI(){return ht("VITE_OIDC_REDIRECT_URI")||window.location.origin},get OIDC_SCOPE(){return ht("VITE_OIDC_SCOPE")||"openid profile email"}};class os extends Error{}os.prototype.name="InvalidTokenError";function Mf(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,s)=>{let n=s.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}function $f(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return Mf(t)}catch{return atob(t)}}function Lf(e,t){if(typeof e!="string")throw new os("Invalid token specified: must be a string");t||(t={});const s=t.header===!0?0:1,n=e.split(".")[s];if(typeof n!="string")throw new os(`Invalid token specified: missing part #${s+1}`);let r;try{r=$f(n)}catch(i){throw new os(`Invalid token specified: invalid base64 for part #${s+1} (${i.message})`)}try{return JSON.parse(r)}catch(i){throw new os(`Invalid token specified: invalid json for part #${s+1} (${i.message})`)}}var jf={debug:()=>{},info:()=>{},warn:()=>{},error:()=>{}},Xe,Qe,en=(e=>(e[e.NONE=0]="NONE",e[e.ERROR=1]="ERROR",e[e.WARN=2]="WARN",e[e.INFO=3]="INFO",e[e.DEBUG=4]="DEBUG",e))(en||{});(e=>{function t(){Xe=3,Qe=jf}e.reset=t;function s(r){if(!(0<=r&&r<=4))throw new Error("Invalid log level");Xe=r}e.setLevel=s;function n(r){Qe=r}e.setLogger=n})(en||(en={}));var B=class Ye{constructor(t){this._name=t}debug(...t){Xe>=4&&Qe.debug(Ye._format(this._name,this._method),...t)}info(...t){Xe>=3&&Qe.info(Ye._format(this._name,this._method),...t)}warn(...t){Xe>=2&&Qe.warn(Ye._format(this._name,this._method),...t)}error(...t){Xe>=1&&Qe.error(Ye._format(this._name,this._method),...t)}throw(t){throw this.error(t),t}create(t){const s=Object.create(this);return s._method=t,s.debug("begin"),s}static createStatic(t,s){const n=new Ye(`${t}.${s}`);return n.debug("begin"),n}static _format(t,s){const n=`[${t}]`;return s?`${n} ${s}:`:n}static debug(t,...s){Xe>=4&&Qe.debug(Ye._format(t),...s)}static info(t,...s){Xe>=3&&Qe.info(Ye._format(t),...s)}static warn(t,...s){Xe>=2&&Qe.warn(Ye._format(t),...s)}static error(t,...s){Xe>=1&&Qe.error(Ye._format(t),...s)}};en.reset();var ys=class{static decode(e){try{return Lf(e)}catch(t){throw B.error("JwtUtils.decode",t),t}}static async generateSignedJwt(e,t,s){const n=le.encodeBase64Url(new TextEncoder().encode(JSON.stringify(e))),r=le.encodeBase64Url(new TextEncoder().encode(JSON.stringify(t))),i=`${n}.${r}`,o=await window.crypto.subtle.sign({name:"ECDSA",hash:{name:"SHA-256"}},s,new TextEncoder().encode(i)),a=le.encodeBase64Url(new Uint8Array(o));return`${i}.${a}`}static async generateSignedJwtWithHmac(e,t,s){const n=le.encodeBase64Url(new TextEncoder().encode(JSON.stringify(e))),r=le.encodeBase64Url(new TextEncoder().encode(JSON.stringify(t))),i=`${n}.${r}`,o=await window.crypto.subtle.sign("HMAC",s,new TextEncoder().encode(i)),a=le.encodeBase64Url(new Uint8Array(o));return`${i}.${a}`}},Hf="10000000-1000-4000-8000-100000000000",Zn=e=>btoa([...new Uint8Array(e)].map(t=>String.fromCharCode(t)).join("")),ha=class Le{static _randomWord(){const t=new Uint32Array(1);return crypto.getRandomValues(t),t[0]}static generateUUIDv4(){return Hf.replace(/[018]/g,s=>(+s^Le._randomWord()&15>>+s/4).toString(16)).replace(/-/g,"")}static generateCodeVerifier(){return Le.generateUUIDv4()+Le.generateUUIDv4()+Le.generateUUIDv4()}static async generateCodeChallenge(t){if(!crypto.subtle)throw new Error("Crypto.subtle is available only in secure contexts (HTTPS).");try{const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n);return Zn(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}catch(s){throw B.error("CryptoUtils.generateCodeChallenge",s),s}}static generateBasicAuth(t,s){const r=new TextEncoder().encode([t,s].join(":"));return Zn(r)}static async hash(t,s){const n=new TextEncoder().encode(s),r=await crypto.subtle.digest(t,n);return new Uint8Array(r)}static async customCalculateJwkThumbprint(t){let s;switch(t.kty){case"RSA":s={e:t.e,kty:t.kty,n:t.n};break;case"EC":s={crv:t.crv,kty:t.kty,x:t.x,y:t.y};break;case"OKP":s={crv:t.crv,kty:t.kty,x:t.x};break;case"oct":s={crv:t.k,kty:t.kty};break;default:throw new Error("Unknown jwk type")}const n=await Le.hash("SHA-256",JSON.stringify(s));return Le.encodeBase64Url(n)}static async generateDPoPProof({url:t,accessToken:s,httpMethod:n,keyPair:r,nonce:i}){let o,a;const l={jti:window.crypto.randomUUID(),htm:n??"GET",htu:t,iat:Math.floor(Date.now()/1e3)};s&&(o=await Le.hash("SHA-256",s),a=Le.encodeBase64Url(o),l.ath=a),i&&(l.nonce=i);try{const u=await crypto.subtle.exportKey("jwk",r.publicKey),c={alg:"ES256",typ:"dpop+jwt",jwk:{crv:u.crv,kty:u.kty,x:u.x,y:u.y}};return await ys.generateSignedJwt(c,l,r.privateKey)}catch(u){throw u instanceof TypeError?new Error(`Error exporting dpop public key: ${u.message}`):u}}static async generateDPoPJkt(t){try{const s=await crypto.subtle.exportKey("jwk",t.publicKey);return await Le.customCalculateJwkThumbprint(s)}catch(s){throw s instanceof TypeError?new Error(`Could not retrieve dpop keys from storage: ${s.message}`):s}}static async generateDPoPKeys(){return await window.crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign","verify"])}static async generateClientAssertionJwt(t,s,n,r="HS256"){const i=Math.floor(Date.now()/1e3),o={alg:r,typ:"JWT"},a={iss:t,sub:t,aud:n,jti:Le.generateUUIDv4(),exp:i+300,iat:i},u={HS256:"SHA-256",HS384:"SHA-384",HS512:"SHA-512"}[r];if(!u)throw new Error(`Unsupported algorithm: ${r}. Supported algorithms are: HS256, HS384, HS512`);const c=new TextEncoder,f=await crypto.subtle.importKey("raw",c.encode(s),{name:"HMAC",hash:u},!1,["sign"]);return await ys.generateSignedJwtWithHmac(o,a,f)}};ha.encodeBase64Url=e=>Zn(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_");var le=ha,_t=class{constructor(t){this._name=t,this._callbacks=[],this._logger=new B(`Event('${this._name}')`)}addHandler(t){return this._callbacks.push(t),()=>this.removeHandler(t)}removeHandler(t){const s=this._callbacks.lastIndexOf(t);s>=0&&this._callbacks.splice(s,1)}async raise(...t){this._logger.debug("raise:",...t);for(const s of this._callbacks)await s(...t)}},Ai=class{static center({...e}){var t,s,n;return e.width==null&&(e.width=(t=[800,720,600,480].find(r=>r<=window.outerWidth/1.618))!=null?t:360),(s=e.left)!=null||(e.left=Math.max(0,Math.round(window.screenX+(window.outerWidth-e.width)/2))),e.height!=null&&((n=e.top)!=null||(e.top=Math.max(0,Math.round(window.screenY+(window.outerHeight-e.height)/2)))),e}static serialize(e){return Object.entries(e).filter(([,t])=>t!=null).map(([t,s])=>`${t}=${typeof s!="boolean"?s:s?"yes":"no"}`).join(",")}},ut=class Bs extends _t{constructor(){super(...arguments),this._logger=new B(`Timer('${this._name}')`),this._timerHandle=null,this._expiration=0,this._callback=()=>{const t=this._expiration-Bs.getEpochTime();this._logger.debug("timer completes in",t),this._expiration<=Bs.getEpochTime()&&(this.cancel(),super.raise())}}static getEpochTime(){return Math.floor(Date.now()/1e3)}init(t){const s=this._logger.create("init");t=Math.max(Math.floor(t),1);const n=Bs.getEpochTime()+t;if(this.expiration===n&&this._timerHandle){s.debug("skipping since already initialized for expiration at",this.expiration);return}this.cancel(),s.debug("using duration",t),this._expiration=n;const r=Math.min(t,5);this._timerHandle=setInterval(this._callback,r*1e3)}get expiration(){return this._expiration}cancel(){this._logger.create("cancel"),this._timerHandle&&(clearInterval(this._timerHandle),this._timerHandle=null)}},er=class{static readParams(e,t="query"){if(!e)throw new TypeError("Invalid URL");const n=new URL(e,"http://127.0.0.1")[t==="fragment"?"hash":"search"];return new URLSearchParams(n.slice(1))}},Yt=";",Ut=class extends Error{constructor(e,t){var s,n,r;if(super(e.error_description||e.error||""),this.form=t,this.name="ErrorResponse",!e.error)throw B.error("ErrorResponse","No error passed"),new Error("No error passed");this.error=e.error,this.error_description=(s=e.error_description)!=null?s:null,this.error_uri=(n=e.error_uri)!=null?n:null,this.state=e.userState,this.session_state=(r=e.session_state)!=null?r:null,this.url_state=e.url_state}},Ir=class extends Error{constructor(e){super(e),this.name="ErrorTimeout"}},qf=class{constructor(e){this._logger=new B("AccessTokenEvents"),this._expiringTimer=new ut("Access token expiring"),this._expiredTimer=new ut("Access token expired"),this._expiringNotificationTimeInSeconds=e.expiringNotificationTimeInSeconds}async load(e){const t=this._logger.create("load");if(e.access_token&&e.expires_in!==void 0){const s=e.expires_in;if(t.debug("access token present, remaining duration:",s),s>0){let r=s-this._expiringNotificationTimeInSeconds;r<=0&&(r=1),t.debug("registering expiring timer, raising in",r,"seconds"),this._expiringTimer.init(r)}else t.debug("canceling existing expiring timer because we're past expiration."),this._expiringTimer.cancel();const n=s+1;t.debug("registering expired timer, raising in",n,"seconds"),this._expiredTimer.init(n)}else this._expiringTimer.cancel(),this._expiredTimer.cancel()}async unload(){this._logger.debug("unload: canceling existing access token timers"),this._expiringTimer.cancel(),this._expiredTimer.cancel()}addAccessTokenExpiring(e){return this._expiringTimer.addHandler(e)}removeAccessTokenExpiring(e){this._expiringTimer.removeHandler(e)}addAccessTokenExpired(e){return this._expiredTimer.addHandler(e)}removeAccessTokenExpired(e){this._expiredTimer.removeHandler(e)}},Bf=class{constructor(e,t,s,n,r){this._callback=e,this._client_id=t,this._intervalInSeconds=n,this._stopOnError=r,this._logger=new B("CheckSessionIFrame"),this._timer=null,this._session_state=null,this._message=o=>{o.origin===this._frame_origin&&o.source===this._frame.contentWindow&&(o.data==="error"?(this._logger.error("error message from check session op iframe"),this._stopOnError&&this.stop()):o.data==="changed"?(this._logger.debug("changed message from check session op iframe"),this.stop(),this._callback()):this._logger.debug(o.data+" message from check session op iframe"))};const i=new URL(s);this._frame_origin=i.origin,this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="fixed",this._frame.style.left="-1000px",this._frame.style.top="0",this._frame.width="0",this._frame.height="0",this._frame.src=i.href}load(){return new Promise(e=>{this._frame.onload=()=>{e()},window.document.body.appendChild(this._frame),window.addEventListener("message",this._message,!1)})}start(e){if(this._session_state===e)return;this._logger.create("start"),this.stop(),this._session_state=e;const t=()=>{!this._frame.contentWindow||!this._session_state||this._frame.contentWindow.postMessage(this._client_id+" "+this._session_state,this._frame_origin)};t(),this._timer=setInterval(t,this._intervalInSeconds*1e3)}stop(){this._logger.create("stop"),this._session_state=null,this._timer&&(clearInterval(this._timer),this._timer=null)}},pa=class{constructor(){this._logger=new B("InMemoryWebStorage"),this._data={}}clear(){this._logger.create("clear"),this._data={}}getItem(e){return this._logger.create(`getItem('${e}')`),this._data[e]}setItem(e,t){this._logger.create(`setItem('${e}')`),this._data[e]=t}removeItem(e){this._logger.create(`removeItem('${e}')`),delete this._data[e]}get length(){return Object.getOwnPropertyNames(this._data).length}key(e){return Object.getOwnPropertyNames(this._data)[e]}},tr=class extends Error{constructor(e,t){super(t),this.name="ErrorDPoPNonce",this.nonce=e}},Ar=class{constructor(e=[],t=null,s={}){this._jwtHandler=t,this._extraHeaders=s,this._logger=new B("JsonService"),this._contentTypes=[],this._contentTypes.push(...e,"application/json"),t&&this._contentTypes.push("application/jwt")}async fetchWithTimeout(e,t={}){const{timeoutInSeconds:s,...n}=t;if(!s)return await fetch(e,n);const r=new AbortController,i=setTimeout(()=>r.abort(),s*1e3);try{return await fetch(e,{...t,signal:r.signal})}catch(o){throw o instanceof DOMException&&o.name==="AbortError"?new Ir("Network timed out"):o}finally{clearTimeout(i)}}async getJson(e,{token:t,credentials:s,timeoutInSeconds:n}={}){const r=this._logger.create("getJson"),i={Accept:this._contentTypes.join(", ")};t&&(r.debug("token passed, setting Authorization header"),i.Authorization="Bearer "+t),this._appendExtraHeaders(i);let o;try{r.debug("url:",e),o=await this.fetchWithTimeout(e,{method:"GET",headers:i,timeoutInSeconds:n,credentials:s})}catch(u){throw r.error("Network Error"),u}r.debug("HTTP response received, status",o.status);const a=o.headers.get("Content-Type");if(a&&!this._contentTypes.find(u=>a.startsWith(u))&&r.throw(new Error(`Invalid response Content-Type: ${a??"undefined"}, from URL: ${e}`)),o.ok&&this._jwtHandler&&(a!=null&&a.startsWith("application/jwt")))return await this._jwtHandler(await o.text());let l;try{l=await o.json()}catch(u){throw r.error("Error parsing JSON response",u),o.ok?u:new Error(`${o.statusText} (${o.status})`)}if(!o.ok)throw r.error("Error from server:",l),l.error?new Ut(l):new Error(`${o.statusText} (${o.status}): ${JSON.stringify(l)}`);return l}async postForm(e,{body:t,basicAuth:s,timeoutInSeconds:n,initCredentials:r,extraHeaders:i}){const o=this._logger.create("postForm"),a={Accept:this._contentTypes.join(", "),"Content-Type":"application/x-www-form-urlencoded",...i};s!==void 0&&(a.Authorization="Basic "+s),this._appendExtraHeaders(a);let l;try{o.debug("url:",e),l=await this.fetchWithTimeout(e,{method:"POST",headers:a,body:t,timeoutInSeconds:n,credentials:r})}catch(p){throw o.error("Network error"),p}o.debug("HTTP response received, status",l.status);const u=l.headers.get("Content-Type");if(u&&!this._contentTypes.find(p=>u.startsWith(p)))throw new Error(`Invalid response Content-Type: ${u??"undefined"}, from URL: ${e}`);const c=await l.text();let f={};if(c)try{f=JSON.parse(c)}catch(p){throw o.error("Error parsing JSON response",p),l.ok?p:new Error(`${l.statusText} (${l.status})`)}if(!l.ok){if(o.error("Error from server:",f),l.headers.has("dpop-nonce")){const p=l.headers.get("dpop-nonce");throw new tr(p,`${JSON.stringify(f)}`)}throw f.error?new Ut(f,t):new Error(`${l.statusText} (${l.status}): ${JSON.stringify(f)}`)}return f}_appendExtraHeaders(e){const t=this._logger.create("appendExtraHeaders"),s=Object.keys(this._extraHeaders),n=["accept","content-type"],r=["authorization"];s.length!==0&&s.forEach(i=>{if(n.includes(i.toLocaleLowerCase())){t.warn("Protected header could not be set",i,n);return}if(r.includes(i.toLocaleLowerCase())&&Object.keys(e).includes(i)){t.warn("Header could not be overridden",i,r);return}const o=typeof this._extraHeaders[i]=="function"?this._extraHeaders[i]():this._extraHeaders[i];o&&o!==""&&(e[i]=o)})}},Kf=class{constructor(e){this._settings=e,this._logger=new B("MetadataService"),this._signingKeys=null,this._metadata=null,this._metadataUrl=this._settings.metadataUrl,this._jsonService=new Ar(["application/jwk-set+json"],null,this._settings.extraHeaders),this._settings.signingKeys&&(this._logger.debug("using signingKeys from settings"),this._signingKeys=this._settings.signingKeys),this._settings.metadata&&(this._logger.debug("using metadata from settings"),this._metadata=this._settings.metadata),this._settings.fetchRequestCredentials&&(this._logger.debug("using fetchRequestCredentials from settings"),this._fetchRequestCredentials=this._settings.fetchRequestCredentials)}resetSigningKeys(){this._signingKeys=null}async getMetadata(){const e=this._logger.create("getMetadata");if(this._metadata)return e.debug("using cached values"),this._metadata;if(!this._metadataUrl)throw e.throw(new Error("No authority or metadataUrl configured on settings")),null;e.debug("getting metadata from",this._metadataUrl);const t=await this._jsonService.getJson(this._metadataUrl,{credentials:this._fetchRequestCredentials,timeoutInSeconds:this._settings.requestTimeoutInSeconds});return e.debug("merging remote JSON with seed metadata"),this._metadata=Object.assign({},t,this._settings.metadataSeed),this._metadata}getIssuer(){return this._getMetadataProperty("issuer")}getAuthorizationEndpoint(){return this._getMetadataProperty("authorization_endpoint")}getUserInfoEndpoint(){return this._getMetadataProperty("userinfo_endpoint")}getTokenEndpoint(e=!0){return this._getMetadataProperty("token_endpoint",e)}getCheckSessionIframe(){return this._getMetadataProperty("check_session_iframe",!0)}getEndSessionEndpoint(){return this._getMetadataProperty("end_session_endpoint",!0)}getRevocationEndpoint(e=!0){return this._getMetadataProperty("revocation_endpoint",e)}getKeysEndpoint(e=!0){return this._getMetadataProperty("jwks_uri",e)}async _getMetadataProperty(e,t=!1){const s=this._logger.create(`_getMetadataProperty('${e}')`),n=await this.getMetadata();if(s.debug("resolved"),n[e]===void 0){if(t===!0){s.warn("Metadata does not contain optional property");return}s.throw(new Error("Metadata does not contain property "+e))}return n[e]}async getSigningKeys(){const e=this._logger.create("getSigningKeys");if(this._signingKeys)return e.debug("returning signingKeys from cache"),this._signingKeys;const t=await this.getKeysEndpoint(!1);e.debug("got jwks_uri",t);const s=await this._jsonService.getJson(t,{timeoutInSeconds:this._settings.requestTimeoutInSeconds});if(e.debug("got key set",s),!Array.isArray(s.keys))throw e.throw(new Error("Missing keys on keyset")),null;return this._signingKeys=s.keys,this._signingKeys}},Pr=class{constructor({prefix:e="oidc.",store:t=localStorage}={}){this._logger=new B("WebStorageStateStore"),this._store=t,this._prefix=e}async set(e,t){this._logger.create(`set('${e}')`),e=this._prefix+e,await this._store.setItem(e,t)}async get(e){return this._logger.create(`get('${e}')`),e=this._prefix+e,await this._store.getItem(e)}async remove(e){this._logger.create(`remove('${e}')`),e=this._prefix+e;const t=await this._store.getItem(e);return await this._store.removeItem(e),t}async getAllKeys(){this._logger.create("getAllKeys");const e=await this._store.length,t=[];for(let s=0;s<e;s++){const n=await this._store.key(s);n&&n.indexOf(this._prefix)===0&&t.push(n.substr(this._prefix.length))}return t}},Vf="code",Wf="openid",Jf="client_secret_post",zf=60*15,sr=class{constructor({authority:e,metadataUrl:t,metadata:s,signingKeys:n,metadataSeed:r,client_id:i,client_secret:o,response_type:a=Vf,scope:l=Wf,redirect_uri:u,post_logout_redirect_uri:c,client_authentication:f=Jf,token_endpoint_auth_signing_alg:p="HS256",prompt:y,display:_,max_age:E,ui_locales:T,acr_values:A,resource:F,response_mode:D,filterProtocolClaims:O=!0,loadUserInfo:$=!1,requestTimeoutInSeconds:q,staleStateAgeInSeconds:W=zf,mergeClaimsStrategy:re={array:"replace"},disablePKCE:oe=!1,stateStore:de,revokeTokenAdditionalContentTypes:Be,fetchRequestCredentials:Ue,refreshTokenAllowedScope:De,extraQueryParams:ke={},extraTokenParams:Tt={},extraHeaders:X={},dpop:Q,omitScopeWhenRequesting:H=!1}){var Oe;if(this.authority=e,t?this.metadataUrl=t:(this.metadataUrl=e,e&&(this.metadataUrl.endsWith("/")||(this.metadataUrl+="/"),this.metadataUrl+=".well-known/openid-configuration")),this.metadata=s,this.metadataSeed=r,this.signingKeys=n,this.client_id=i,this.client_secret=o,this.response_type=a,this.scope=l,this.redirect_uri=u,this.post_logout_redirect_uri=c,this.client_authentication=f,this.token_endpoint_auth_signing_alg=p,this.prompt=y,this.display=_,this.max_age=E,this.ui_locales=T,this.acr_values=A,this.resource=F,this.response_mode=D,this.filterProtocolClaims=O??!0,this.loadUserInfo=!!$,this.staleStateAgeInSeconds=W,this.mergeClaimsStrategy=re,this.omitScopeWhenRequesting=H,this.disablePKCE=!!oe,this.revokeTokenAdditionalContentTypes=Be,this.fetchRequestCredentials=Ue||"same-origin",this.requestTimeoutInSeconds=q,de)this.stateStore=de;else{const dt=typeof window<"u"?window.localStorage:new pa;this.stateStore=new Pr({store:dt})}if(this.refreshTokenAllowedScope=De,this.extraQueryParams=ke,this.extraTokenParams=Tt,this.extraHeaders=X,this.dpop=Q,this.dpop&&!((Oe=this.dpop)!=null&&Oe.store))throw new Error("A DPoPStore is required when dpop is enabled")}},Yf=class{constructor(e,t){this._settings=e,this._metadataService=t,this._logger=new B("UserInfoService"),this._getClaimsFromJwt=async s=>{const n=this._logger.create("_getClaimsFromJwt");try{const r=ys.decode(s);return n.debug("JWT decoding successful"),r}catch(r){throw n.error("Error parsing JWT response"),r}},this._jsonService=new Ar(void 0,this._getClaimsFromJwt,this._settings.extraHeaders)}async getClaims(e){const t=this._logger.create("getClaims");e||this._logger.throw(new Error("No token passed"));const s=await this._metadataService.getUserInfoEndpoint();t.debug("got userinfo url",s);const n=await this._jsonService.getJson(s,{token:e,credentials:this._settings.fetchRequestCredentials,timeoutInSeconds:this._settings.requestTimeoutInSeconds});return t.debug("got claims",n),n}},ga=class{constructor(e,t){this._settings=e,this._metadataService=t,this._logger=new B("TokenClient"),this._jsonService=new Ar(this._settings.revokeTokenAdditionalContentTypes,null,this._settings.extraHeaders)}async exchangeCode({grant_type:e="authorization_code",redirect_uri:t=this._settings.redirect_uri,client_id:s=this._settings.client_id,client_secret:n=this._settings.client_secret,extraHeaders:r,...i}){const o=this._logger.create("exchangeCode");s||o.throw(new Error("A client_id is required")),t||o.throw(new Error("A redirect_uri is required")),i.code||o.throw(new Error("A code is required"));const a=new URLSearchParams({grant_type:e,redirect_uri:t});for(const[f,p]of Object.entries(i))p!=null&&a.set(f,p);if((this._settings.client_authentication==="client_secret_basic"||this._settings.client_authentication==="client_secret_jwt")&&n==null)throw o.throw(new Error("A client_secret is required")),null;let l;const u=await this._metadataService.getTokenEndpoint(!1);switch(this._settings.client_authentication){case"client_secret_basic":l=le.generateBasicAuth(s,n);break;case"client_secret_post":a.append("client_id",s),n&&a.append("client_secret",n);break;case"client_secret_jwt":{const f=await le.generateClientAssertionJwt(s,n,u,this._settings.token_endpoint_auth_signing_alg);a.append("client_id",s),a.append("client_assertion_type","urn:ietf:params:oauth:client-assertion-type:jwt-bearer"),a.append("client_assertion",f);break}}o.debug("got token endpoint");const c=await this._jsonService.postForm(u,{body:a,basicAuth:l,timeoutInSeconds:this._settings.requestTimeoutInSeconds,initCredentials:this._settings.fetchRequestCredentials,extraHeaders:r});return o.debug("got response"),c}async exchangeCredentials({grant_type:e="password",client_id:t=this._settings.client_id,client_secret:s=this._settings.client_secret,scope:n=this._settings.scope,...r}){const i=this._logger.create("exchangeCredentials");t||i.throw(new Error("A client_id is required"));const o=new URLSearchParams({grant_type:e});this._settings.omitScopeWhenRequesting||o.set("scope",n);for(const[c,f]of Object.entries(r))f!=null&&o.set(c,f);if((this._settings.client_authentication==="client_secret_basic"||this._settings.client_authentication==="client_secret_jwt")&&s==null)throw i.throw(new Error("A client_secret is required")),null;let a;const l=await this._metadataService.getTokenEndpoint(!1);switch(this._settings.client_authentication){case"client_secret_basic":a=le.generateBasicAuth(t,s);break;case"client_secret_post":o.append("client_id",t),s&&o.append("client_secret",s);break;case"client_secret_jwt":{const c=await le.generateClientAssertionJwt(t,s,l,this._settings.token_endpoint_auth_signing_alg);o.append("client_id",t),o.append("client_assertion_type","urn:ietf:params:oauth:client-assertion-type:jwt-bearer"),o.append("client_assertion",c);break}}i.debug("got token endpoint");const u=await this._jsonService.postForm(l,{body:o,basicAuth:a,timeoutInSeconds:this._settings.requestTimeoutInSeconds,initCredentials:this._settings.fetchRequestCredentials});return i.debug("got response"),u}async exchangeRefreshToken({grant_type:e="refresh_token",client_id:t=this._settings.client_id,client_secret:s=this._settings.client_secret,timeoutInSeconds:n,extraHeaders:r,...i}){const o=this._logger.create("exchangeRefreshToken");t||o.throw(new Error("A client_id is required")),i.refresh_token||o.throw(new Error("A refresh_token is required"));const a=new URLSearchParams({grant_type:e});for(const[f,p]of Object.entries(i))Array.isArray(p)?p.forEach(y=>a.append(f,y)):p!=null&&a.set(f,p);if((this._settings.client_authentication==="client_secret_basic"||this._settings.client_authentication==="client_secret_jwt")&&s==null)throw o.throw(new Error("A client_secret is required")),null;let l;const u=await this._metadataService.getTokenEndpoint(!1);switch(this._settings.client_authentication){case"client_secret_basic":l=le.generateBasicAuth(t,s);break;case"client_secret_post":a.append("client_id",t),s&&a.append("client_secret",s);break;case"client_secret_jwt":{const f=await le.generateClientAssertionJwt(t,s,u,this._settings.token_endpoint_auth_signing_alg);a.append("client_id",t),a.append("client_assertion_type","urn:ietf:params:oauth:client-assertion-type:jwt-bearer"),a.append("client_assertion",f);break}}o.debug("got token endpoint");const c=await this._jsonService.postForm(u,{body:a,basicAuth:l,timeoutInSeconds:n,initCredentials:this._settings.fetchRequestCredentials,extraHeaders:r});return o.debug("got response"),c}async revoke(e){var t;const s=this._logger.create("revoke");e.token||s.throw(new Error("A token is required"));const n=await this._metadataService.getRevocationEndpoint(!1);s.debug(`got revocation endpoint, revoking ${(t=e.token_type_hint)!=null?t:"default token type"}`);const r=new URLSearchParams;for(const[i,o]of Object.entries(e))o!=null&&r.set(i,o);r.set("client_id",this._settings.client_id),this._settings.client_secret&&r.set("client_secret",this._settings.client_secret),await this._jsonService.postForm(n,{body:r,timeoutInSeconds:this._settings.requestTimeoutInSeconds}),s.debug("got response")}},Gf=class{constructor(e,t,s){this._settings=e,this._metadataService=t,this._claimsService=s,this._logger=new B("ResponseValidator"),this._userInfoService=new Yf(this._settings,this._metadataService),this._tokenClient=new ga(this._settings,this._metadataService)}async validateSigninResponse(e,t,s){const n=this._logger.create("validateSigninResponse");this._processSigninState(e,t),n.debug("state processed"),await this._processCode(e,t,s),n.debug("code processed"),e.isOpenId&&this._validateIdTokenAttributes(e),n.debug("tokens validated"),await this._processClaims(e,t==null?void 0:t.skipUserInfo,e.isOpenId),n.debug("claims processed")}async validateCredentialsResponse(e,t){const s=this._logger.create("validateCredentialsResponse"),n=e.isOpenId&&!!e.id_token;n&&this._validateIdTokenAttributes(e),s.debug("tokens validated"),await this._processClaims(e,t,n),s.debug("claims processed")}async validateRefreshResponse(e,t){var s,n;const r=this._logger.create("validateRefreshResponse");e.userState=t.data,(s=e.session_state)!=null||(e.session_state=t.session_state),(n=e.scope)!=null||(e.scope=t.scope),e.isOpenId&&e.id_token&&(this._validateIdTokenAttributes(e,t.id_token),r.debug("ID Token validated")),e.id_token||(e.id_token=t.id_token,e.profile=t.profile);const i=e.isOpenId&&!!e.id_token;await this._processClaims(e,!1,i),r.debug("claims processed")}validateSignoutResponse(e,t){const s=this._logger.create("validateSignoutResponse");if(t.id!==e.state&&s.throw(new Error("State does not match")),s.debug("state validated"),e.userState=t.data,e.error)throw s.warn("Response was error",e.error),new Ut(e)}_processSigninState(e,t){var s;const n=this._logger.create("_processSigninState");if(t.id!==e.state&&n.throw(new Error("State does not match")),t.client_id||n.throw(new Error("No client_id on state")),t.authority||n.throw(new Error("No authority on state")),this._settings.authority!==t.authority&&n.throw(new Error("authority mismatch on settings vs. signin state")),this._settings.client_id&&this._settings.client_id!==t.client_id&&n.throw(new Error("client_id mismatch on settings vs. signin state")),n.debug("state validated"),e.userState=t.data,e.url_state=t.url_state,(s=e.scope)!=null||(e.scope=t.scope),e.error)throw n.warn("Response was error",e.error),new Ut(e);t.code_verifier&&!e.code&&n.throw(new Error("Expected code in response"))}async _processClaims(e,t=!1,s=!0){const n=this._logger.create("_processClaims");if(e.profile=this._claimsService.filterProtocolClaims(e.profile),t||!this._settings.loadUserInfo||!e.access_token){n.debug("not loading user info");return}n.debug("loading user info");const r=await this._userInfoService.getClaims(e.access_token);n.debug("user info claims received from user info endpoint"),s&&r.sub!==e.profile.sub&&n.throw(new Error("subject from UserInfo response does not match subject in ID Token")),e.profile=this._claimsService.mergeClaims(e.profile,this._claimsService.filterProtocolClaims(r)),n.debug("user info claims received, updated profile:",e.profile)}async _processCode(e,t,s){const n=this._logger.create("_processCode");if(e.code){n.debug("Validating code");const r=await this._tokenClient.exchangeCode({client_id:t.client_id,client_secret:t.client_secret,code:e.code,redirect_uri:t.redirect_uri,code_verifier:t.code_verifier,extraHeaders:s,...t.extraTokenParams});Object.assign(e,r)}else n.debug("No code to process")}_validateIdTokenAttributes(e,t){var s;const n=this._logger.create("_validateIdTokenAttributes");n.debug("decoding ID Token JWT");const r=ys.decode((s=e.id_token)!=null?s:"");if(r.sub||n.throw(new Error("ID Token is missing a subject claim")),t){const i=ys.decode(t);r.sub!==i.sub&&n.throw(new Error("sub in id_token does not match current sub")),r.auth_time&&r.auth_time!==i.auth_time&&n.throw(new Error("auth_time in id_token does not match original auth_time")),r.azp&&r.azp!==i.azp&&n.throw(new Error("azp in id_token does not match original azp")),!r.azp&&i.azp&&n.throw(new Error("azp not in id_token, but present in original id_token"))}e.profile=r}},tn=class nr{constructor(t){this.id=t.id||le.generateUUIDv4(),this.data=t.data,t.created&&t.created>0?this.created=t.created:this.created=ut.getEpochTime(),this.request_type=t.request_type,this.url_state=t.url_state}toStorageString(){return new B("State").create("toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,url_state:this.url_state})}static fromStorageString(t){return B.createStatic("State","fromStorageString"),Promise.resolve(new nr(JSON.parse(t)))}static async clearStaleState(t,s){const n=B.createStatic("State","clearStaleState"),r=ut.getEpochTime()-s,i=await t.getAllKeys();n.debug("got keys",i);for(let o=0;o<i.length;o++){const a=i[o],l=await t.get(a);let u=!1;if(l)try{const c=await nr.fromStorageString(l);n.debug("got item from key:",a,c.created),c.created<=r&&(u=!0)}catch(c){n.error("Error parsing state for key:",a,c),u=!0}else n.debug("no item in storage for key:",a),u=!0;u&&(n.debug("removed item for key:",a),t.remove(a))}}},_a=class rr extends tn{constructor(t){super(t),this.code_verifier=t.code_verifier,this.code_challenge=t.code_challenge,this.authority=t.authority,this.client_id=t.client_id,this.redirect_uri=t.redirect_uri,this.scope=t.scope,this.client_secret=t.client_secret,this.extraTokenParams=t.extraTokenParams,this.response_mode=t.response_mode,this.skipUserInfo=t.skipUserInfo}static async create(t){const s=t.code_verifier===!0?le.generateCodeVerifier():t.code_verifier||void 0,n=s?await le.generateCodeChallenge(s):void 0;return new rr({...t,code_verifier:s,code_challenge:n})}toStorageString(){return new B("SigninState").create("toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,url_state:this.url_state,code_verifier:this.code_verifier,authority:this.authority,client_id:this.client_id,redirect_uri:this.redirect_uri,scope:this.scope,client_secret:this.client_secret,extraTokenParams:this.extraTokenParams,response_mode:this.response_mode,skipUserInfo:this.skipUserInfo})}static fromStorageString(t){B.createStatic("SigninState","fromStorageString");const s=JSON.parse(t);return rr.create(s)}},ma=class wa{constructor(t){this.url=t.url,this.state=t.state}static async create({url:t,authority:s,client_id:n,redirect_uri:r,response_type:i,scope:o,state_data:a,response_mode:l,request_type:u,client_secret:c,nonce:f,url_state:p,resource:y,skipUserInfo:_,extraQueryParams:E,extraTokenParams:T,disablePKCE:A,dpopJkt:F,omitScopeWhenRequesting:D,...O}){if(!t)throw this._logger.error("create: No url passed"),new Error("url");if(!n)throw this._logger.error("create: No client_id passed"),new Error("client_id");if(!r)throw this._logger.error("create: No redirect_uri passed"),new Error("redirect_uri");if(!i)throw this._logger.error("create: No response_type passed"),new Error("response_type");if(!o)throw this._logger.error("create: No scope passed"),new Error("scope");if(!s)throw this._logger.error("create: No authority passed"),new Error("authority");const $=await _a.create({data:a,request_type:u,url_state:p,code_verifier:!A,client_id:n,authority:s,redirect_uri:r,response_mode:l,client_secret:c,scope:o,extraTokenParams:T,skipUserInfo:_}),q=new URL(t);q.searchParams.append("client_id",n),q.searchParams.append("redirect_uri",r),q.searchParams.append("response_type",i),D||q.searchParams.append("scope",o),f&&q.searchParams.append("nonce",f),F&&q.searchParams.append("dpop_jkt",F);let W=$.id;p&&(W=`${W}${Yt}${p}`),q.searchParams.append("state",W),$.code_challenge&&(q.searchParams.append("code_challenge",$.code_challenge),q.searchParams.append("code_challenge_method","S256")),y&&(Array.isArray(y)?y:[y]).forEach(oe=>q.searchParams.append("resource",oe));for(const[re,oe]of Object.entries({response_mode:l,...O,...E}))oe!=null&&q.searchParams.append(re,oe.toString());return new wa({url:q.href,state:$})}};ma._logger=new B("SigninRequest");var Xf=ma,Qf="openid",Dn=class{constructor(e){if(this.access_token="",this.token_type="",this.profile={},this.state=e.get("state"),this.session_state=e.get("session_state"),this.state){const t=decodeURIComponent(this.state).split(Yt);this.state=t[0],t.length>1&&(this.url_state=t.slice(1).join(Yt))}this.error=e.get("error"),this.error_description=e.get("error_description"),this.error_uri=e.get("error_uri"),this.code=e.get("code")}get expires_in(){if(this.expires_at!==void 0)return this.expires_at-ut.getEpochTime()}set expires_in(e){typeof e=="string"&&(e=Number(e)),e!==void 0&&e>=0&&(this.expires_at=Math.floor(e)+ut.getEpochTime())}get isOpenId(){var e;return((e=this.scope)==null?void 0:e.split(" ").includes(Qf))||!!this.id_token}},Zf=class{constructor({url:e,state_data:t,id_token_hint:s,post_logout_redirect_uri:n,extraQueryParams:r,request_type:i,client_id:o,url_state:a}){if(this._logger=new B("SignoutRequest"),!e)throw this._logger.error("ctor: No url passed"),new Error("url");const l=new URL(e);if(s&&l.searchParams.append("id_token_hint",s),o&&l.searchParams.append("client_id",o),n&&(l.searchParams.append("post_logout_redirect_uri",n),t||a)){this.state=new tn({data:t,request_type:i,url_state:a});let u=this.state.id;a&&(u=`${u}${Yt}${a}`),l.searchParams.append("state",u)}for(const[u,c]of Object.entries({...r}))c!=null&&l.searchParams.append(u,c.toString());this.url=l.href}},ed=class{constructor(e){if(this.state=e.get("state"),this.state){const t=decodeURIComponent(this.state).split(Yt);this.state=t[0],t.length>1&&(this.url_state=t.slice(1).join(Yt))}this.error=e.get("error"),this.error_description=e.get("error_description"),this.error_uri=e.get("error_uri")}},td=["nbf","jti","auth_time","nonce","acr","amr","azp","at_hash"],sd=["sub","iss","aud","exp","iat"],nd=class{constructor(e){this._settings=e,this._logger=new B("ClaimsService")}filterProtocolClaims(e){const t={...e};if(this._settings.filterProtocolClaims){let s;Array.isArray(this._settings.filterProtocolClaims)?s=this._settings.filterProtocolClaims:s=td;for(const n of s)sd.includes(n)||delete t[n]}return t}mergeClaims(e,t){const s={...e};for(const[n,r]of Object.entries(t))if(s[n]!==r)if(Array.isArray(s[n])||Array.isArray(r))if(this._settings.mergeClaimsStrategy.array=="replace")s[n]=r;else{const i=Array.isArray(s[n])?s[n]:[s[n]];for(const o of Array.isArray(r)?r:[r])i.includes(o)||i.push(o);s[n]=i}else typeof s[n]=="object"&&typeof r=="object"?s[n]=this.mergeClaims(s[n],r):s[n]=r;return s}},ya=class{constructor(e,t){this.keys=e,this.nonce=t}},rd=class{constructor(e,t){this._logger=new B("OidcClient"),this.settings=e instanceof sr?e:new sr(e),this.metadataService=t??new Kf(this.settings),this._claimsService=new nd(this.settings),this._validator=new Gf(this.settings,this.metadataService,this._claimsService),this._tokenClient=new ga(this.settings,this.metadataService)}async createSigninRequest({state:e,request:t,request_uri:s,request_type:n,id_token_hint:r,login_hint:i,skipUserInfo:o,nonce:a,url_state:l,response_type:u=this.settings.response_type,scope:c=this.settings.scope,redirect_uri:f=this.settings.redirect_uri,prompt:p=this.settings.prompt,display:y=this.settings.display,max_age:_=this.settings.max_age,ui_locales:E=this.settings.ui_locales,acr_values:T=this.settings.acr_values,resource:A=this.settings.resource,response_mode:F=this.settings.response_mode,extraQueryParams:D=this.settings.extraQueryParams,extraTokenParams:O=this.settings.extraTokenParams,dpopJkt:$,omitScopeWhenRequesting:q=this.settings.omitScopeWhenRequesting}){const W=this._logger.create("createSigninRequest");if(u!=="code")throw new Error("Only the Authorization Code flow (with PKCE) is supported");const re=await this.metadataService.getAuthorizationEndpoint();W.debug("Received authorization endpoint",re);const oe=await Xf.create({url:re,authority:this.settings.authority,client_id:this.settings.client_id,redirect_uri:f,response_type:u,scope:c,state_data:e,url_state:l,prompt:p,display:y,max_age:_,ui_locales:E,id_token_hint:r,login_hint:i,acr_values:T,dpopJkt:$,resource:A,request:t,request_uri:s,extraQueryParams:D,extraTokenParams:O,request_type:n,response_mode:F,client_secret:this.settings.client_secret,skipUserInfo:o,nonce:a,disablePKCE:this.settings.disablePKCE,omitScopeWhenRequesting:q});await this.clearStaleState();const de=oe.state;return await this.settings.stateStore.set(de.id,de.toStorageString()),oe}async readSigninResponseState(e,t=!1){const s=this._logger.create("readSigninResponseState"),n=new Dn(er.readParams(e,this.settings.response_mode));if(!n.state)throw s.throw(new Error("No state in response")),null;const r=await this.settings.stateStore[t?"remove":"get"](n.state);if(!r)throw s.throw(new Error("No matching state found in storage")),null;return{state:await _a.fromStorageString(r),response:n}}async processSigninResponse(e,t,s=!0){const n=this._logger.create("processSigninResponse"),{state:r,response:i}=await this.readSigninResponseState(e,s);if(n.debug("received state from storage; validating response"),this.settings.dpop&&this.settings.dpop.store){const o=await this.getDpopProof(this.settings.dpop.store);t={...t,DPoP:o}}try{await this._validator.validateSigninResponse(i,r,t)}catch(o){if(o instanceof tr&&this.settings.dpop){const a=await this.getDpopProof(this.settings.dpop.store,o.nonce);t.DPoP=a,await this._validator.validateSigninResponse(i,r,t)}else throw o}return i}async getDpopProof(e,t){let s,n;return(await e.getAllKeys()).includes(this.settings.client_id)?(n=await e.get(this.settings.client_id),n.nonce!==t&&t&&(n.nonce=t,await e.set(this.settings.client_id,n))):(s=await le.generateDPoPKeys(),n=new ya(s,t),await e.set(this.settings.client_id,n)),await le.generateDPoPProof({url:await this.metadataService.getTokenEndpoint(!1),httpMethod:"POST",keyPair:n.keys,nonce:n.nonce})}async processResourceOwnerPasswordCredentials({username:e,password:t,skipUserInfo:s=!1,extraTokenParams:n={}}){const r=await this._tokenClient.exchangeCredentials({username:e,password:t,...n}),i=new Dn(new URLSearchParams);return Object.assign(i,r),await this._validator.validateCredentialsResponse(i,s),i}async useRefreshToken({state:e,redirect_uri:t,resource:s,timeoutInSeconds:n,extraHeaders:r,extraTokenParams:i}){var o;const a=this._logger.create("useRefreshToken");let l;if(this.settings.refreshTokenAllowedScope===void 0)l=e.scope;else{const f=this.settings.refreshTokenAllowedScope.split(" ");l=(((o=e.scope)==null?void 0:o.split(" "))||[]).filter(y=>f.includes(y)).join(" ")}if(this.settings.dpop&&this.settings.dpop.store){const f=await this.getDpopProof(this.settings.dpop.store);r={...r,DPoP:f}}let u;try{u=await this._tokenClient.exchangeRefreshToken({refresh_token:e.refresh_token,scope:l,redirect_uri:t,resource:s,timeoutInSeconds:n,extraHeaders:r,...i})}catch(f){if(f instanceof tr&&this.settings.dpop)r.DPoP=await this.getDpopProof(this.settings.dpop.store,f.nonce),u=await this._tokenClient.exchangeRefreshToken({refresh_token:e.refresh_token,scope:l,redirect_uri:t,resource:s,timeoutInSeconds:n,extraHeaders:r,...i});else throw f}const c=new Dn(new URLSearchParams);return Object.assign(c,u),a.debug("validating response",c),await this._validator.validateRefreshResponse(c,{...e,scope:l}),c}async createSignoutRequest({state:e,id_token_hint:t,client_id:s,request_type:n,url_state:r,post_logout_redirect_uri:i=this.settings.post_logout_redirect_uri,extraQueryParams:o=this.settings.extraQueryParams}={}){const a=this._logger.create("createSignoutRequest"),l=await this.metadataService.getEndSessionEndpoint();if(!l)throw a.throw(new Error("No end session endpoint")),null;a.debug("Received end session endpoint",l),!s&&i&&!t&&(s=this.settings.client_id);const u=new Zf({url:l,id_token_hint:t,client_id:s,post_logout_redirect_uri:i,state_data:e,extraQueryParams:o,request_type:n,url_state:r});await this.clearStaleState();const c=u.state;return c&&(a.debug("Signout request has state to persist"),await this.settings.stateStore.set(c.id,c.toStorageString())),u}async readSignoutResponseState(e,t=!1){const s=this._logger.create("readSignoutResponseState"),n=new ed(er.readParams(e,this.settings.response_mode));if(!n.state){if(s.debug("No state in response"),n.error)throw s.warn("Response was error:",n.error),new Ut(n);return{state:void 0,response:n}}const r=await this.settings.stateStore[t?"remove":"get"](n.state);if(!r)throw s.throw(new Error("No matching state found in storage")),null;return{state:await tn.fromStorageString(r),response:n}}async processSignoutResponse(e){const t=this._logger.create("processSignoutResponse"),{state:s,response:n}=await this.readSignoutResponseState(e,!0);return s?(t.debug("Received state from storage; validating response"),this._validator.validateSignoutResponse(n,s)):t.debug("No state from storage; skipping response validation"),n}clearStaleState(){return this._logger.create("clearStaleState"),tn.clearStaleState(this.settings.stateStore,this.settings.staleStateAgeInSeconds)}async revokeToken(e,t){return this._logger.create("revokeToken"),await this._tokenClient.revoke({token:e,token_type_hint:t})}},id=class{constructor(e){this._userManager=e,this._logger=new B("SessionMonitor"),this._start=async t=>{const s=t.session_state;if(!s)return;const n=this._logger.create("_start");if(t.profile?(this._sub=t.profile.sub,n.debug("session_state",s,", sub",this._sub)):(this._sub=void 0,n.debug("session_state",s,", anonymous user")),this._checkSessionIFrame){this._checkSessionIFrame.start(s);return}try{const r=await this._userManager.metadataService.getCheckSessionIframe();if(r){n.debug("initializing check session iframe");const i=this._userManager.settings.client_id,o=this._userManager.settings.checkSessionIntervalInSeconds,a=this._userManager.settings.stopCheckSessionOnError,l=new Bf(this._callback,i,r,o,a);await l.load(),this._checkSessionIFrame=l,l.start(s)}else n.warn("no check session iframe found in the metadata")}catch(r){n.error("Error from getCheckSessionIframe:",r instanceof Error?r.message:r)}},this._stop=()=>{const t=this._logger.create("_stop");if(this._sub=void 0,this._checkSessionIFrame&&this._checkSessionIFrame.stop(),this._userManager.settings.monitorAnonymousSession){const s=setInterval(async()=>{clearInterval(s);try{const n=await this._userManager.querySessionStatus();if(n){const r={session_state:n.session_state,profile:n.sub?{sub:n.sub}:null};this._start(r)}}catch(n){t.error("error from querySessionStatus",n instanceof Error?n.message:n)}},1e3)}},this._callback=async()=>{const t=this._logger.create("_callback");try{const s=await this._userManager.querySessionStatus();let n=!0;s&&this._checkSessionIFrame?s.sub===this._sub?(n=!1,this._checkSessionIFrame.start(s.session_state),t.debug("same sub still logged in at OP, session state has changed, restarting check session iframe; session_state",s.session_state),await this._userManager.events._raiseUserSessionChanged()):t.debug("different subject signed into OP",s.sub):t.debug("subject no longer signed into OP"),n?this._sub?await this._userManager.events._raiseUserSignedOut():await this._userManager.events._raiseUserSignedIn():t.debug("no change in session detected, no event to raise")}catch(s){this._sub&&(t.debug("Error calling queryCurrentSigninSession; raising signed out event",s),await this._userManager.events._raiseUserSignedOut())}},e||this._logger.throw(new Error("No user manager passed")),this._userManager.events.addUserLoaded(this._start),this._userManager.events.addUserUnloaded(this._stop),this._init().catch(t=>{this._logger.error(t)})}async _init(){this._logger.create("_init");const e=await this._userManager.getUser();if(e)this._start(e);else if(this._userManager.settings.monitorAnonymousSession){const t=await this._userManager.querySessionStatus();if(t){const s={session_state:t.session_state,profile:t.sub?{sub:t.sub}:null};this._start(s)}}}},Nn=class ba{constructor(t){var s;this.id_token=t.id_token,this.session_state=(s=t.session_state)!=null?s:null,this.access_token=t.access_token,this.refresh_token=t.refresh_token,this.token_type=t.token_type,this.scope=t.scope,this.profile=t.profile,this.expires_at=t.expires_at,this.state=t.userState,this.url_state=t.url_state}get expires_in(){if(this.expires_at!==void 0)return this.expires_at-ut.getEpochTime()}set expires_in(t){t!==void 0&&(this.expires_at=Math.floor(t)+ut.getEpochTime())}get expired(){const t=this.expires_in;if(t!==void 0)return t<=0}get scopes(){var t,s;return(s=(t=this.scope)==null?void 0:t.split(" "))!=null?s:[]}toStorageString(){return new B("User").create("toStorageString"),JSON.stringify({id_token:this.id_token,session_state:this.session_state,access_token:this.access_token,refresh_token:this.refresh_token,token_type:this.token_type,scope:this.scope,profile:this.profile,expires_at:this.expires_at})}static fromStorageString(t){return B.createStatic("User","fromStorageString"),new ba(JSON.parse(t))}},Pi="oidc-client",Sa=class{constructor(){this._abort=new _t("Window navigation aborted"),this._disposeHandlers=new Set,this._window=null}async navigate(e){const t=this._logger.create("navigate");if(!this._window)throw new Error("Attempted to navigate on a disposed window");t.debug("setting URL in window"),this._window.location.replace(e.url);const{url:s,keepOpen:n}=await new Promise((r,i)=>{const o=l=>{var u;const c=l.data,f=(u=e.scriptOrigin)!=null?u:window.location.origin;if(!(l.origin!==f||(c==null?void 0:c.source)!==Pi)){try{const p=er.readParams(c.url,e.response_mode).get("state");if(p||t.warn("no state found in response url"),l.source!==this._window&&p!==e.state)return}catch{this._dispose(),i(new Error("Invalid response from window"))}r(c)}};window.addEventListener("message",o,!1),this._disposeHandlers.add(()=>window.removeEventListener("message",o,!1));const a=new BroadcastChannel(`oidc-client-popup-${e.state}`);a.addEventListener("message",o,!1),this._disposeHandlers.add(()=>a.close()),this._disposeHandlers.add(this._abort.addHandler(l=>{this._dispose(),i(l)}))});return t.debug("got response from window"),this._dispose(),n||this.close(),{url:s}}_dispose(){this._logger.create("_dispose");for(const e of this._disposeHandlers)e();this._disposeHandlers.clear()}static _notifyParent(e,t,s=!1,n=window.location.origin){const r={source:Pi,url:t,keepOpen:s},i=new B("_notifyParent");if(e)i.debug("With parent. Using parent.postMessage."),e.postMessage(r,n);else{i.debug("No parent. Using BroadcastChannel.");const o=new URL(t).searchParams.get("state");if(!o)throw new Error("No parent and no state in URL. Can't complete notification.");const a=new BroadcastChannel(`oidc-client-popup-${o}`);a.postMessage(r),a.close()}}},va={location:!1,toolbar:!1,height:640,closePopupWindowAfterInSeconds:-1},Ea="_blank",od=60,ad=2,Ta=10,ld=class extends sr{constructor(e){const{popup_redirect_uri:t=e.redirect_uri,popup_post_logout_redirect_uri:s=e.post_logout_redirect_uri,popupWindowFeatures:n=va,popupWindowTarget:r=Ea,redirectMethod:i="assign",redirectTarget:o="self",iframeNotifyParentOrigin:a=e.iframeNotifyParentOrigin,iframeScriptOrigin:l=e.iframeScriptOrigin,requestTimeoutInSeconds:u,silent_redirect_uri:c=e.redirect_uri,silentRequestTimeoutInSeconds:f,automaticSilentRenew:p=!0,validateSubOnSilentRenew:y=!0,includeIdTokenInSilentRenew:_=!1,monitorSession:E=!1,monitorAnonymousSession:T=!1,checkSessionIntervalInSeconds:A=ad,query_status_response_type:F="code",stopCheckSessionOnError:D=!0,revokeTokenTypes:O=["access_token","refresh_token"],revokeTokensOnSignout:$=!1,includeIdTokenInSilentSignout:q=!1,accessTokenExpiringNotificationTimeInSeconds:W=od,userStore:re}=e;if(super(e),this.popup_redirect_uri=t,this.popup_post_logout_redirect_uri=s,this.popupWindowFeatures=n,this.popupWindowTarget=r,this.redirectMethod=i,this.redirectTarget=o,this.iframeNotifyParentOrigin=a,this.iframeScriptOrigin=l,this.silent_redirect_uri=c,this.silentRequestTimeoutInSeconds=f||u||Ta,this.automaticSilentRenew=p,this.validateSubOnSilentRenew=y,this.includeIdTokenInSilentRenew=_,this.monitorSession=E,this.monitorAnonymousSession=T,this.checkSessionIntervalInSeconds=A,this.stopCheckSessionOnError=D,this.query_status_response_type=F,this.revokeTokenTypes=O,this.revokeTokensOnSignout=$,this.includeIdTokenInSilentSignout=q,this.accessTokenExpiringNotificationTimeInSeconds=W,re)this.userStore=re;else{const oe=typeof window<"u"?window.sessionStorage:new pa;this.userStore=new Pr({store:oe})}}},Ui=class xa extends Sa{constructor({silentRequestTimeoutInSeconds:t=Ta}){super(),this._logger=new B("IFrameWindow"),this._timeoutInSeconds=t,this._frame=xa.createHiddenIframe(),this._window=this._frame.contentWindow}static createHiddenIframe(){const t=window.document.createElement("iframe");return t.style.visibility="hidden",t.style.position="fixed",t.style.left="-1000px",t.style.top="0",t.width="0",t.height="0",window.document.body.appendChild(t),t}async navigate(t){this._logger.debug("navigate: Using timeout of:",this._timeoutInSeconds);const s=setTimeout(()=>void this._abort.raise(new Ir("IFrame timed out without a response")),this._timeoutInSeconds*1e3);return this._disposeHandlers.add(()=>clearTimeout(s)),await super.navigate(t)}close(){var t;this._frame&&(this._frame.parentNode&&(this._frame.addEventListener("load",s=>{var n;const r=s.target;(n=r.parentNode)==null||n.removeChild(r),this._abort.raise(new Error("IFrame removed from DOM"))},!0),(t=this._frame.contentWindow)==null||t.location.replace("about:blank")),this._frame=null),this._window=null}static notifyParent(t,s){return super._notifyParent(window.parent,t,!1,s)}},cd=class{constructor(e){this._settings=e,this._logger=new B("IFrameNavigator")}async prepare({silentRequestTimeoutInSeconds:e=this._settings.silentRequestTimeoutInSeconds}){return new Ui({silentRequestTimeoutInSeconds:e})}async callback(e){this._logger.create("callback"),Ui.notifyParent(e,this._settings.iframeNotifyParentOrigin)}},ud=500,fd=1e3,Di=class extends Sa{constructor({popupWindowTarget:e=Ea,popupWindowFeatures:t={},popupSignal:s,popupAbortOnClose:n}){super(),this._logger=new B("PopupWindow");const r=Ai.center({...va,...t});this._window=window.open(void 0,e,Ai.serialize(r)),this.abortOnClose=!!n,s&&s.addEventListener("abort",()=>{var i;this._abort.raise(new Error((i=s.reason)!=null?i:"Popup aborted"))}),t.closePopupWindowAfterInSeconds&&t.closePopupWindowAfterInSeconds>0&&setTimeout(()=>{if(!this._window||typeof this._window.closed!="boolean"||this._window.closed){this._abort.raise(new Error("Popup blocked by user"));return}this.close()},t.closePopupWindowAfterInSeconds*fd)}async navigate(e){var t;(t=this._window)==null||t.focus();const s=setInterval(()=>{(!this._window||this._window.closed)&&(this._logger.debug("Popup closed by user or isolated by redirect"),n(),this._disposeHandlers.delete(n),this.abortOnClose&&this._abort.raise(new Error("Popup closed by user")))},ud),n=()=>clearInterval(s);return this._disposeHandlers.add(n),await super.navigate(e)}close(){this._window&&(this._window.closed||(this._window.close(),this._abort.raise(new Error("Popup closed")))),this._window=null}static notifyOpener(e,t){super._notifyParent(window.opener,e,t),!t&&!window.opener&&window.close()}},dd=class{constructor(e){this._settings=e,this._logger=new B("PopupNavigator")}async prepare({popupWindowFeatures:e=this._settings.popupWindowFeatures,popupWindowTarget:t=this._settings.popupWindowTarget,popupSignal:s,popupAbortOnClose:n}){return new Di({popupWindowFeatures:e,popupWindowTarget:t,popupSignal:s,popupAbortOnClose:n})}async callback(e,{keepOpen:t=!1}){this._logger.create("callback"),Di.notifyOpener(e,t)}},hd=class{constructor(e){this._settings=e,this._logger=new B("RedirectNavigator")}async prepare({redirectMethod:e=this._settings.redirectMethod,redirectTarget:t=this._settings.redirectTarget}){var s;this._logger.create("prepare");let n=window.self;t==="top"&&(n=(s=window.top)!=null?s:window.self);const r=n.location[e].bind(n.location);let i;return{navigate:async o=>(this._logger.create("navigate"),await new Promise((l,u)=>{i=u,window.addEventListener("pageshow",()=>l(window.location.href)),r(o.url)})),close:()=>{this._logger.create("close"),i==null||i(new Error("Redirect aborted")),n.stop()}}}async callback(){}},pd=class extends qf{constructor(e){super({expiringNotificationTimeInSeconds:e.accessTokenExpiringNotificationTimeInSeconds}),this._logger=new B("UserManagerEvents"),this._userLoaded=new _t("User loaded"),this._userUnloaded=new _t("User unloaded"),this._silentRenewError=new _t("Silent renew error"),this._userSignedIn=new _t("User signed in"),this._userSignedOut=new _t("User signed out"),this._userSessionChanged=new _t("User session changed")}async load(e,t=!0){await super.load(e),t&&await this._userLoaded.raise(e)}async unload(){await super.unload(),await this._userUnloaded.raise()}addUserLoaded(e){return this._userLoaded.addHandler(e)}removeUserLoaded(e){return this._userLoaded.removeHandler(e)}addUserUnloaded(e){return this._userUnloaded.addHandler(e)}removeUserUnloaded(e){return this._userUnloaded.removeHandler(e)}addSilentRenewError(e){return this._silentRenewError.addHandler(e)}removeSilentRenewError(e){return this._silentRenewError.removeHandler(e)}async _raiseSilentRenewError(e){await this._silentRenewError.raise(e)}addUserSignedIn(e){return this._userSignedIn.addHandler(e)}removeUserSignedIn(e){this._userSignedIn.removeHandler(e)}async _raiseUserSignedIn(){await this._userSignedIn.raise()}addUserSignedOut(e){return this._userSignedOut.addHandler(e)}removeUserSignedOut(e){this._userSignedOut.removeHandler(e)}async _raiseUserSignedOut(){await this._userSignedOut.raise()}addUserSessionChanged(e){return this._userSessionChanged.addHandler(e)}removeUserSessionChanged(e){this._userSessionChanged.removeHandler(e)}async _raiseUserSessionChanged(){await this._userSessionChanged.raise()}},gd=class{constructor(e){this._userManager=e,this._logger=new B("SilentRenewService"),this._isStarted=!1,this._retryTimer=new ut("Retry Silent Renew"),this._tokenExpiring=async()=>{const t=this._logger.create("_tokenExpiring");try{await this._userManager.signinSilent(),t.debug("silent token renewal successful")}catch(s){if(s instanceof Ir){t.warn("ErrorTimeout from signinSilent:",s,"retry in 5s"),this._retryTimer.init(5);return}t.error("Error from signinSilent:",s),await this._userManager.events._raiseSilentRenewError(s)}}}async start(){const e=this._logger.create("start");if(!this._isStarted){this._isStarted=!0,this._userManager.events.addAccessTokenExpiring(this._tokenExpiring),this._retryTimer.addHandler(this._tokenExpiring);try{await this._userManager.getUser()}catch(t){e.error("getUser error",t)}}}stop(){this._isStarted&&(this._retryTimer.cancel(),this._retryTimer.removeHandler(this._tokenExpiring),this._userManager.events.removeAccessTokenExpiring(this._tokenExpiring),this._isStarted=!1)}},_d=class{constructor(e){this.refresh_token=e.refresh_token,this.id_token=e.id_token,this.session_state=e.session_state,this.scope=e.scope,this.profile=e.profile,this.data=e.state}},md=class{constructor(e,t,s,n){this._logger=new B("UserManager"),this.settings=new ld(e),this._client=new rd(e),this._redirectNavigator=t??new hd(this.settings),this._popupNavigator=s??new dd(this.settings),this._iframeNavigator=n??new cd(this.settings),this._events=new pd(this.settings),this._silentRenewService=new gd(this),this.settings.automaticSilentRenew&&this.startSilentRenew(),this._sessionMonitor=null,this.settings.monitorSession&&(this._sessionMonitor=new id(this))}get events(){return this._events}get metadataService(){return this._client.metadataService}async getUser(e=!1){const t=this._logger.create("getUser"),s=await this._loadUser();return s?(t.info("user loaded"),await this._events.load(s,e),s):(t.info("user not found in storage"),null)}async removeUser(){const e=this._logger.create("removeUser");await this.storeUser(null),e.info("user removed from storage"),await this._events.unload()}async signinRedirect(e={}){var t;this._logger.create("signinRedirect");const{redirectMethod:s,...n}=e;let r;(t=this.settings.dpop)!=null&&t.bind_authorization_code&&(r=await this.generateDPoPJkt(this.settings.dpop));const i=await this._redirectNavigator.prepare({redirectMethod:s});await this._signinStart({request_type:"si:r",dpopJkt:r,...n},i)}async signinRedirectCallback(e=window.location.href){const t=this._logger.create("signinRedirectCallback"),s=await this._signinEnd(e);return s.profile&&s.profile.sub?t.info("success, signed in subject",s.profile.sub):t.info("no subject"),s}async signinResourceOwnerCredentials({username:e,password:t,skipUserInfo:s=!1}){const n=this._logger.create("signinResourceOwnerCredential"),r=await this._client.processResourceOwnerPasswordCredentials({username:e,password:t,skipUserInfo:s,extraTokenParams:this.settings.extraTokenParams});n.debug("got signin response");const i=await this._buildUser(r);return i.profile&&i.profile.sub?n.info("success, signed in subject",i.profile.sub):n.info("no subject"),i}async signinPopup(e={}){var t;const s=this._logger.create("signinPopup");let n;(t=this.settings.dpop)!=null&&t.bind_authorization_code&&(n=await this.generateDPoPJkt(this.settings.dpop));const{popupWindowFeatures:r,popupWindowTarget:i,popupSignal:o,popupAbortOnClose:a,...l}=e,u=this.settings.popup_redirect_uri;u||s.throw(new Error("No popup_redirect_uri configured"));const c=await this._popupNavigator.prepare({popupWindowFeatures:r,popupWindowTarget:i,popupSignal:o,popupAbortOnClose:a}),f=await this._signin({request_type:"si:p",redirect_uri:u,display:"popup",dpopJkt:n,...l},c);return f&&(f.profile&&f.profile.sub?s.info("success, signed in subject",f.profile.sub):s.info("no subject")),f}async signinPopupCallback(e=window.location.href,t=!1){const s=this._logger.create("signinPopupCallback");await this._popupNavigator.callback(e,{keepOpen:t}),s.info("success")}async signinSilent(e={}){var t,s;const n=this._logger.create("signinSilent"),{silentRequestTimeoutInSeconds:r,...i}=e;let o=await this._loadUser();if(!e.forceIframeAuth&&(o!=null&&o.refresh_token)){n.debug("using refresh token");const f=new _d(o);return await this._useRefreshToken({state:f,redirect_uri:i.redirect_uri,resource:i.resource,extraTokenParams:i.extraTokenParams,timeoutInSeconds:r})}let a;(t=this.settings.dpop)!=null&&t.bind_authorization_code&&(a=await this.generateDPoPJkt(this.settings.dpop));const l=this.settings.silent_redirect_uri;l||n.throw(new Error("No silent_redirect_uri configured"));let u;o&&this.settings.validateSubOnSilentRenew&&(n.debug("subject prior to silent renew:",o.profile.sub),u=o.profile.sub);const c=await this._iframeNavigator.prepare({silentRequestTimeoutInSeconds:r});return o=await this._signin({request_type:"si:s",redirect_uri:l,prompt:"none",id_token_hint:this.settings.includeIdTokenInSilentRenew?o==null?void 0:o.id_token:void 0,dpopJkt:a,...i},c,u),o&&((s=o.profile)!=null&&s.sub?n.info("success, signed in subject",o.profile.sub):n.info("no subject")),o}async _useRefreshToken(e){const t=await this._client.useRefreshToken({timeoutInSeconds:this.settings.silentRequestTimeoutInSeconds,...e}),s=new Nn({...e.state,...t});return await this.storeUser(s),await this._events.load(s),s}async signinSilentCallback(e=window.location.href){const t=this._logger.create("signinSilentCallback");await this._iframeNavigator.callback(e),t.info("success")}async signinCallback(e=window.location.href){const{state:t}=await this._client.readSigninResponseState(e);switch(t.request_type){case"si:r":return await this.signinRedirectCallback(e);case"si:p":await this.signinPopupCallback(e);break;case"si:s":await this.signinSilentCallback(e);break;default:throw new Error("invalid response_type in state")}}async signoutCallback(e=window.location.href,t=!1){const{state:s}=await this._client.readSignoutResponseState(e);if(s)switch(s.request_type){case"so:r":return await this.signoutRedirectCallback(e);case"so:p":await this.signoutPopupCallback(e,t);break;case"so:s":await this.signoutSilentCallback(e);break;default:throw new Error("invalid response_type in state")}}async querySessionStatus(e={}){const t=this._logger.create("querySessionStatus"),{silentRequestTimeoutInSeconds:s,...n}=e,r=this.settings.silent_redirect_uri;r||t.throw(new Error("No silent_redirect_uri configured"));const i=await this._loadUser(),o=await this._iframeNavigator.prepare({silentRequestTimeoutInSeconds:s}),a=await this._signinStart({request_type:"si:s",redirect_uri:r,prompt:"none",id_token_hint:this.settings.includeIdTokenInSilentRenew?i==null?void 0:i.id_token:void 0,response_type:this.settings.query_status_response_type,scope:"openid",skipUserInfo:!0,...n},o);try{const l={},u=await this._client.processSigninResponse(a.url,l);return t.debug("got signin response"),u.session_state&&u.profile.sub?(t.info("success for subject",u.profile.sub),{session_state:u.session_state,sub:u.profile.sub}):(t.info("success, user not authenticated"),null)}catch(l){if(this.settings.monitorAnonymousSession&&l instanceof Ut)switch(l.error){case"login_required":case"consent_required":case"interaction_required":case"account_selection_required":return t.info("success for anonymous user"),{session_state:l.session_state}}throw l}}async _signin(e,t,s){const n=await this._signinStart(e,t);return await this._signinEnd(n.url,s)}async _signinStart(e,t){const s=this._logger.create("_signinStart");try{const n=await this._client.createSigninRequest(e);return s.debug("got signin request"),await t.navigate({url:n.url,state:n.state.id,response_mode:n.state.response_mode,scriptOrigin:this.settings.iframeScriptOrigin})}catch(n){throw s.debug("error after preparing navigator, closing navigator window"),t.close(),n}}async _signinEnd(e,t){const s=this._logger.create("_signinEnd"),n={},r=await this._client.processSigninResponse(e,n);return s.debug("got signin response"),await this._buildUser(r,t)}async _buildUser(e,t){const s=this._logger.create("_buildUser"),n=new Nn(e);if(t){if(t!==n.profile.sub)throw s.debug("current user does not match user returned from signin. sub from signin:",n.profile.sub),new Ut({...e,error:"login_required"});s.debug("current user matches user returned from signin")}return await this.storeUser(n),s.debug("user stored"),await this._events.load(n),n}async signoutRedirect(e={}){const t=this._logger.create("signoutRedirect"),{redirectMethod:s,...n}=e,r=await this._redirectNavigator.prepare({redirectMethod:s});await this._signoutStart({request_type:"so:r",post_logout_redirect_uri:this.settings.post_logout_redirect_uri,...n},r),t.info("success")}async signoutRedirectCallback(e=window.location.href){const t=this._logger.create("signoutRedirectCallback"),s=await this._signoutEnd(e);return t.info("success"),s}async signoutPopup(e={}){const t=this._logger.create("signoutPopup"),{popupWindowFeatures:s,popupWindowTarget:n,popupSignal:r,...i}=e,o=this.settings.popup_post_logout_redirect_uri,a=await this._popupNavigator.prepare({popupWindowFeatures:s,popupWindowTarget:n,popupSignal:r});await this._signout({request_type:"so:p",post_logout_redirect_uri:o,state:o==null?void 0:{},...i},a),t.info("success")}async signoutPopupCallback(e=window.location.href,t=!1){const s=this._logger.create("signoutPopupCallback");await this._popupNavigator.callback(e,{keepOpen:t}),s.info("success")}async _signout(e,t){const s=await this._signoutStart(e,t);return await this._signoutEnd(s.url)}async _signoutStart(e={},t){var s;const n=this._logger.create("_signoutStart");try{const r=await this._loadUser();n.debug("loaded current user from storage"),this.settings.revokeTokensOnSignout&&await this._revokeInternal(r);const i=e.id_token_hint||r&&r.id_token;i&&(n.debug("setting id_token_hint in signout request"),e.id_token_hint=i),await this.removeUser(),n.debug("user removed, creating signout request");const o=await this._client.createSignoutRequest(e);return n.debug("got signout request"),await t.navigate({url:o.url,state:(s=o.state)==null?void 0:s.id,scriptOrigin:this.settings.iframeScriptOrigin})}catch(r){throw n.debug("error after preparing navigator, closing navigator window"),t.close(),r}}async _signoutEnd(e){const t=this._logger.create("_signoutEnd"),s=await this._client.processSignoutResponse(e);return t.debug("got signout response"),s}async signoutSilent(e={}){var t;const s=this._logger.create("signoutSilent"),{silentRequestTimeoutInSeconds:n,...r}=e,i=this.settings.includeIdTokenInSilentSignout?(t=await this._loadUser())==null?void 0:t.id_token:void 0,o=this.settings.popup_post_logout_redirect_uri,a=await this._iframeNavigator.prepare({silentRequestTimeoutInSeconds:n});await this._signout({request_type:"so:s",post_logout_redirect_uri:o,id_token_hint:i,...r},a),s.info("success")}async signoutSilentCallback(e=window.location.href){const t=this._logger.create("signoutSilentCallback");await this._iframeNavigator.callback(e),t.info("success")}async revokeTokens(e){const t=await this._loadUser();await this._revokeInternal(t,e)}async _revokeInternal(e,t=this.settings.revokeTokenTypes){const s=this._logger.create("_revokeInternal");if(!e)return;const n=t.filter(r=>typeof e[r]=="string");if(!n.length){s.debug("no need to revoke due to no token(s)");return}for(const r of n)await this._client.revokeToken(e[r],r),s.info(`${r} revoked successfully`),r!=="access_token"&&(e[r]=null);await this.storeUser(e),s.debug("user stored"),await this._events.load(e)}startSilentRenew(){this._logger.create("startSilentRenew"),this._silentRenewService.start()}stopSilentRenew(){this._silentRenewService.stop()}get _userStoreKey(){return`user:${this.settings.authority}:${this.settings.client_id}`}async _loadUser(){const e=this._logger.create("_loadUser"),t=await this.settings.userStore.get(this._userStoreKey);return t?(e.debug("user storageString loaded"),Nn.fromStorageString(t)):(e.debug("no user storageString"),null)}async storeUser(e){const t=this._logger.create("storeUser");if(e){t.debug("storing user");const s=e.toStorageString();await this.settings.userStore.set(this._userStoreKey,s)}else this._logger.debug("removing user"),await this.settings.userStore.remove(this._userStoreKey),this.settings.dpop&&await this.settings.dpop.store.remove(this.settings.client_id)}async clearStaleState(){await this._client.clearStaleState()}async dpopProof(e,t,s,n){var r,i;const o=await((i=(r=this.settings.dpop)==null?void 0:r.store)==null?void 0:i.get(this.settings.client_id));if(o)return await le.generateDPoPProof({url:e,accessToken:t==null?void 0:t.access_token,httpMethod:s,keyPair:o.keys,nonce:n})}async generateDPoPJkt(e){let t=await e.store.get(this.settings.client_id);if(!t){const s=await le.generateDPoPKeys();t=new ya(s),await e.store.set(this.settings.client_id,t)}return await le.generateDPoPJkt(t.keys)}};const yt=se(null),Ni=jo(()=>yt.value!==null&&!yt.value.expired);let je=null;function wd(e){je=new md({authority:e.authority,client_id:e.clientId,redirect_uri:e.redirectUri,response_type:"code",scope:e.scope,post_logout_redirect_uri:e.redirectUri,userStore:new Pr({store:window.localStorage}),automaticSilentRenew:!0}),je.getUser().then(t=>{t&&!t.expired&&(yt.value=t)}),je.events.addUserLoaded(t=>{yt.value=t}),je.events.addSilentRenewError(t=>{console.error("Silent renew error:",t)}),je.events.addUserSignedOut(()=>{yt.value=null})}async function yd(){if(!je)throw new Error("Auth not initialized");await je.signinRedirect()}async function bd(){if(!je)throw new Error("Auth not initialized");const e=await je.signinRedirectCallback();return yt.value=e,e}async function Sd(){if(!je)throw new Error("Auth not initialized");await je.signoutRedirect()}function Ca(){var e;return((e=yt.value)==null?void 0:e.access_token)||null}function vd(){var e;return((e=yt.value)==null?void 0:e.profile)||null}const mt=ae.create({baseURL:ve.API_BASE_URL||"",timeout:2e4}),Lt=()=>{if(ve.OIDC_ENABLED){const t=Ca();return t?{Authorization:`Bearer ${t}`}:{}}const e=ve.ADMIN_KEY;return e?{"X-Admin-Key":e}:{}},Fi=()=>{if(ve.OIDC_ENABLED){const t=Ca();return t?{Authorization:`Bearer ${t}`}:{}}const e=ve.DEVICE_KEY;return e?{"X-Device-Key":e}:{}},Ks={async list(e){return(await mt.get(`/api/firmware/${e}`,{headers:Fi()})).data},async latest(e){return(await mt.get(`/api/firmware/${e}/latest`,{headers:Fi()})).data},async upload(e,t,s){const n=new FormData;return n.append("file",s),(await mt.post(`/api/firmware/${e}/${t}`,n,{headers:{...Lt(),"Content-Type":"multipart/form-data"}})).data},async remove(e,t){return(await mt.delete(`/api/firmware/${e}/${t}`,{headers:Lt()})).data}},Fn={async list(){return(await mt.get("/api/webhooks",{headers:Lt()})).data},async create(e){return(await mt.post("/api/webhooks",e,{headers:Lt()})).data},async update(e,t){return(await mt.put(`/api/webhooks/${e}`,t,{headers:Lt()})).data},async remove(e){return(await mt.delete(`/api/webhooks/${e}`,{headers:Lt()})).data}},Ed={class:"card"},Td={key:0},xd={key:1,class:"small"},Cd={class:"small"},Rd={class:"small"},kd={style:{"margin-top":"4px"}},Od=["href"],Id=["onClick"],Ad={key:2,class:"small",style:{"margin-top":"8px"}},Pd=Gt({__name:"FirmwareVersions",props:{type:{}},setup(e){const t=e,s=se([]),n=se(null),r=se(!1);Ns(()=>t.type,i,{immediate:!0});async function i(){if(t.type){r.value=!0,n.value=null;try{s.value=await Ks.list(t.type)}catch{s.value=[]}finally{r.value=!1}}}async function o(){n.value=null;try{n.value=await Ks.latest(t.type)}catch{}}async function a(c){confirm(`Delete ${t.type} ${c}?`)&&(await Ks.remove(t.type,c),await i())}function l(c){if(c==null)return"-";const f=c/1024;return f<1024?f.toFixed(1)+" KB":(f/1024).toFixed(2)+" MB"}function u(c){try{return new Date(c).toLocaleString()}catch{return c}}return(c,f)=>(V(),Y("div",Ed,[k("h2",null,"Versions for "+ie(e.type),1),k("div",{class:"row"},[k("button",{onClick:i},"Reload"),k("button",{onClick:o},"Show latest")]),r.value?(V(),Y("div",Td,"Loading")):s.value.length===0?(V(),Y("div",xd,"No versions yet.")):Ze("",!0),k("ul",null,[(V(!0),Y(Ne,null,Sr(s.value,p=>(V(),Y("li",{key:p.version,style:{margin:"8px 0"}},[k("div",null,[k("b",null,ie(p.version),1),ye(" ("+ie(l(p.sizeBytes))+")",1)]),k("div",Cd,"sha256: "+ie(p.sha256),1),k("div",Rd,"created: "+ie(u(p.createdAt)),1),k("div",kd,[k("a",{href:p.downloadUrl,target:"_blank"},"Download",8,Od),k("button",{onClick:y=>a(p.version),style:{"margin-left":"8px"}},"Delete",8,Id)])]))),128))]),n.value?(V(),Y("div",Ad,[f[0]||(f[0]=ye(" Latest: ",-1)),k("b",null,ie(n.value.version),1)])):Ze("",!0)]))}}),Ud={class:"card"},Dd=["disabled"],Nd={key:0,class:"small",style:{"margin-top":"8px"}},Fd={key:1,class:"small",style:{"margin-top":"8px",color:"#b00"}},Md=Gt({__name:"UploadFirmware",props:{type:{}},emits:["uploaded"],setup(e,{emit:t}){const s=e,n=t,r=se(""),i=se(null),o=se(null),a=se(""),l=se(!1);function u(f){var y;const p=f.target;i.value=((y=p.files)==null?void 0:y[0])??null}async function c(){var f;if(a.value="",o.value=null,!!i.value){l.value=!0;try{const p=await Ks.upload(s.type,r.value.trim(),i.value);o.value=p,n("uploaded",p),r.value="",i.value=null}catch(p){a.value=((f=p==null?void 0:p.response)==null?void 0:f.data)||(p==null?void 0:p.message)||"Upload failed"}finally{l.value=!1}}}return(f,p)=>(V(),Y("div",Ud,[k("h2",null,"Upload Firmware ("+ie(e.type)+")",1),p[1]||(p[1]=k("label",null,"Version (semver)",-1)),$t(k("input",{"onUpdate:modelValue":p[0]||(p[0]=y=>r.value=y),placeholder:"1.0.0"},null,512),[[xr,r.value]]),k("input",{type:"file",onChange:u},null,32),k("button",{disabled:!i.value||!r.value||l.value,onClick:c},ie(l.value?"Uploading":"Upload"),9,Dd),o.value?(V(),Y("div",Nd," Uploaded "+ie(o.value.type)+" "+ie(o.value.version)+" (sha="+ie(o.value.sha256)+") ",1)):Ze("",!0),a.value?(V(),Y("div",Fd,ie(a.value),1)):Ze("",!0)]))}}),$d={class:"card"},Ld={class:"row"},jd={key:0},Hd={class:"small"},qd={class:"small"},Bd=["onClick"],Kd={key:1,class:"small"},Vd=Gt({__name:"Webhooks",setup(e){const t=se([]),s=se(""),n=se(!0),r=se(!1),i=se(!0);fn(o);async function o(){t.value=await Fn.list()}async function a(){const u=[];n.value&&u.push("firmware.uploaded"),r.value&&u.push("firmware.deleted"),!(!s.value.trim()||u.length===0)&&(await Fn.create({url:s.value.trim(),events:u,enabled:i.value}),s.value="",await o())}async function l(u){confirm(`Delete webhook #${u}?`)&&(await Fn.remove(u),await o())}return(u,c)=>(V(),Y("div",$d,[c[7]||(c[7]=k("h2",null,"Webhooks",-1)),k("button",{onClick:o},"Reload"),c[8]||(c[8]=k("h3",{style:{"margin-top":"12px"}},"Add webhook",-1)),$t(k("input",{"onUpdate:modelValue":c[0]||(c[0]=f=>s.value=f),placeholder:"https://yourapp/webhook/fw"},null,512),[[xr,s.value]]),k("div",Ld,[k("label",null,[$t(k("input",{type:"checkbox","onUpdate:modelValue":c[1]||(c[1]=f=>n.value=f)},null,512),[[In,n.value]]),c[4]||(c[4]=ye(" firmware.uploaded",-1))]),k("label",null,[$t(k("input",{type:"checkbox","onUpdate:modelValue":c[2]||(c[2]=f=>r.value=f)},null,512),[[In,r.value]]),c[5]||(c[5]=ye(" firmware.deleted",-1))]),k("label",null,[$t(k("input",{type:"checkbox","onUpdate:modelValue":c[3]||(c[3]=f=>i.value=f)},null,512),[[In,i.value]]),c[6]||(c[6]=ye(" enabled",-1))])]),k("button",{onClick:a},"Create"),c[9]||(c[9]=k("hr",null,null,-1)),t.value.length?(V(),Y("ul",jd,[(V(!0),Y(Ne,null,Sr(t.value,f=>(V(),Y("li",{key:f.id,style:{margin:"8px 0"}},[k("div",null,[k("b",null,"#"+ie(f.id),1),ye(" "+ie(f.url),1)]),k("div",Hd,"events: "+ie(f.events.join(", ")),1),k("div",qd,"enabled: "+ie(f.enabled),1),k("button",{onClick:p=>l(f.id)},"Delete",8,Bd)]))),128))])):(V(),Y("p",Kd,"No webhooks registered."))]))}}),Wd={class:"card"},Jd={key:0,class:"small"},zd={key:1,class:"small"},Yd={key:2},Gd={class:"small"},Xd={key:3},Qd=Gt({__name:"Settings",setup(e){const t=se(!1),s=se(""),n=se(""),r=se(""),i=se("");return fn(()=>{t.value=ve.OIDC_ENABLED,s.value=ve.OIDC_AUTHORITY,n.value=ve.OIDC_CLIENT_ID,r.value=ve.OIDC_REDIRECT_URI,i.value=ve.OIDC_SCOPE}),(o,a)=>(V(),Y("div",Wd,[a[8]||(a[8]=k("h2",null,"Settings",-1)),a[9]||(a[9]=k("h3",null,"Authentication Mode",-1)),t.value?(V(),Y("p",zd,[...a[1]||(a[1]=[k("strong",null,"Keycloak/OIDC Mode (Secure)",-1),k("br",null,null,-1),ye(" Authentication is handled via Keycloak. Users must login to access admin features.",-1),k("br",null,null,-1),ye(" API keys are only used as fallback if no Bearer token is present. ",-1)])])):(V(),Y("p",Jd,[...a[0]||(a[0]=[k("strong",null,"API Key Mode (Legacy)",-1),k("br",null,null,-1),ye(" UI uses hardcoded API keys from environment variables. This is NOT secure for production.",-1),k("br",null,null,-1),ye(" Consider enabling Keycloak/OIDC for proper authentication. ",-1)])])),a[10]||(a[10]=k("h3",null,"Keycloak / OIDC Configuration",-1)),t.value?(V(),Y("div",Yd,[a[6]||(a[6]=k("p",{class:"small",style:{color:"green"}}," OIDC is enabled and configured",-1)),k("ul",Gd,[k("li",null,[a[2]||(a[2]=k("strong",null,"Authority:",-1)),ye(" "+ie(s.value||"Not set"),1)]),k("li",null,[a[3]||(a[3]=k("strong",null,"Client ID:",-1)),ye(" "+ie(n.value||"Not set"),1)]),k("li",null,[a[4]||(a[4]=k("strong",null,"Redirect URI:",-1)),ye(" "+ie(r.value||"Auto-detected"),1)]),k("li",null,[a[5]||(a[5]=k("strong",null,"Scope:",-1)),ye(" "+ie(i.value||"Default"),1)])])])):(V(),Y("div",Xd,[...a[7]||(a[7]=[dc('<p class="small">To enable OIDC authentication, configure the following:</p><h4>Backend API (.env or environment variables):</h4><ul class="small"><li>FW_OIDC_ENABLED=true</li><li>FW_OIDC_ISSUER_URL=https://keycloak.example.com/realms/yourrealm</li><li>FW_OIDC_CLIENT_ID=firmware-admin</li><li>FW_OIDC_ADMIN_ROLE=fw-admin</li><li>FW_OIDC_DEVICE_ROLE=fw-device</li><li>FW_OIDC_AUDIENCE=firmware-registry (optional)</li></ul><h4>Frontend UI (.env or environment variables):</h4><ul class="small"><li>VITE_OIDC_ENABLED=true</li><li>VITE_OIDC_AUTHORITY=https://keycloak.example.com/realms/yourrealm</li><li>VITE_OIDC_CLIENT_ID=firmware-admin</li><li>VITE_OIDC_REDIRECT_URI=https://your-app.example.com (optional, auto-detected)</li><li>VITE_OIDC_SCOPE=openid profile email (optional)</li></ul><h4>Keycloak Configuration:</h4><ul class="small"><li>Create a client with <strong>Public</strong> access type</li><li>Enable <strong>Standard Flow</strong> (Authorization Code with PKCE)</li><li>Set valid redirect URIs to your application URL</li><li>Create roles: <strong>fw-admin</strong> and <strong>fw-device</strong></li><li>Assign roles to users who need access</li></ul>',7)])]))]))}}),Zd={class:"app"},eh={class:"header"},th={key:0},sh={key:1,class:"twoCol"},nh={key:1},rh=Gt({__name:"App",setup(e){const t=se("firmware"),s=se(""),n=se(!1),r=se(!1),i=se(null);fn(async()=>{if(n.value=ve.OIDC_ENABLED,n.value){if(wd({authority:ve.OIDC_AUTHORITY,clientId:ve.OIDC_CLIENT_ID,redirectUri:ve.OIDC_REDIRECT_URI,scope:ve.OIDC_SCOPE}),window.location.search.includes("code=")||window.location.search.includes("state=")){r.value=!0;try{await bd(),window.history.replaceState({},document.title,window.location.pathname)}catch(c){console.error("Authentication callback failed:",c)}finally{r.value=!1}}i.value=vd()}});function o(c){s.value=c}function a(c){}async function l(){await yd()}async function u(){await Sd()}return(c,f)=>{var p,y;return V(),Y("div",Zd,[k("header",eh,[f[3]||(f[3]=k("h1",null,"Firmware Registry Admin",-1)),k("nav",null,[k("button",{class:qt({active:t.value==="firmware"}),onClick:f[0]||(f[0]=_=>t.value="firmware")},"Firmware",2),k("button",{class:qt({active:t.value==="webhooks"}),onClick:f[1]||(f[1]=_=>t.value="webhooks")},"Webhooks",2),k("button",{class:qt({active:t.value==="settings"}),onClick:f[2]||(f[2]=_=>t.value="settings")},"Settings",2),n.value&&!qn(Ni)?(V(),Y("button",{key:0,onClick:l,class:"login-btn"},"Login")):Ze("",!0),n.value&&qn(Ni)?(V(),Y("button",{key:1,onClick:u,class:"logout-btn"}," Logout ("+ie(((p=i.value)==null?void 0:p.name)||((y=i.value)==null?void 0:y.email)||"User")+") ",1)):Ze("",!0)])]),r.value?(V(),Y("main",nh,[...f[4]||(f[4]=[k("div",{class:"card"},[k("p",null,"Completing authentication...")],-1)])])):(V(),Y("main",th,[t.value==="firmware"?(V(),Ms(iu,{key:0,onSelectType:o})):Ze("",!0),t.value==="firmware"&&s.value?(V(),Y("div",sh,[$e(Pd,{type:s.value},null,8,["type"]),$e(Md,{type:s.value,onUploaded:a},null,8,["type"])])):Ze("",!0),t.value==="webhooks"?(V(),Ms(Vd,{key:2})):Ze("",!0),t.value==="settings"?(V(),Ms(Qd,{key:3})):Ze("",!0)]))])}}});Yc(rh).mount("#app");
